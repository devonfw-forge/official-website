<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=">
<meta name="generator" content="Asciidoctor 1.5.8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- ******** SOCIAL MEDIA META ********** -->

<meta name="title" property="og:title" content="devonfw website">
<meta property="og:type" content="website">
<meta name="image" property="og:image" content="https://devonfw.com/images/devonfwwebsite.png">
<meta name="description" property="og:description" content="devonfw is the standard open source software development platform; Serving the full Software Delivery Life Cycle.">
<meta property="og:url" content="https://devonfw.com/index.html">

<meta name="twitter:title" content="devonfw website">
<meta name="twitter:description" content="devonfw is the standard open source software development platform; Serving the full Software Delivery Life Cycle.">
<meta name="twitter:image" content="https://devonfw.com/images/devonfwwebsite.png">
<meta name="twitter:card" content="summary_large_image">

<!-- ************************************* -->


<title>Monitoring Solutions - Azure Native</title>
<!-- devonfw website stylesheet -->
<link rel="stylesheet" type="text/css" href="/devonfw.css">
<!-- Lunr -->
<script src="/website/assets/scripts/lunr.min.js"></script>
<!-- JQuery -->
<script src="/website/assets/scripts/jquery.min.js"></script>
<link rel="stylesheet" href="/website/assets/styles/font-awesome.min.css">
<link rel="stylesheet" href="/website/assets/styles/googlecode.min.css">
<script src="/website/assets/scripts/highlight.min.js"></script>
<script src="/website/assets/scripts/common.min.js"></script>
<script>hljs.initHighlightingOnLoad()</script>
<link rel="stylesheet" href="/website/assets/styles/bootstrap.min.css">

<script src="/website/assets/scripts/anchor.min.js"></script>

<script src="/website/components/header/search-engine/bundle.js"></script>

<script src="/website/shared/rightmenu.js"></script>

<!-- ************** Google analytics ************ -->
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}

gtag('consent', 'default', {
  'analytics_storage': 'denied'
});
</script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-151636804-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-151636804-1');
</script>
<script>
  function consentGranted() {
    gtag('consent', 'update', {
      'analytics_storage': 'granted'
    });
  }
</script>

<!-- ******************************************** -->


</head>
<body class="article">
<div id="website-navbar" class="website-navbar">
<button id="menu-button" class="menu-button">
  <img src="/images/menu-button.svg" width="32px" height="32px" alt=""/>
</button>

<ul>
<li>
<p><span class="image"><a class="image" href="/website/pages/welcome/welcome.html"><img alt="logo" src="/images/Logo_devonfw.svg"></a></span></p>
</li>
<li>
<p><a href="https://killercoda.com/devonfw">Tutorials</a></p>
</li>
<li>
<p><a href="/website/pages/solutions/index.html">Solutions</a></p>
</li>
<li>
<p><a href="/website/pages/docs/master.html">Docs</a></p>
</li>
</ul>

<form class="form-inline">
  <div class="search-bar">
    <input
      id="search-field"
      type="search"
      class="form-control mr-sm-2"
      placeholder="Search by keyword(s)..."
      aria-label="Search"
      style="height: auto;"
      autocomplete="off"/>
    <div class="sb-res-pos px-4">
      <div id="click-outside" class="click-outside z-50 hidden"></div>
      <div class="col rounded px-0 border z-100 bg-white hidden search-bar-results" id="search-results-box">
      </div>
    </div>
  </div>
</form>
<a class="navbar-github text-white" href="https://github.com/devonfw/">
  <img src="/images/github-mark.png" width=auto height=auto alt="">
</a></div>
<div id="sidebar" class="wiki-sidebar"></div>

<div id="content" class="mt-4 mt-sm-5">
<div class="toc2">
<div class="title">Table of Contents</div>
<ul class="sectlevel0">
<li><a href="#solutions_solutions_monitoring_azure_native_index.asciidoc">Monitoring Solutions - Azure Native</a>
<ul class="sectlevel1">
<li><a href="#monitoring-introduction">Monitoring Introduction</a>
<ul class="sectlevel2">
<li><a href="#context-problem">Context &amp; Problem</a></li>
</ul>
</li>
<li><a href="#monitoring-platforms">Monitoring Platforms</a>
<ul class="sectlevel2">
<li><a href="#azure">Azure</a></li>
</ul>
</li>
<li><a href="#solutions_solutions_monitoring_azure_native_index.asciidoc_monitoring-solutions---azure-native">Monitoring Solutions - Azure Native</a>
<ul class="sectlevel2">
<li><a href="#solutions_solutions_monitoring_azure_native_index.asciidoc_application-monitoring">Application Monitoring</a></li>
<li><a href="#solutions_solutions_monitoring_azure_native_index.asciidoc_infrastructure-monitoring">Infrastructure Monitoring</a></li>
</ul>
</li>
<li><a href="#solutions_solutions_monitoring_azure_native_index.asciidoc_credits">Credits</a></li>
</ul>
</li>
</ul>
<h1 id="solutions_solutions_monitoring_azure_native_index.asciidoc" class="sect0">Monitoring Solutions - Azure Native</h1>
<div class="sect1">
<h2 id="monitoring-introduction">Monitoring Introduction</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="context-problem">Context &amp; Problem</h3>
<div class="sect3">
<h4 id="terminology">Terminology</h4>
<div class="paragraph">
<p><em>Used definition: A monitoring solution helps the monitoring consumer achieve the satisfactory level of control of a defined service</em>. (<a href="https://docs.microsoft.com/en-us/azure/cloud-adoption-framework/manage/monitor/observability">Link to source</a>)</p>
</div>
<div class="paragraph">
<p>This definition already includes the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Defined service:</strong> The resources you want to monitor aka monitored resources. The resources to be monitored can be split in infrastructure and applications on top.</p>
</li>
<li>
<p><strong>Level of control:</strong> That is your bandwidth in which your defined service operates normally aka known as baseline</p>
</li>
<li>
<p><strong>Measuring:</strong> A measurement is a single act that quantifies an attribute of a part, equipment, service or process (CPU load, available memory etc.). Data measured is emitted by the monitored resources and aka telemetry.</p>
</li>
<li>
<p><strong>Monitoring consumer:</strong> The user trying to keep the service within its baseline boundaries.</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The key to achieve that is a single control plane is usually preferred to simplify the operations for the consumer aka monitoring plane. The relevant content depends on the perspective of the consumer such as performance, costs, compliance and health. Performance in this pattern includes the following as described <a href="https://github.com/uglide/azure-content/blob/master/articles/best-practices-monitoring.md">here</a>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Health monitoring:</strong> purpose of health monitoring is to generate a snapshot of the current health of the system so that you can verify that all components of the system are functioning as expected.</p>
</li>
<li>
<p><strong>Error monitoring:</strong> Bugs &amp; errors need to be detected by monitoring. Supporting information must be provided that allows monitoring consumer to analyze the root cause.</p>
</li>
<li>
<p><strong>Availability monitoring:</strong> A truly healthy system requires that the components and subsystems that compose the system are available. Availability monitoring is closely related to health monitoring. But whereas health monitoring provides an immediate view of the current health of the system, availability monitoring is concerned with tracking the availability of the system and its components to generate statistics about the uptime of the system.</p>
</li>
<li>
<p><strong>Performance monitoring:</strong> As the system is placed under more and more stress (by increasing the volume of users), the size of the datasets that these users access grows and the possiblity of failure of one or more components becomes more likely. Frequently, component failure is preceded by a decrease in performance. If you&#8217;re able detect such a decrease, you can take proactive steps to remedy the situation.</p>
</li>
<li>
<p><strong>SLA Monitoring:</strong> SLA monitoring is closely related to performance monitoring. But whereas performance monitoring is concerned with ensuring that the system functions <strong>optimally</strong>, SLA monitoring is governed by a contractual obligation that defines what optimally actually means. You can calculate the percentage availability of a service over a period of time by using the following formula: <code>%Availability =  ((Total Time – Total Downtime) / Total Time ) * 100</code></p>
</li>
</ul>
</div>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Providing a control plane requires a monitoring pipeline that should be implemented as feedback loop. The pipeline transforms raw telemetry into meaningful information that the monitoring consumer can use to determine the state of the system. The loop ensures that lessons learnt are the starting point for further improvements on the defined service side. E.g. by adaptive scaling depending on monitored traffic. The entire monitoring must be compliant and provide integration features. The conceptual stages of the pipeline are as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Data Sources/ Instrumention (Monitored resources): concerned with identifying the sources from where the telemetry needs to be captured, determining which data to capture and how to capture it.</p>
</li>
<li>
<p>Collection/ Storage (Monitoring plane)</p>
</li>
<li>
<p>Analysis/ Diagnosis (Monitoring plane): generate meaningful information that an monitoring consumer can use to determine the state of the system</p>
</li>
<li>
<p>Visualization/ Alerting (Monitoring plane): decisions about possible actions to take and then feed the results back into the instrumentation and collection stages</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The picture below summarizes the aspects:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/home/runner/work/devonfw.github.io/devonfw.github.io/target/generated-docs/monitoring.png" alt="Monitoring" width="1018 px" height="569px">
</div>
</div>
</div>
<div class="sect3">
<h4 id="standard-problems">Standard Problems</h4>
<div class="paragraph">
<p>The list below describes the standard problems that apply independent from the monitoring consumer perspective. Solutions with concrete technology are first described in subsequent chapters. Per monitoring pipeline stage the following standard problems are known:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Data Sources/ Instrumention (Monitored Resources)</strong></p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>This also includes the possibility of preprocessing to reduce or enrich sent telemtry data to the monitoring consumer. Telemetry itself might be of different structure and convey different information.</p>
</div>
</div>
</div>
</li>
<li>
<p><strong>Collection/ Storage (Monitoring Plane)</strong></p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The drop location of the telemetry needs to be determined such as inside the monitoring plane or externally.</p>
</div>
<div class="paragraph">
<p>Monitoring can result in a large amount of data. Storing such granular data is costly. Therefore an archiving mechanism is required to make sure costs are not exploding. Once archived the ingested telemetry should be removed.</p>
</div>
</div>
</div>
</li>
<li>
<p><strong>Analysis/ Diagnosis (Monitoring Plane)</strong></p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Includes standard problems like:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Filtering</p>
</li>
<li>
<p>Aggregation</p>
</li>
<li>
<p>Correlation</p>
</li>
<li>
<p>Reformating</p>
</li>
<li>
<p>Comparison against Key Performance Indicatorss (=KPIs). KPIs have no weight in software development unless they are paired with your business goals. You don’t need a handful of KPI metrics for your software team. All you need is the right KPI to help you improve your product or process. KPIs should be SMART (S = Specific; M = Measureable; A = Assignable; R = Realistic; T = Time Bound). Examples: Code Quality KPIs such as Maintainability index, Complexity metrics, Depth of inheritance, Class coupling, Lines of code; Testing Quality such as Test effort, Test coverage; Availability = Mean time between failures, Mean time to recovery/ repair <a href="https://stackify.com/metrics-monitoring-choosing-the-right-kpis/">as described here</a></p>
</li>
</ul>
</div>
</div>
</div>
</li>
<li>
<p><strong>Visualization/ Alerting (Monitoring Plane)</strong></p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Includes standard problems like:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Visualization for monitoring consumer</p>
</li>
<li>
<p>Alerts: <strong>Programmatic action</strong> that free the monitoring consumer from manual intervention. It states the trigger and the action to bee executed. One challenging aspect is to minimize the number of alerts or to detect patterns behind multiple alerts. Infering a suitable thresholds can be challing especially if the threshold is not static.</p>
</li>
<li>
<p>Reports</p>
</li>
<li>
<p>Ad-hoc queries</p>
</li>
<li>
<p>Exploration</p>
</li>
</ul>
</div>
</div>
</div>
</li>
<li>
<p><strong>Improving Feedback Loop (Plane/ Resources)</strong></p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Cases where the monitored resources operated outside their baseline should be the starting point for improvements. This might mean a better tuning of alerts and intervention or system requirements.</p>
</div>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Integrating and compliance affect the entire pipeline. Telemetry might have to be collected from other systems to achieve a single monitoring plane. However alerts/ notications might have to be forwarded to other systems.
Of course a monitoring must be compliant regarding the enterprise guidelines.</p>
</div>
<div class="paragraph">
<p>The following patterns are not dicussed here:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Provisioning of the monitoring plane and the monitored resourves</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For solutions with a certain technology see the specific guides on platform and concrete service level.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="monitoring-platforms">Monitoring Platforms</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="azure">Azure</h3>
<div class="sect3">
<h4 id="overview">Overview</h4>
<div class="paragraph">
<p>This chapter lists major features/ concrete services for monitoring of the Azure platform. This architecture pattern builds on the general problem description for monitoring. The picture below summarizes major services and concepts that are discussed in detail in the next chpater.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/home/runner/work/devonfw.github.io/devonfw.github.io/target/generated-docs/monitoring_azure.png" alt="Monitoring Azure Overview" width="1071" height="531">
</div>
</div>
</div>
<div class="sect3">
<h4 id="monitoring-pipeline">Monitoring Pipeline</h4>
<div class="paragraph">
<p>Major features per stage of the monitoring pipeline are as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Data Sources/ Instrumention</strong></p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Telemetry in Azure is split in logs and metrics. Logs contain non-structured text entries whereas metric is a value measured at a certain time. Dimensions are additional characterisitics of the measured metric.</p>
</div>
<div class="paragraph">
<p>The major logs/ metrics are one of the following categories: (1) Activity logs, (2) resource logs (former diagnostic logs) and (3) Azure Active Directory (=AAD) related logs. Activity logs track actions on Azure Resource Manager level such as creation, update or deletion of Azure resources. Resource logs track operations within a resource such as reading secrets from a key vault after it has been created.</p>
</div>
</div>
</div>
</li>
<li>
<p><strong>Monitoring Plane</strong></p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The services used for processing depend on the perspective. A major stop for a unified end-to-end monitoring is Azure Monitor. It unifies the former separate services Application Insights and Log Analytics as features. Application Insights is focusing at application monitoring whereas Log Analytics started as part of the operation management suite targeting infrastructure monitoring. Both come with their own repository for storing the telemetry. In the future a Log Analytic Workspace will be the central place for collecting data from infrastructure and application perspective.</p>
</div>
<div class="paragraph">
<p>Telemetry can either be (1) forwarded <strong>(=pushed)</strong> to the monitoring plane or (2) <strong>pulled</strong> from the monitoring plane.
<strong>Pushing</strong> can be necessary if the telemetry is not available in Azure monitor out of the box or pulling from the monitored resources is not possible. Monitored resources have to be instrumented to forward telemetry to the monitoring consumer for later processing within the monitoring plane. App insight requires linking via instruentation keys. Log Analytic workspaces require diagnostic settings. Possible targets are only log analytics workspace, event hub or azure blob storage. Telemetry that can be forwarded is predefined. Fine granular selection of metrics/ logs is not always possible.
<strong>Pulling</strong> reads telemetry such as metrics directly from the monitored resource. Logs cannot be read directly and require pushing. Compared to pushing this method is also faster.</p>
</div>
<div class="paragraph">
<p>Both features cover health and performance <strong>perspectives</strong>. Cost management is covered by Azure Cost Management. The major services for monitoring compliance are Azure Security Center and Azure Sentinel (Larger enterprise scope compared to Azure Security Center with SIEM and SOAR capabilities).</p>
</div>
<div class="paragraph">
<p>Azure monitor provides various options for <strong>visualizations</strong> but also other services are possible. Dashboards like features provide a single pane of control across a number resources. Kusto is the major language for analyzing logs and metrics e.g. as part of the <strong>root cause analysis</strong>. Additional features of app insights/ log analytics complement the language.</p>
</div>
<div class="paragraph">
<p><strong>Alert</strong> thresholds can be dynamic and actions can be grouped in action groups for multiple reuse. Dynamic Thresholds continuously learns the data of the metric series and tries to model it using a set of algorithms and methods <a href="https://docs.microsoft.com/en-us/azure/azure-monitor/alerts/alerts-dynamic-thresholds">as described here</a>. Alerts can be grouped dynamically to reduce noise and filtered/ scoped to reduce false alarms.</p>
</div>
<div class="paragraph">
<p>Various options for <strong>archiving</strong> exist in Azure such as Logic Apps. A cheap archive is usually Azure blob storage. Policies can be used to automatically delete archived blobs. Removal of ingested telemetry is configurable by setting the retention period accordingly in Log Analytics/ App Insights.</p>
</div>
</div>
</div>
</li>
<li>
<p><strong>Improving Feedback Loop (Plane/ Resources)</strong></p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The platform allows to track track end-user behavior and engagement. Impact Analysis helps to prioritize which areas to focus on to improve the most important KPIs <a href="https://docs.microsoft.com/en-us/learn/modules/route-system-feedback/3-monitoring-status-dashboards">as described here</a>. Autoscaling is provided by Azure monitor and other Azure services directly.</p>
</div>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Azure monitor can <strong>integrate</strong> with and forward telemetry from various sources. Some services like Azure Security center forward telemtry to Azure monitor.
IT service management tools such as ServiceNow or System Center Service Manager can integrate with Azure monitoring tools.
Azure provides the standard <strong>compliance mechanisms</strong> also for monitoring which ensure authentication/ authorization (via Azure Active Directory), compliance for data at-rest and in-transit.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="solutions_solutions_monitoring_azure_native_index.asciidoc_monitoring-solutions---azure-native">Monitoring Solutions - Azure Native</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="solutions_solutions_monitoring_azure_native_index.asciidoc_application-monitoring">Application Monitoring</h3>
<div class="sect3">
<h4 id="solutions_solutions_monitoring_azure_native_index.asciidoc_overview">Overview</h4>
<div class="paragraph">
<p>The solution is to use Azure Monitor with App Insights, Log Analytics and the following platform features regarding the monitored resources. The focus of this chapter is to introduce the relevant features. Recommendations for a concrete setup are given in the next chapter.</p>
</div>
<div class="paragraph">
<p>The relevant Azure monitor features are as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Collection/ Storage (Monitoring Plane)</strong></p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Telemetry can either be stored internally inside the monitoring plane by App Insights/ Log Analytics or externally.</p>
</div>
<div class="paragraph">
<p>Telemetry can be <strong>pulled</strong> from the monitoring plane. This is limited to metrics but faster than pushing. <strong>Pushing</strong> can be necessary if the telemetry is not available in Azure monitor out of the box or pulling from the monitored resources is not possible. The major mechanisms to push telemetry to the monitoring plane are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Diagnostic setting</strong></p>
</li>
<li>
<p><strong>App Insights Instrumentation/ Linking</strong>: Linked App Insights must be specified for the monitored resource. Some Azure Services such as Azure App Service come with a built-in App Insight integration. However, other services only provide diagnostic settings instead such as API management.</p>
</li>
<li>
<p><strong>Manual forwarding</strong>: E.g. by scheduled process using the APIs provided by Azure Monitor for App Insights and Log Analytics. A lightweight Azure service for polling services to be monitored is Azure Automation. It allows to host and running scripts.
App Insights/ log analytics also provide APIs to manual forward data. However this APIs have some constraints:</p>
<div class="ulist">
<ul>
<li>
<p>timestamp cannot be set freely (Both)</p>
</li>
<li>
<p>deleting something is not possible (Both)</p>
</li>
<li>
<p>saved query cannot be updated (App insights only)</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
</li>
<li>
<p><strong>Analysis/ Diagnosis (Monitoring Plane)</strong></p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Azure Monitor comes with no built-in support for KPIs such as code quality, test coverage or availability/ maintenance. However, standard KPIs such as mean time between failure (=MTBF) can be programmed with Kusto queries.
Azure Application Insights sends web requests to your application at regular intervals from points around the world. It can alert you if your application isn&#8217;t responding, or if it responds too slowly <a href="https://docs.microsoft.com/en-us/azure/azure-monitor/app/availability-alerts">as described here</a>.</p>
</div>
<div class="paragraph">
<p>Kusto queries across multiple application insights or log analytic workspaces are possible. App insight or log analytic workspaces must then be referenced with an additional identifier (App Insights: <code>app('&lt;identifier&gt;')</code>; Log Analytics: (<code>workspace('&lt;qualifier&gt;')</code>) as shown in the samples below. Various options for identifiers exist such as name and guid <a href="https://azure.microsoft.com/en-us/blog/query-across-resources/">as described here</a>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>// Cross-Kusto app insights example
union app('mmsportal-prod').requests, app('AI-Prototype/Fabrikam/fabrikamprod').requests, requests
| summarize count() by bin(timestamp, 1h)

// Cross-Kusto log analytics example
union Update, workspace("b438b4f6-912a-46d5-9cb1-b44069212ab4").Update
| where TimeGenerated &gt;= ago(1h)
| where UpdateState == "Needed"
| summarize dcount(Computer) by Classification</code></pre>
</div>
</div>
<div class="paragraph">
<p>Azure Data Explorer is a service for large scale analysis of telemetry. Large refers large amount of data or high frequency of time series data <a href="https://iterationinsights.com/article/azure-data-explorer-3-scenarios/">as described here</a>.</p>
</div>
</div>
</div>
</li>
<li>
<p><strong>Visualization/ Alerting (Monitoring Plane)</strong></p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Natively Azure monitor provides as <strong>dashboarding</strong> options (1) Azure dashboards and (2) Azure workbooks.</p>
</div>
<div class="paragraph">
<p><strong>Alerts</strong> come with the following features:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Trigger</strong>: Results from Kusto queries can be used as trigger.</p>
</li>
<li>
<p><strong>Action Groups:</strong> Assigning same action (=Action Group) to different triggers</p>
</li>
<li>
<p><strong>Smart Groups (Preview as of 24.08.2021):</strong> Groups alerts that are triggered simultanously by using artificial intelligence <a href="https://docs.microsoft.com/en-us/azure/azure-monitor/alerts/alerts-smartgroups-overview">as described here</a></p>
</li>
<li>
<p><strong>Action Rules (Preview as of 24.08.2021)</strong>: Allows to suppress (e.g. due to maintenance), scope and filter alerts <a href="https://docs.microsoft.com/en-us/azure/azure-monitor/alerts/alerts-action-rules?tabs=portal">as described here</a></p>
</li>
<li>
<p><strong>Reporting</strong>: Existing report for SLA/ Outages by using predefined Azure Monitor workbooks from gallery <a href="https://docs.microsoft.com/en-us/azure/azure-monitor/app/sla-report">as described here</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Application Insight comes with the following tools for <strong>exploration and root cause analysis</strong>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Application Map &#8658; application dependencies in other services such as backend APIs or databases</p>
</li>
<li>
<p>Smart Detection &#8658; warn you when anomalies in performance or utilization patterns</p>
</li>
<li>
<p>Usage Analysis &#8658; features of your application are most frequently used</p>
</li>
<li>
<p>Release annotations &#8658; visual indicators in your Application Insights charts of new builds and other events. Possible to correlate changes in application performance to code releases.</p>
</li>
<li>
<p>Cross-component transaction diagnostics &#8658; The unified diagnostics experience automatically correlates server-side telemetry from across all your Application Insights monitored components into a single view. It doesn&#8217;t matter if you have multiple resources with separate instrumentation keys. Application Insights detects the underlying relationship and allows you to easily diagnose the application component, dependency, or exception that caused a transaction slowdown or failure <a href="https://docs.microsoft.com/en-us/azure/azure-monitor/app/transaction-diagnostics">as described here</a>.</p>
</li>
<li>
<p>Snapshot Debugger &#8658; collect a snapshot of a live application in case of an exception, to analyze it at a later stage.</p>
</li>
<li>
<p>Correlation &#8658; Special fields are provided to convey global identifiers appearing in every request <a href="https://docs.microsoft.com/en-us/azure/azure-monitor/app/correlation">as described here</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Azure Monitor has also extensive integration features. This includes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Integrating telemetry from other Azure services (e.g. Azure Security Center also forwards to Azure Monitor)</p>
</li>
<li>
<p>Integrating external data sources (e.g. Blobs by using Kusto external operator)</p>
</li>
<li>
<p>Integrating third party tools such as Prometheus for Azure Kuberenetes</p>
</li>
<li>
<p>Exposing telemtry as data sources for external third party (e.g. Log Analytics Workspaces for Grafana) <a href="https://docs.microsoft.com/en-us/azure/azure-monitor/partners">as described here</a></p>
</li>
</ul>
</div>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following picture summarizes potential Azure services/ features that might be potentially relevant:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/home/runner/work/devonfw.github.io/devonfw.github.io/target/generated-docs/app_monitoring.png" alt="App Monitoring" width="533px" height="277px">
</div>
</div>
</div>
<div class="sect3">
<h4 id="solutions_solutions_monitoring_azure_native_index.asciidoc_variations">Variations</h4>
<div class="paragraph">
<p>A detailed configuration is not possible because the setup depends on the resources to be monitored and their capabilities. Therefore only guidelines are given to infer the right setup:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Collection/ Storage (Monitoring Plane)</strong></p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Two main decision must be made: (1) storage of telemetry and (2) push versus pull.</p>
</div>
<div class="paragraph">
<p>The number of app insights/ log analytic workspaces needs to be determined per environment. Production should be kept separate already for compliance/ resilience reasons. Dev/ test environments are rather a question mark. Subsuming dev/ test environments into a single monitoring plane is benefecial for the monitoring consumer, since he then has to check only a single place. That also means you need an additional mechanism inferring the environment for later drill down or root cause analysis. Additional custom attributes are recommended if possible. Separate App Insights/ Log Analytic instances per environment require another one for a consolidated dev/ test view.</p>
</div>
<div class="paragraph">
<p>Microsoft recommends a single app insights resource in the following cases <a href="https://docs.microsoft.com/en-us/azure/azure-monitor/app/separate-resources">as described here</a>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>For application components that are deployed together. Usually developed by a single team, managed by the same set of DevOps/ITOps users.</p>
</li>
<li>
<p>If it makes sense to aggregate Key Performance Indicators (KPIs) such as response durations, failure rates in dashboard etc., across all of them by default (you can choose to segment by role name in the Metrics Explorer experience).</p>
</li>
<li>
<p>If there is no need to manage Azure role-based access control (Azure RBAC) differently between the application components.</p>
</li>
<li>
<p>If you don’t need metrics alert criteria that are different between the components.</p>
</li>
<li>
<p>If you do not need to manage continuous exports differently between the components.</p>
</li>
<li>
<p>If you do not need to manage billing/quotas differently between the components.</p>
</li>
<li>
<p>If it is okay to have an API key have the same access to data from all components. And 10 API keys are sufficient for the needs across all of them.</p>
</li>
<li>
<p>If it is okay to have the same smart detection and work item integration settings across all roles.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Storing telemetry within the monitoring plane is easy to set up if the Azure service supports diagnostic settings or comes with app insights integration. App insights instrumentation allows extensive customization such as preprocessing. Log Analytics allows less customization out-of-the box.
Log analytics can target cheap Azure blob storage. It can be accessed with Kusto and would also eliminate the need for archiving. However, an shared access signature is required in this case which has to be renewed. Updating a saved query is only possible for Log Analytics workspace. Due to simpler setup storing the telemetry inside the monitoring plane is the recommended option.</p>
</div>
<div class="paragraph">
<p>Pull via metrics explorer is only possible for metrics but not logs. Pushing via a custom script makes sense if:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>API restrictions on monitoring plane are not a problem. E.g. not being able to set the timestamp according to original occurence.</p>
</li>
<li>
<p>Tracking of UI driven actions that are not pushed automatically</p>
</li>
<li>
<p>Service targets log analytic workspace but built-in limitations like filtering/ aggregations needed before ingestions in workspace</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The table below compares various options:</p>
</div>
<table class="tableblock frame-all grid-all" style="width: 100%;">
<colgroup>
<col style="width: 41%;">
<col style="width: 15%;">
<col style="width: 15%;">
<col style="width: 16%;">
<col style="width: 13%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top">Diagnostic Settings</th>
<th class="tableblock halign-left valign-top">App Insights Logging</th>
<th class="tableblock halign-left valign-top">Push via resource API</th>
<th class="tableblock halign-left valign-top">Metrics Explorer</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Possible per resource</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(X)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(X)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(X)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Telemetry Customization</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Limited</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">High</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Limited-High</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Limited</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Custom Logging in executed code</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Telemetry always captured</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(X)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Latency</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Medium</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Medium</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Medium</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Low</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Direction</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Push</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Push</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Push</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pull</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Comments:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Option “Push via resource API” &#8658; A scheduled script that reads periodically telemetry and pushes it to monitoring plane using the Rest API</p>
</li>
<li>
<p>„Telemetry always captured“ &#8658; Some resources allow multiple ways to run something e.g. via UI or programmatically. If the telemetry is always captured the way does not matter.</p>
</li>
</ul>
</div>
</div>
</div>
</li>
<li>
<p><strong>Visualization/ Alerting (Monitoring Plane)</strong></p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Various options inside Azure and by external tools such as Grafana exist. If you are using Grafana you have to (1) find a hosting option and (2) have to connect Grafana with Azure.</p>
</div>
<div class="paragraph">
<p>The basic options are either using the (1) <a href="https://devblogs.microsoft.com/devops/monitoring-azure-by-using-grafana-dashboards/">Grafana cloud</a> or (2) hosting Grafana in Azure.
The hosting options within Azure can be further diveded into configurations where a <a href="https://bitnami.com/stack/grafana/cloud/azure">single VM</a> with Grafana preinstalled is enough or more sophisticated high availability configurations with additional redundancy on node/ VM level.Hosting options with additional redundancy include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Installing Grafana on multiple nodes as described <a href="https://azure.microsoft.com/de-de/blog/deploying-grafana-for-production-deployments-on-azure/">here</a> via Bitnami Grafana Multi-Tier offering through the Azure Marketplace <strong>(Recommended way)</strong>.</p>
</li>
<li>
<p>Installing Grafana on managed apache cluster instance as described <a href="https://docs.microsoft.com/en-us/azure/managed-instance-apache-cassandra/visualize-prometheus-grafana">here</a></p>
</li>
<li>
<p>Installing Grafana on Kubernetes Cluster as described <a href="https://grafana.com/docs/grafana/latest/installation/kubernetes/">here</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For connecting Grafana with data source in Azure the options below exist. This also means that Grafana cannot directly connect to Azure Services. Therefore it is required to collect Azure telemetry in Azure places such as Azure Monitor/ Data Explorer:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Azure Monitor via plugin as described <a href="https://grafana.com/grafana/plugins/grafana-azure-monitor-datasource/">here</a></p>
</li>
<li>
<p>Azure Data Explorer via plugin as described <a href="https://grafana.com/grafana/plugins/grafana-azure-data-explorer-datasource/">here</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Grafana and Azure Monitor provide visualization and alerts. The following recommenations are intended to help to choose:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Service Management Tool Integration (ITSM)</strong>: Both can be integrated. See here how to integrate Grafana Events into the <a href="https://docs.servicenow.com/bundle/paris-it-operations-management/page/product/event-management/task/grafana-event-integration.html">ITSM tool ServiceNow</a>. For Azure Monitor <a href="https://azure.microsoft.com/en-us/updates/azure-monitor-itsm-connector-for-servicenow-itom-with-secure-export/">connectors</a> exist that depend on the ServiceNow version and arepartially in preview.</p>
</li>
<li>
<p>Azure Monitor telemetry is also available via other means (Portal etc.)</p>
</li>
<li>
<p><strong>Cloud agnostic</strong>: Using Grafana opens a cloud agnostic way and could also be used for other clouds</p>
</li>
<li>
<p>Including critical features in Grafana such as alert might require Grafana hosting with additional redundancy</p>
</li>
<li>
<p>Grafana can be integrated with Azure AD or LDAP as described <a href="https://community.grafana.com/t/integration-of-grafana-with-azure-active-directory/23425/2">here</a> for authentication</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Grafana is moving to the new version 8.0 which is in public preview (as of 4.11.2021). Machine learning mechanisms e.g. for <a href="https://grafana.com/blog/2021/06/08/grafanaconline-2021-your-guide-to-the-newest-announcements-from-grafana-labs/">dynamic thresholds</a> are only in place for Grafana Cloud users which is possible in Azure. A final decision depends on the priorities e.g. cloud agnostic/ drilldown vs. dynamic thresholds. The table below summarizes the features related to the previously introduced Azure dashbaord. See the options below for dashboarding/ visualization:</p>
</div>
<table class="tableblock frame-all grid-all" style="width: 99%;">
<colgroup>
<col style="width: 41%;">
<col style="width: 16%;">
<col style="width: 16%;">
<col style="width: 12%;">
<col style="width: 15%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top" colspan="3">Azure</th>
<th class="tableblock halign-left valign-top">Third party</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Workbooks</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dashboards</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Power BI</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Grafana</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Auto refresh in 5 Min Intervall</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Full screen</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tabs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://analyticoolblog.com/how-to-create-visual-tabs-in-power-bi-the-full-guide/">X</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://community.grafana.com/t/tabs-in-dashboards/17061/2">X</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fixed Parameter lists</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://www.red-gate.com/simple-talk/sql/bi/power-bi-introduction-working-with-parameters-in-power-bi-desktop-part-4/">X</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Drill down</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Additional hosting required</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Terraform Support</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Regarding components for logs/ metrics:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Metrics: Pull (Metrics explorer) or push (Kusto query targeting data source) possible</p>
</li>
<li>
<p>Logs: Push to monitoring plane only</p>
</li>
</ul>
</div>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="solutions_solutions_monitoring_azure_native_index.asciidoc_when-to-use">When to use</h4>
<div class="paragraph">
<p>This solution assumes that your application monitoring plane is in Azure and that your monitored resources are located in Azure.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="solutions_solutions_monitoring_azure_native_index.asciidoc_infrastructure-monitoring">Infrastructure Monitoring</h3>
<div class="sect3">
<h4 id="solutions_solutions_monitoring_azure_native_index.asciidoc_overview">Overview</h4>
<div class="paragraph">
<p>The solution is to use Azure Monitor with Log Analytics and the following platform regarding the monitored resources. The focus of this chapter is to introduce the available features. Recommendations for a concrete setup are given in the next chapter.</p>
</div>
<div class="paragraph">
<p>The relevant Azure monitor features are as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Data Sources/ Instrumention</strong></p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>A major source for infrastructure is the health information provided by the platform. The following health information is relevant:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Service Health Information which also includes planned downtime of the Azure platform and problems on service type level such as VMs</p>
</li>
<li>
<p>Resource Health which includes health information for service instances you created</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>On resource level resource utilization is relevant. This includes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Hitting capacity limits regarding CPU/ memory</p>
</li>
<li>
<p>Idle resources</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Availability differs per service. They are usually exposed via metrics.</p>
</div>
</div>
</div>
</li>
<li>
<p><strong>Collection/ Storage (Monitoring Plane)</strong></p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Telemetry can either be stored internally inside the monitoring plane or externally.</p>
</div>
<div class="paragraph">
<p>Telemetry can be <strong>pulled</strong> from the monitoring plane. This is limited to metrics but faster than pushing. <strong>Pushing</strong> can be necessary if the telemetry is not available in Azure monitor out of the box or pulling from the monitored resources is not possible. Pushing can be done as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Resource diagnostic</strong>: Useful to push resource specific telemtry.</p>
</li>
<li>
<p><strong>Health diagnostic</strong>: Resource Health tracks the health of your resources for specific known issues. With diagnostic settings configured on subscription level you can send that data to Log Analytics workspace. You will need to send the ResourceHealth/ Service Health categories (<a href="https://cloudadministrator.net/2021/01/13/tracking-issues-with-resource-health-and-log-analytics/">Source Health-Overall</a> <a href="https://docs.microsoft.com/en-us/azure/azure-monitor/essentials/activity-log-schema">Source Possible-Categories</a>).</p>
</li>
</ul>
</div>
</div>
</div>
</li>
<li>
<p><strong>Analysis/ Diagnosis (Monitoring Plane)</strong></p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Health relevant KPIs can be determined via Kusto as shown in the example below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>AzureActivity
// Filter only on resource health data in activity log
| where CategoryValue == 'ResourceHealth'
// dump any resource health data where the health issue was resolved. We are interested only on unhealthy data
| where ActivityStatusValue &lt;&gt; "Resolved"
// Column Properties has nested columns which we are parsing as json
| extend p = parse_json(Properties)
// Column the parsed Properties column is now a dynamic in column p
// We take the top level properties of column p and place them in their own columns that start with prefix Properties_
| evaluate bag_unpack(p, 'Properties_')
// We do the same for the newly created column Properties_eventProperties
| extend ep = parse_json(Properties_eventProperties)
| evaluate bag_unpack(ep, 'EventProperties_' )
// We list the unique values for column EventProperties_cause
| distinct EventProperties_cause</code></pre>
</div>
</div>
<div class="paragraph">
<p>Availability of resource utilization specific KPIs depends on the monitored resources.</p>
</div>
<div class="paragraph">
<p>Kusto queries across multiple application insights or log analytic workspaces are possible (See app monitoring for details).</p>
</div>
<div class="paragraph">
<p>Log Analytics comes with the following tools for <strong>exploration and root cause analysis</strong>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Table based access</strong> allows you to define different permissions per log table. This is done using custom roles where you define the tables as part of the resource type <a href="https://msandbu.org/deep-dive-azure-monitor-and-log-analytics/">as described here</a>.</p>
</li>
<li>
<p><strong>Additional management solutions</strong>: They have to be installed per werkspace. An example is the ITSM Connector used to automatically create incidents or work items when Alerts are created within Log Analytics. Such as System Center Service Manager or Service Now.</p>
</li>
<li>
<p><strong>Log analytics agent managentment</strong>: agent collects telemetry from Windows and Linux virtual machines in any cloud, on-premises machines, and those monitored by System Center Operations Manager and sends it collected data to your Log Analytics workspace in Azure Monitor. The Log Analytics agent also supports insights and other services in Azure Monitor such as VM insights, Azure Security Center, and Azure Automation <a href="https://docs.microsoft.com/en-us/azure/azure-monitor/agents/log-analytics-agent">as described here</a>.</p>
</li>
<li>
<p><strong>Service Map</strong> automatically discovers application components on Windows and Linux systems and maps the communication between services. Service Map shows connections between servers, processes, inbound and outbound connection latency, and ports across any TCP-connected architecture, with no configuration required other than the installation of an agent <a href="https://docs.microsoft.com/en-us/azure/azure-monitor/vm/service-map">as described here</a>.</p>
</li>
</ul>
</div>
</div>
</div>
</li>
<li>
<p><strong>Visualization/ Alerting (Monitoring Plane)</strong></p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>See Application monitoring features for alerts and visualization.</p>
</div>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following picture summarizes potential Azure services/ features that might be potentially relevant:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/home/runner/work/devonfw.github.io/devonfw.github.io/target/generated-docs/infra_monitoring.png" alt="Infra Monitoring" width="566px" height="285px">
</div>
</div>
</div>
<div class="sect3">
<h4 id="solutions_solutions_monitoring_azure_native_index.asciidoc_variations">Variations</h4>
<div class="paragraph">
<p>See application monitoring.</p>
</div>
</div>
<div class="sect3">
<h4 id="solutions_solutions_monitoring_azure_native_index.asciidoc_when-to-use">When to use</h4>
<div class="paragraph">
<p>This solution assumes that your infrastructure monitoring plane is in Azure and that your monitored resources are located in Azure.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="solutions_solutions_monitoring_azure_native_index.asciidoc_credits">Credits</h2>
<div class="sectionbody">
<div class="imageblock" style="text-align: right;">
<div class="content">
<a class="image" href="https://forms.office.com/Pages/ResponsePage.aspx?id=Wq6idgCfa0-V7V0z13xNYal7m2EdcFdNsyBBMUiro4NUNllHQTlPNU9QV1JRRjk3TTAwVUJCNThTRSQlQCN0PWcu"><img src="/home/runner/work/devonfw.github.io/devonfw.github.io/target/generated-docs/ms_guild_logo.png" alt="MS Guild Logo" width="160" height="75"></a>
</div>
</div>
</div>
</div>
</div>
<div id="footer" class="footer">
<div class="openblock footerLinks">
<div class="content">
<div class="dlist linklist">
<dl>
<dt class="hdlist1">About</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="/website/pages/welcome/welcome.html">About devonfw</a></p>
</li>
<li>
<p><a href="/website/pages/docs/devonfw-guide_getting-started.wiki_introduction-why-should-i-use-devonfw.asciidoc_features.html">Features</a></p>
</li>
<li>
<p><a href="/website/pages/docs/devonfw-guide_devon4j.wiki_architecture.asciidoc.html#devonfw-guide_devon4j.wiki_architecture.asciidoc_technology-stack">Technology Stack</a></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="dlist linklist">
<dl>
<dt class="hdlist1">Explore</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="/website/pages/docs/devonfw-guide_getting-started.wiki_getting-started.asciidoc.html">Getting started</a></p>
</li>
<li>
<p><a href="/website/pages/docs/devonfw-guide_devon4j.wiki_architecture.asciidoc.html">Architecture</a></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="dlist linklist">
<dl>
<dt class="hdlist1">Docs</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="/website/pages/docs/devonfw-guide_ide.wiki_devonfw-ide-introduction.asciidoc.html">User guide</a></p>
</li>
<li>
<p><a href="/website/pages/docs/devonfw-guide_general_master-release-notes.asciidoc.html">Releases information</a></p>
</li>
<li>
<p><a href="/website/pages/docs/master.html">Wiki</a></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="dlist linklist">
<dl>
<dt class="hdlist1">Community</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/orgs/devonfw/people">Contributors</a></p>
</li>
<li>
<p><a href="https://github.com/devonfw/devonfw.github.io/blob/develop/README.asciidoc">Website Contribution</a></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="ulist footerFooter">
<ul>
<li>
<p><a href="https://devonfw.com/website/pages/docs/devonfw-guide_ide.wiki_LICENSE.asciidoc.html">Terms of Use</a></p>
</li>
<li>
<p><a href="https://github.com/devonfw">Support</a></p>
</li>
</ul>
</div>
</div>
    <script>
      let bb = document.getElementById('menu-button');
      bb.addEventListener('click', function() {
        document.querySelector('.website-navbar ul').classList.toggle('visible');
        console.log(document.querySelector('.website-navbar ul'))
      })
    </script>
    <script type="module">
      import { EditLinksModule } from '/website/shared/editlinks.js';

      let alwaysVisible = true;
      if(document.location.pathname.endsWith("pages/welcome/welcome.html")) {
        alwaysVisible = false;
      }
      EditLinksModule.addEditLinks(alwaysVisible);
    </script>
    <script src="/website/assets/scripts/popper.min.js"></script>
    <script src="/website/assets/scripts/bootstrap.min.js"></script>
<div class="footnote"><sub>

Last updated 2022-06-28 12:54:24 UTC
</sub></div>
</div>
</div>
<link rel="stylesheet" type="text/css" href="https://cginternal.devonfw.com/websitesnippets/main.css">
<script async src="https://cginternal.devonfw.com/websitesnippets/main.js"></script>
<script>
  if(!document.location.pathname.endsWith("pages/welcome/welcome.html")) {
    anchors.options.visible = 'always';
  }
  anchors.add();
</script>
<script>
  var internalUrls = ["https://cginternal.devonfw.com/websitesnippets/"];
  $(".internal").each(function(){
    internalUrls.forEach((internalUrl, index) => {
      $.ajax({url: internalUrl + $(this).text() + "/index.html" })
      .then(r => {
        var leftDiv = $('<div class="info"><span class="infoText">Internal</span><img class="infoImage" src="' + internalUrl + 'logo.png"/></div>');
        var rightFirstDiv = $('<div class="message">This is only visible inside of the corporate network.</div>');
        var rightLastDiv = $('<div class="content"></div>');
        rightLastDiv.html(r);
        var rightDiv = $('<div class="right"></div>');
        rightDiv.append(rightFirstDiv);
        rightDiv.append(rightLastDiv);
        $(this).html(leftDiv);
        $(this).append(rightDiv);
        $(this).addClass("internal-active");
        $(this).removeClass("internal");
      })
    });
	});
</script>
<script>
      let cookieName = 'cookie_consent';
      let expiryTime = new Date(2037, 11, 21);
      let today = new Date();
      let cookieConsentDeclinedDate = localStorage.getItem("cookie_consent_declined");
      let dateDiffHours = 0;
      let cookieConsentHtml = `
      <div id="cookie-consent">
        <p>
          We use cookies to perform analytics and enhance user experience. Do you accept to the use of cookies?
        </p>
        <p class="cookie-consent-buttons">
          <a id="decline-cookie-btn" class="btn white-button" href="javascript:void(0)">Decline</a>
          <a id="accept-cookie-btn" class="btn blue-button" href="javascript:void(0)">Accept</a>
        </p>
      </div>
      `;
      dateDiffHours = cookieConsentDeclinedDate ? Math.abs(cookieConsentDeclinedDate - today) / 36e5 : 0;
      if (document.cookie.indexOf(cookieName) < 0) {
        if (cookieConsentDeclinedDate) {
          if (dateDiffHours > 24) {
            $("body").append(cookieConsentHtml);
          }
        } else {
          $("body").append(cookieConsentHtml);
        }
      }
      $("#accept-cookie-btn").click(function() {
        document.cookie = `${cookieName}=accept;expires=${expiryTime};path=/`;
        localStorage.removeItem("cookie_consent_declined");
        consentGranted();
        $("#cookie-consent").hide();
      });
      $("#decline-cookie-btn").click(function() {
        localStorage.setItem("cookie_consent_declined", today);
        $("#cookie-consent").hide();
      });
</script>
</body>
</html>