<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=">
<meta name="generator" content="Asciidoctor 1.5.8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- ******** SOCIAL MEDIA META ********** -->

<meta name="title" property="og:title" content="devonfw website">
<meta property="og:type" content="website">
<meta name="image" property="og:image" content="https://devonfw.com/images/devonfwwebsite.png">
<meta name="description" property="og:description" content="devonfw is the standard open source software development platform; Serving the full Software Delivery Life Cycle.">
<meta property="og:url" content="https://devonfw.com/index.html">

<meta name="twitter:title" content="devonfw website">
<meta name="twitter:description" content="devonfw is the standard open source software development platform; Serving the full Software Delivery Life Cycle.">
<meta name="twitter:image" content="https://devonfw.com/images/devonfwwebsite.png">
<meta name="twitter:card" content="summary_large_image">

<!-- ************************************* -->


<title>Authentication</title>
<!-- devonfw website stylesheet -->
<link rel="stylesheet" type="text/css" href="/devonfw.css">
<!-- Lunr -->
<script src="/website/assets/scripts/lunr.min.js"></script>
<!-- JQuery -->
<script src="/website/assets/scripts/jquery.min.js"></script>
<link rel="stylesheet" href="/website/assets/styles/font-awesome.min.css">
<link rel="stylesheet" href="/website/assets/styles/googlecode.min.css">
<script src="/website/assets/scripts/highlight.min.js"></script>
<script src="/website/assets/scripts/common.min.js"></script>
<script>hljs.initHighlightingOnLoad()</script>
<link rel="stylesheet" href="/website/assets/styles/bootstrap.min.css">

<script src="/website/assets/scripts/anchor.min.js"></script>

<script src="/website/components/header/search-engine/bundle.js"></script>

<script src="/website/shared/rightmenu.js"></script>

<!-- ************** Google analytics ************ -->
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}

gtag('consent', 'default', {
  'analytics_storage': 'denied'
});
</script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-151636804-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-151636804-1');
</script>
<script>
  function consentGranted() {
    gtag('consent', 'update', {
      'analytics_storage': 'granted'
    });
  }
</script>

<!-- ******************************************** -->


</head>
<body id="index.asciidoc" class="article">
<div id="website-navbar" class="website-navbar">
<button id="menu-button" class="menu-button">
  <img src="/images/menu-button.svg" width="32px" height="32px" alt="">
</button>

<ul>
<li>
<p><span class="image"><a class="image" href="/website/pages/welcome/welcome.html"><img alt="logo" src="/images/Logo_devonfw.svg"></a></span></p>
</li>
<li>
<p><a href="https://devonfw.com/website/pages/learning/">Tutorials</a></p>
</li>
<li>
<p><a href="/website/pages/solutions/index.html">Solutions</a></p>
</li>
<li>
<p><a href="/website/pages/docs/master.html">Docs</a></p>
</li>
</ul>

<form class="form-inline">
  <div class="search-bar">
    <input id="search-field" type="search" class="form-control mr-sm-2" placeholder="Search by keyword(s)..." aria-label="Search" style="height: auto;" autocomplete="off">
    <div class="sb-res-pos px-4">
      <div id="click-outside" class="click-outside z-50 hidden"></div>
      <div class="col rounded px-0 border z-100 bg-white hidden search-bar-results" id="search-results-box">
      </div>
    </div>
  </div>
</form>
<a class="navbar-github text-white" href="https://github.com/devonfw/">
  <img src="/images/github-mark.png" width="auto" height="auto" alt="">
</a></div>
<div id="sidebar" class="wiki-sidebar"></div>

<div id="content" class="mt-4 mt-sm-5">
<div class="sect1">
<h2 id="index.asciidoc_authentication">Authentication</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Access control is an important aspect for the security in IT application landscapes. There are two different aspects to distinguish:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Authentication (Who tries to access?)</p>
</li>
<li>
<p>Authorization (Is the one accessing allowed to do what he wants to do?)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This part deals with the recommendations on authentication.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="index.asciidoc_you-have-the-following-problem-to-be-solved">You have the following problem to be solved</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In large IT landscapes it is a highly recommended best-practice to centralize your authentication. Implemeting the actual authentication into every application or service is therefore considered as an anti-pattern. Instead we suggest to use a central identity and access management (IAM) solution based on established products (e.g. <a href="https://www.keycloak.org/">Keycloak</a>).</p>
</div>
<div class="sect2">
<h3 id="index.asciidoc_using-a-central-iam">Using a central IAM</h3>
<div class="paragraph">
<p>When using a central IAM, the user is redirected to the identity provider (IdP) when trying to access the application. The IdP returns a login page where the user can log in. After confirming that the user can access the application, the IdP returns an access token that the user can use to access the application. We recommend the use <a href="https://jwt.io/">JSON Web Tokens</a> (JWT) within the authentication flow, as this is a widely used method in modern web applications and RESTful services.</p>
</div>
<div class="paragraph">
<p>Participants integrate with the identity provider using protocols such as <a href="https://openid.net/connect/">OpenId Connect</a>, <a href="https://docs.oasis-open.org/security/saml/Post2.0/sstc-saml-tech-overview-2.0.html">SAMLv2</a> or <a href="https://webauthn.io/">WebAuthn</a>. The original incoming request is forwarded to the actual service and the token is added as a bearer token via HTTP header according to <a href="https://oauth.net/">OAuth</a> standard. In the application, the token can be validated according to the user’s roles and groups.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="authentication_flow.png" alt="Abstract authentication flow">
</div>
</div>
<div class="paragraph">
<p>Typically, a gateway is placed in front of the IdP and applications to act as a reverse proxy for the actual service. Incoming traffic goes through the gateway and the gateway is then responsible for authentication through integration with the identity provider. In this way, multiple applications and services can be deployed without implementing integration between the service itself and the IdP. The access token can be validated only on the gateway side or additionally passed to the application for further validation.</p>
</div>
<div class="paragraph">
<p>Services are implemented stateless and only accept requests with valid JWT from gateway. When one of your services invokes another service it simply passes on the JWT via HTTP header. This way all sub-sequent invocations happen within the context and with the permissions of the initial user.</p>
</div>
<div class="paragraph">
<p>The gateway should also act as a portal that integrates the UIs of your microservices so that end users do not notice which UI comes from which service, but have the user experience (UX) of a single monolithic UI.</p>
</div>
</div>
<div class="sect2">
<h3 id="index.asciidoc_which-protocol-to-use">Which protocol to use</h3>
<div class="paragraph">
<p>We suggest using OIDC as the protocol for integration with the identity provider. It is easy to integrate and works well with mobile and web-based applications. OIDC uses JSON tokens and RESTful APIs to provide the authentication information. Therefore, it is a much more lightweight solution than SAML, which uses an XML and SOAP-based approach.</p>
</div>
</div>
<div class="sect2">
<h3 id="index.asciidoc_values-for-the-customer">Values for the customer</h3>
<div class="ulist">
<ul>
<li>
<p>all services are independent and decoupled from the actual authentication and IAM</p>
</li>
<li>
<p>authentication can be changed without touching any of your services, only changes need to be made to your gateway(s)</p>
</li>
<li>
<p>in large and complex IT landscapes, there may be different requirements for authentication via different channels (e.g. to authenticate internal users via SPNEGO and external users via WebAuthn). In such a case, you can simply set up several variants of your gateway for each channel with different endpoint URLs.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="index.asciidoc_conventions">Conventions</h3>
<div class="paragraph">
<p>We recommend the following conventions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>define a short but meaningful unique alphanumeric identifier for each of your services (<code>app-id</code>)</p>
</li>
<li>
<p>establish a clear URL scheme for accessing your apps, e.g. <code><a href="https://gateway.company.com/«app-id»/" class="bare">https://gateway.company.com/«app-id»/</a></code></p>
</li>
<li>
<p>use a cloud infrastructure platform that allows to manage an overlay network so you can configure loadbalancers or even a <a href="https://platform9.com/blog/kubernetes-service-mesh-a-comparison-of-istio-linkerd-and-consul/">service-mesh</a> mapping your service entry points to a consistent URL schema such as <code><a href="https://«app-id»:8443/«app-id»/" class="bare">https://«app-id»:8443/«app-id»/</a></code></p>
</li>
<li>
<p>this way you do not need any configuration or business knowledge inside your gateway as the routing can be implemented fully generic</p>
</li>
<li>
<p>use <code>app-id.</code> as a prefix to all permission groups/roles specific to your service to avoid name clashing in your central IAM</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="index.asciidoc_implementation-hints">Implementation hints</h3>
<div class="ulist">
<ul>
<li>
<p>A Helm chart for the deployment of Keycloak in your Kubernetes environment can be found in the <a href="https://github.com/devonfw/solutions/blob/master/solutions/security_authentication/helm">GitHub repository of the devonfw solutions browser</a></p>
</li>
<li>
<p>The <a href="https://github.com/devonfw-sample/devon4quarkus-reference/tree/master/documentation">devon4quarkus-product reference application</a> provides a documentation on how to integrate Keycloak into your Quarkus application to implement security mechanisms</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="index.asciidoc_related-documentations">Related documentations</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/devonfw/devon4j/blob/master/documentation/guide-access-control.asciidoc#authentication">devon4j authentication guide</a></p>
</li>
<li>
<p><a href="https://github.com/devonfw/devon4j/blob/master/documentation/guide-jwt.asciidoc">devon4j JWT guide</a></p>
</li>
<li>
<p><a href="https://oauth.net/2/">OAuth 2.0</a></p>
</li>
<li>
<p><a href="https://openid.net/connect/">OpenID Connect</a></p>
</li>
<li>
<p><a href="https://www.keycloak.org/docs/latest/securing_apps/">Keycloak’s securing apps guide</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="index.asciidoc_iam-solutions">IAM solutions</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://www.keycloak.org/">Keycloak</a></p>
</li>
<li>
<p><a href="https://is.docs.wso2.com/en/latest/">WSO2</a></p>
</li>
<li>
<p><a href="https://gluu.org/">Gluu Server</a></p>
</li>
<li>
<p><a href="https://backstage.forgerock.com/docs/">ForgeRock</a></p>
</li>
<li>
<p>…​</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div id="footer" class="footer">
<div class="openblock footerLinks">
<div class="content">
<div class="dlist linklist">
<dl>
<dt class="hdlist1">About</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="/website/pages/welcome/welcome.html">About devonfw</a></p>
</li>
<li>
<p><a href="/website/pages/docs/devonfw-guide_getting-started.wiki_introduction-why-should-i-use-devonfw.asciidoc_features.html">Features</a></p>
</li>
<li>
<p><a href="/website/pages/docs/devonfw-guide_devon4j.wiki_architecture.asciidoc.html#devonfw-guide_devon4j.wiki_architecture.asciidoc_technology-stack">Technology Stack</a></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="dlist linklist">
<dl>
<dt class="hdlist1">Explore</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="/website/pages/docs/devonfw-guide_getting-started.wiki_getting-started.asciidoc.html">Getting started</a></p>
</li>
<li>
<p><a href="/website/pages/docs/devonfw-guide_devon4j.wiki_architecture.asciidoc.html">Architecture</a></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="dlist linklist">
<dl>
<dt class="hdlist1">Docs</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="/website/pages/docs/devonfw-guide_ide.wiki_devonfw-ide-introduction.asciidoc.html">User guide</a></p>
</li>
<li>
<p><a href="/website/pages/docs/devonfw-guide_general_master-release-notes.asciidoc.html">Releases information</a></p>
</li>
<li>
<p><a href="/website/pages/docs/master.html">Wiki</a></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="dlist linklist">
<dl>
<dt class="hdlist1">Community</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/orgs/devonfw/people">Contributors</a></p>
</li>
<li>
<p><a href="https://github.com/devonfw/devonfw.github.io/blob/develop/README.asciidoc">Website Contribution</a></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="ulist footerFooter">
<ul>
<li>
<p><a href="https://devonfw.com/website/pages/docs/devonfw-guide_ide.wiki_LICENSE.asciidoc.html">Terms of Use</a></p>
</li>
<li>
<p><a href="https://github.com/devonfw">Support</a></p>
</li>
</ul>
</div>
</div>
    <script>
      let bb = document.getElementById('menu-button');
      bb.addEventListener('click', function() {
        document.querySelector('.website-navbar ul').classList.toggle('visible');
        console.log(document.querySelector('.website-navbar ul'))
      })
    </script>
    <script type="module">
      import { EditLinksModule } from '/website/shared/editlinks.js';

      let alwaysVisible = true;
      if(document.location.pathname.endsWith("pages/welcome/welcome.html")) {
        alwaysVisible = false;
      }
      EditLinksModule.addEditLinks(alwaysVisible);
    </script>
    <script src="/website/assets/scripts/popper.min.js"></script>
    <script src="/website/assets/scripts/bootstrap.min.js"></script>
<div class="footnote"><sub>

Last updated 2022-10-07 15:05:23 UTC
</sub></div>


<link rel="stylesheet" type="text/css" href="https://cginternal.devonfw.com/websitesnippets/main.css">
<script async="" src="https://cginternal.devonfw.com/websitesnippets/main.js"></script>
<script>
  if(!document.location.pathname.endsWith("pages/welcome/welcome.html")) {
    anchors.options.visible = 'always';
  }
  anchors.add();
</script>
<script>
  var internalUrls = ["https://cginternal.devonfw.com/websitesnippets/"];
  $(".internal").each(function(){
    internalUrls.forEach((internalUrl, index) => {
      $.ajax({url: internalUrl + $(this).text() + "/index.html" })
      .then(r => {
        var leftDiv = $('<div class="info"><span class="infoText">Internal</span><img class="infoImage" src="' + internalUrl + 'logo.png"/></div>');
        var rightFirstDiv = $('<div class="message">This is only visible inside of the corporate network.</div>');
        var rightLastDiv = $('<div class="content"></div>');
        rightLastDiv.html(r);
        var rightDiv = $('<div class="right"></div>');
        rightDiv.append(rightFirstDiv);
        rightDiv.append(rightLastDiv);
        $(this).html(leftDiv);
        $(this).append(rightDiv);
        $(this).addClass("internal-active");
        $(this).removeClass("internal");
      })
    });
	});
</script>
<script>
      let cookieName = 'cookie_consent';
      let expiryTime = new Date(2037, 11, 21);
      let today = new Date();
      let cookieConsentDeclinedDate = localStorage.getItem("cookie_consent_declined");
      let dateDiffHours = 0;
      let cookieConsentHtml = `
      <div id="cookie-consent">
        <p>
          We use cookies to perform analytics and enhance user experience. Do you accept to the use of cookies?
        </p>
        <p class="cookie-consent-buttons">
          <a id="decline-cookie-btn" class="btn white-button" href="javascript:void(0)">Decline</a>
          <a id="accept-cookie-btn" class="btn blue-button" href="javascript:void(0)">Accept</a>
        </p>
      </div>
      `;
      
      const parseCookie = str =>
        str
        .split(';')
        .map(v => v.split('='))
        .reduce((acc, v) => {
          acc[decodeURIComponent(v[0].trim())] = decodeURIComponent(v[1].trim());
          return acc;
        }, {});
      
      dateDiffHours = cookieConsentDeclinedDate ? Math.abs(cookieConsentDeclinedDate - today) / 36e5 : 0;
      if (document.cookie.indexOf(cookieName) < 0) {
        if (cookieConsentDeclinedDate) {
          if (dateDiffHours > 24) {
            $("body").append(cookieConsentHtml);
          }
        } else {
          $("body").append(cookieConsentHtml);
        }
      } else {
        cookies = parseCookie(document.cookie);
        if (cookies["cookie_consent"] == "accept") {
          consentGranted();
        }
      }
      
      $("#accept-cookie-btn").click(function() {
        document.cookie = `${cookieName}=accept;expires=${expiryTime};path=/`;
        localStorage.removeItem("cookie_consent_declined");
        consentGranted();
        $("#cookie-consent").hide();
      });
      $("#decline-cookie-btn").click(function() {
        localStorage.setItem("cookie_consent_declined", today);
        $("#cookie-consent").hide();
      });
</script>

</body></html>