{"type":"doc","filename":"devonfw-guide_ide.wiki_cli.asciidoc.html","anchor":"devonfw-guide_ide.wiki_docker.asciidoc","title":"Docker","breadcrumbs":["devonfw-ide","Usage","Devon CLI"],"text":"Docker\n\nThe Docker commandlet allows to install and use Docker.\nOn Windows WSL 2(Windows Subsystem for Linux) has to be installed properly as a prerequisite. In case of using Rancher Desktop the process of enabling WSL and installing a WSL distribution will be handled by Rancher Desktop.\nThis commandlet also offers the installation of Rancher Desktop, which works on Windows, Mac and Linux.\nTo run the tools installed and managed by Rancher Desktop it is necessary to have Rancher Desktop up and running.\nTo assure that you are able to use these tools directly after startup, you can add Rancher Desktop to the startup programs\nof your Operating System. Such instructions will be given below inside the sections for Windows, Mac and Linux.\n\n\nATTENTION:\nCurrently this feature is new and therefore experimental.\nIt may change in incompatible ways in the next releases until we reach a stable state.\nWe hope that all is working fine for you.\nHowever, do not expect everything to work out of the box.\nIn case you are facing issues (e.g. network problems with Cisco AnyConnect, etc.) please give us feedback so we can improve.\n\n\nThe arguments (devon docker «args») are explained by the following table:\n\n\nTable 5. Usage of devon docker\n\n\n\n\n\n\nArgument(s)\nMeaning\n\n\n\n\nsetup\nsetup Docker (install and verify) as per above flow.\n\n\n«args»\ncall docker with the specified arguments. Call docker help for details or use docker directly as preferred.\" («args»)\n\n\n\n\nSetup\n\nThe Docker commandlet will install Docker Desktop or Rancher Desktop automatically.\nThis depends on how the variable DOCKER_EDITION was set. We chose to set Rancher Desktop as standard\nfor our installation, due to it being license free compared to Docker Desktop while offering a similar tool set. Please read the document docker-desktop-alternative motivating why we added Rancher Desktop to the docker commandlet or read the section 'Docker Desktop' if you want to use Docker Desktop instead.\n\n\nDocker Desktop\n\nDocker Desktop can still be used by setting the variable DOCKER_EDITION equal to \"DOCKERDESKTOP\".\nThis can be done by your projects ide-admin in the settings file. If you want to switch from Rancher Desktop to Docker Desktop, then add a line with the following content\n\"DOCKER_EDITION=DOCKERDESKTOP\"\n(without the quotes around the allocation) to the file devon.properties located at the path ${DEVON_IDE_HOME}/conf/devon.properties.\n\n\n\nRancher Desktop\n\nThe installation of Rancher Desktop will be handled with the help of a graphical user interface. After starting the installation process from your shell you may see a small progress window for a few seconds before the installer starts.\n\n\n\n\n\n\n\nAfter that you may need to wait for around half a minute until the installer of Rancher Desktop pops up. Then, when you accepted the Licence Agreement\n\n\n\n\n\n\n\nthe installation process starts, which will look like this:\n\n\n\n\n\n\n\nAfter successfull installation please start Rancher Desktop and go to the menu point \"Kubernetes Settings\". Under \"Container Runtime\" choose dockerd(moby) to enable the docker-cli.\n\n\n\n\n\n\n\nIf you use Windows, then make sure to go to the Settings named \"WSL Integration\".\nThere you can choose the WSL Shells you want Rancher Desktop to work on.\n\n\n\n\n\n\n\nBesides that the tools like docker or kubectl should\ndirectly work with CMD or Powershell.\n\n\nPlease note that besides the sandbox concept of devonfw-ide this is a global installation on your system.\nWhen uninstalling devonfw-ide, you may have to manually uninstall Docker and Kubernetes, or Rancher Desktop if you do not need it anymore. At least uninstalling Rancher Desktop should leave way less remains if you did not install one of the related software  Rancher Desktop offers separately.\n\n\nIf you are connected to a VPN you may run into problems while trying to start Rancher Desktop on Windows. E.g. Rancher Desktop will load for a long time as indicated by the progress bar on the lower left side of the Rancher Desktop GUI.\n\n\n\n\n\n\n\nTo fix this common issue related to WSL2, we included this wsl-vpnkit to the installation of Rancher Desktop. If you still run into problems, then please disconnect from your VPN, start Rancher Desktop and wait untill the progress bar disappears\n\n\n\n\n\n\n\nor, when using Windows, untill you see a small blue Rancher Desktop icon in your Notification Area (in the following picture it is on the right bottom of the screen next to the taskbar).\n\n\n\n\n\n\n\n\nrequirements\n\nRunning Docker and especially Kubernetes on your machine in the background will require quite some resources.\nThis will allocate at least 2GB of additional RAM.\n\n\nYou will need at least 8GB of total RAM while we recommend to use 16GB+.\n\n\nYou may also tune and scale it to your needs.\nWhen using Docker Desktop (Windows or MacOS) simply go to the resources tab in the settings.\nIt will depend on your usage frequency if you want to have it running in the background all the time.\nThis is a balance between resource utilization and convenience.\nIf you use Docker and Kubernetes on your local machine on a daily basis this makes sense.\n\n\nIn case you only use Docker rarely, you can save resources by stopping it when not needed after it has been installed.\n\n\n\nWindows and macOS\n\nFor Windows 10 you can use the following Instructions on how to set startup programs for Windows 10, so that Rancher Desktop starts with your OS.\n\n\nTo enable or disable autostart, you can launch Docker Desktop on Windows or MacOS go to the Preferences (gear icon in the title bar). Then in the General tab you can check or uncheck the option Start Docker Desktop when you login (see also here). When autostart is disabled and you launch Docker Desktop it will notice and ask you to start the service or do this automatically for you.\nOn Windows you can also manually tweak this:\n\n\n\n\nHit [windows][r]\n\n\nEnter services.msc\n\n\nConfirm with OK\n\n\nIn the services app search for the Docker Desktop Service in the list and select it.\n\n\nNow you can start or stop the service by clicking on the according link text.\n\n\nAlso when right clicking on Docker Desktop Service and selecting Options from the context-menu, you can change the start type to automatic or manual.\n\n\n\n\nMac A1\n\nHave a look at the Instructions on how to set startup programs for MacOS to make Rancher Desktop run directly after starting up your OS.\n\n\nIn case you have a new Mac with A1 CPU, we automatically download and install the according ARM version of Docker Desktop or Rancher Desktop for macOS.\nHowever, if you use Docker and search for images you may end up with errors like:\n\n\n\n\n\n\n\nSo with A1 CPU you may need to add --platform linux/x86_64 as option to your Docker command to find the expected container image.\n\n\n\n\nLinux\n\nDocker Desktop isn’t available for Linux, but Rancher Desktop can be used as compareable alternative as mentioned before.\n\n\nTo make the usage of Rancher Desktop more comfortable and reliable let your operating system run it after starting up your system.\nOn many Linux distributions you can just go to your menu (usually by clicking the icon at your screens left bottom), type \"startup\" and start your systems GUI-startup manager, if popping up. At the following website you can find some examples or other options on how to set startup programs for some Linux distributions.\n\n\n\n\nusage\n\nOnce installed via setup, you can run Docker from any shell of your OS directly. If you use Rancher Desktop just\nmake sure that Rancher Desktop runs in the background.\nRun docker help to get started and use the online documentations and resources on the web to get familiar with Docker.\nIt is not our intention to repeat this here.\n\n\nPlease note that the docker commandlet is a command wrapper.\n\n\n\n\nIntroduction\n\nAs Docker Desktop has changed its licensing we have been looking for a license-free alternative.\nThis document gives a rationale why we have choosen Rancher Desktop as alternative to setup and manage docker and kubernetes.\n\n\n\nWhy we chose Rancher Desktop as Docker-Desktop alternative\n\nOur main criteria for tool comparision were:\n\n\n\n\nThe softwares licence\n\n\nMatch of toolset compared to Docker Desktop\n\n\nComplexity of installing and setting up the toolset\n\n\nStability of the solution\n\n\nFuture-proofness (community activitiy, regular updates and fixes)\n\n\n\n\n\n\n\n\n\n\n\n\n\nRancher Desktop\nPodman-Minikube\nOthers\n\n\n\n\nPro\n- It comes very close to what Docker-Desktop offers, as it installs most of Docker-Desktop’s cli-tools  → Almost frictionless shift\n- Installs and sets up a good toolset including typical docker compnents as well as kubernetes\n- Makes installation and setup very easy\n- Cloud tools like Helm or Terraform are usable\n- Works on macOS, Windows and Linux\n- Comes with a GUI\n- Easy shift between Kubernetes versions via GUI\n- Works with VPN when using wsl-vpnkit\n- Licence free\n- Works deamon less, also OCI-Containers (like Docker)\n- Root less Containers, giving security improvements over Docker\n- Not that hard to install and setup\n- Kubernetes usable locally\n- Licence free\nInteresting components:\n- e.g. Lazydocker gives a pretty and compact graphical component\n- e.g. MicroK8s as a lightweight, fast version of Kubernetes\n\n\nContra\n-does not have all features Docker Desktop has, like image security scans\n- Has most usual Docker-commands, but not all of them\n- For ongoing Docker-projects might not be worth it, because of some differences to Docker → Porblems during software migration\n- GUI less\n- More work when it comes to implementation\n- minikube only gives us one cluster\n- Does not have all features Docker Desktop has, like image security scans\n- In some cases not available for all OS\n- Software often just one component of what we need (like Kind for running Clusters using Docker; Buildah for building Containers…​), therefore need to mix tools\n- Especially for a manual mix of tools severe implementation/maintenance increase possible\n- More error-prone, particularly when using a rather uncommon mix of tools\n- Unclear future of some projects\n- Some options were bleeding edge\n\n\n\n\n\n\n\n"}