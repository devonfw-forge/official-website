{"type":"doc","filename":"devonfw-guide_hangar.wiki_hangar.asciidoc_github-actions-deploying-on-aws-eks-or-azure-aks.html","anchor":"asciidoc_devonfw-guide_hangar.wiki_hangar.asciidoc_setup-aws-account_5","title":"Setup AWS account","breadcrumbs":["CI/CD","devonfw Hangar","GitHub Actions deploying on AWS EKS or Azure AKS"],"text":"Setup AWS account\n\n\nSetup AWS account IAM for deployment in EKS\n\nThe scope of this section is to prepare an AWS account to be ready for deploying in AWS EKS. By the end of this guide, a new IAM user belonging to a group with the required permissions will be created.\n\n\nPreparing environment\n\nFirst of all, install AWS CLI and Python for your OS.\n\n\n\nPrerequisites\n\n\n\nAn AWS account with IAM full access permission.\n\n\n\n\nAlternative\n\nIn case you do not have an account or permission to create new IAM users, request it to your AWS administrator asking for the following policies being attached. Then go to [check-iam-user-permissions].\n\n\nRequired managed policies\n\n\n\n\n\n\n\nRequired custom policies\n\nFind them on /scripts/accounts/aws/eks-custom-policies.json.\n\n\n\n\n\nCreating IAM user using provided script\n\nThe script located at /scripts/accounts/aws/create-user.sh will automatically create a user, also enrolling it in a newly created group with the required policies attached.\n\n\nIn case you do not have an AWS access key (needed to authenticate through API), follow this guide to create it.\n\n\nUsage\n\n\n\n\n\n\n\nFlags\n\n\n\n\n\n\n\nExample\n\n\n\n\n\n\n\n\n\n\n\n\nIf the \"DevOps\" group does not exist, it will be created.\n\n\n\n\n\n\n\n\n\n\n\nRequired policies for using EKS are located at /scripts/accounts/aws/eks-managed-policies.txt and /scripts/accounts/aws/eks-custom-policies.json\n\n\n\n\n\n\nAfter execution\n\nOn success, the newly created user access data will be shown as output:\n\n\n\n\n\n\n\n\n\n\n\n\n\nIt is mandatory to store the access key ID and the secret access key securely at this point, as they will not be retrievable again.\n\n\n\n\n\n\n\nCheck IAM user permissions\n\nThe script located at /scripts/accounts/aws/verify-account-policies.sh will check that the necessary policies were attached to the IAM user.\n\n\nUsage\n\n\n\n\n\n\n\nFlags\n\n\n\n\n\n\n\n\n\n\n\n\nAt least one policies flag (-p, -f or -c) is required.\n\n\n\n\n\n\nExample\n\n\n\n\n\n\nAfter execution, provided policies will be shown preceded by an OK or FAILED depending on the attachment status.\n\n\n\n\n\n\n\n\nRequired policies for using EKS are located at /scripts/accounts/aws/eks-managed-policies.txt and /scripts/accounts/aws/eks-custom-policies.json\n\n\n\n\n\n]]\n== Configure AWS CLI \nOnce you have been provided with an IAM user with the required policies attached, setup the AWS CLI using the following command:\n\n\n\n\n\n\n\nFill the prompted fields with your data:\n\n\n\n\n\n\n\nNow you have AWS CLI ready to use.\n\n\n\n\n\n\n\n"}