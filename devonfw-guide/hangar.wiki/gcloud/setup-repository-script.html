<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=">
<meta name="generator" content="Asciidoctor 1.5.8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- ******** SOCIAL MEDIA META ********** -->

<meta name="title" property="og:title" content="devonfw website">
<meta property="og:type" content="website">
<meta name="image" property="og:image" content="https://devonfw.com/images/devonfwwebsite.png">
<meta name="description" property="og:description" content="devonfw is the standard open source software development platform; Serving the full Software Delivery Life Cycle.">
<meta property="og:url" content="https://devonfw.com/index.html">

<meta name="twitter:title" content="devonfw website">
<meta name="twitter:description" content="devonfw is the standard open source software development platform; Serving the full Software Delivery Life Cycle.">
<meta name="twitter:image" content="https://devonfw.com/images/devonfwwebsite.png">
<meta name="twitter:card" content="summary_large_image">

<!-- ************************************* -->


<title>Setting up a repository on Google Cloud</title>
<!-- devonfw website stylesheet -->
<link rel="stylesheet" type="text/css" href="/devonfw.css">
<!-- Lunr -->
<script src="/website/assets/scripts/lunr.min.js"></script>
<!-- JQuery -->
<script src="/website/assets/scripts/jquery.min.js"></script>
<link rel="stylesheet" href="/website/assets/styles/font-awesome.min.css">
<link rel="stylesheet" href="/website/assets/styles/googlecode.min.css">
<script src="/website/assets/scripts/highlight.min.js"></script>
<script src="/website/assets/scripts/common.min.js"></script>
<script>hljs.initHighlightingOnLoad()</script>
<link rel="stylesheet" href="/website/assets/styles/bootstrap.min.css">

<script src="/website/assets/scripts/anchor.min.js"></script>

<script src="/website/components/header/search-engine/bundle.js"></script>

<script src="/website/shared/rightmenu.js"></script>

<!-- ************** Google analytics ************ -->
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}

gtag('consent', 'default', {
  'analytics_storage': 'denied'
});
</script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-151636804-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-151636804-1');
</script>
<script>
  function consentGranted() {
    gtag('consent', 'update', {
      'analytics_storage': 'granted'
    });
  }
</script>

<!-- ******************************************** -->


</head>
<body id="devonfw-guide_hangar.wiki_gcloud_setup-repository-script.asciidoc" class="article">
<div id="website-navbar" class="website-navbar">
<button id="menu-button" class="menu-button">
  <img src="/images/menu-button.svg" width="32px" height="32px" alt=""/>
</button>

<ul>
<li>
<p><span class="image"><a class="image" href="https://devonfw.com/"><img alt="logo" src="/images/Logo_devonfw.svg"></a></span></p>
</li>
<li>
<p><a href="https://devonfw.com/website/pages/learning/">Tutorials</a></p>
</li>
<li>
<p><a href="/website/pages/solutions/index.html">Solutions</a></p>
</li>
<li>
<p><a href="/website/pages/docs/master.html">Docs</a></p>
</li>
</ul>

<form class="form-inline">
  <div class="search-bar">
    <input
      id="search-field"
      type="search"
      class="form-control mr-sm-2"
      placeholder="Search by keyword(s)..."
      aria-label="Search"
      style="height: auto;"
      autocomplete="off"/>
    <div class="sb-res-pos px-4">
      <div id="click-outside" class="click-outside z-50 hidden"></div>
      <div class="col rounded px-0 border z-100 bg-white hidden search-bar-results" id="search-results-box">
      </div>
    </div>
  </div>
</form>
<a class="navbar-github text-white" href="https://github.com/devonfw/">
  <img src="/images/github-mark.png" width=auto height=auto alt="">
</a></div>
<div id="sidebar" class="wiki-sidebar"></div>

<div id="content" class="mt-4 mt-sm-5">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>By the end of this guide, a repository on Google Cloud will be created in an automated way using a script.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="devonfw-guide_hangar.wiki_gcloud_setup-repository-script.asciidoc_prerequisites">Prerequisites</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Have a Google Cloud project already setup with billing and Cloud Source Repositories API enabled and GCloud CLI installed and configured. If it is not the case, please go back to corresponding guide.</p>
</li>
<li>
<p>Install <a href="https://git-scm.com/book/en/v2/Getting-Started-Installing-Git">Git</a>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="devonfw-guide_hangar.wiki_gcloud_setup-repository-script.asciidoc_creating-repository-using-provided-script">Creating repository using provided script</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The script located at <code>/scripts/repositories/gcloud/create-repo.sh</code> allows you to either:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create an empty repository with just a README file and clone it to your computer into the directory you set. Useful when starting a project from scratch.</p>
</li>
<li>
<p>Import an already existing directory or Git repository into your project giving a path or an URL. Useful for taking to Google Cloud the development of an existing project.</p>
</li>
</ol>
</div>
<div class="sect2">
<h3 id="devonfw-guide_hangar.wiki_gcloud_setup-repository-script.asciidoc_usage">Usage</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>create-repo.sh \
    -a &lt;action&gt; \
    -d &lt;local directory&gt; \
    -p &lt;project id&gt; \
    [-n &lt;repository name&gt;] \
    [-g &lt;giturl&gt;] \
    [-b &lt;branch&gt;] \
    [-r] \
    [-s &lt;branch strategy&gt;] \
    [-f] \
    [--subpath &lt;subpath to import&gt;] \</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="devonfw-guide_hangar.wiki_gcloud_setup-repository-script.asciidoc_flags">Flags</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>-a, --action                [Required] Use case to fulfil: create, import.
-d, --directory             [Required] Path to the directory where your repository will be cloned or initialized.
-p, --project               [Required] Short name (ID) of the Google Cloud project.
-n, --name                             Name for the Google Cloud repository. By default, the source repository or directory name (either new or existing, depending on use case) is used.
-g, --source-git-url                   Source URL of the Git repository to import.
-b, --source-branch                    Source branch to be used as a basis to initialize the repository on import, as master branch.
-r, --remove-other-branches            Removes branches other than the (possibly new) default one.
-s, --setup-branch-strategy            Creates branches and policies required for the desired workflow. Requires -b on import. Accepted values: gitflow.
-f, --force                            Skips any user confirmation.
    --subpath                          When combined with -g and -r, imports only the specified subpath of the source Git repository.</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="devonfw-guide_hangar.wiki_gcloud_setup-repository-script.asciidoc_typical-use-cases">Typical use cases</h3>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="icon-tip" title=""></i>
</td>
<td class="content">
This is non-exhaustive list. Make your own combination of flags if all of the following use cases does not fit your needs.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="devonfw-guide_hangar.wiki_gcloud_setup-repository-script.asciidoc_creating-an-empty-repository">Creating an empty repository</h4>
<div class="literalblock">
<div class="content">
<pre>./create-repo.sh -a create -p &lt;project&gt; -n &lt;repository name> -d &lt;local destination directory></pre>
</div>
</div>
<div class="paragraph">
<p>In case repository name is not specified, destination directory name will be used.</p>
</div>
</div>
<div class="sect3">
<h4 id="devonfw-guide_hangar.wiki_gcloud_setup-repository-script.asciidoc_creating-an-empty-repository-with-gitflow-branching-strategy">Creating an empty repository with Gitflow branching strategy</h4>
<div class="literalblock">
<div class="content">
<pre>./create-repo.sh -a create -p &lt;project&gt; -n &lt;repository name> -d &lt;local destination directory> -s gitflow</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="devonfw-guide_hangar.wiki_gcloud_setup-repository-script.asciidoc_importing-a-remote-git-repository">Importing a remote Git repository</h4>
<div class="literalblock">
<div class="content">
<pre>./create-repo.sh -a import -g &lt;source git url> -p &lt;project&gt; -n &lt;repository name> -d &lt;local destination directory></pre>
</div>
</div>
<div class="paragraph">
<p>In case repository name is not specified, source repository name (in URL) will be used.</p>
</div>
</div>
<div class="sect3">
<h4 id="devonfw-guide_hangar.wiki_gcloud_setup-repository-script.asciidoc_importing-a-specific-remote-git-repository-branch-as-source-for-a-new-repository-with-gitflow-branching-strategy">Importing a specific remote Git repository branch as source for a new repository with Gitflow branching strategy</h4>
<div class="literalblock">
<div class="content">
<pre>./create-repo.sh -a import -p &lt;project&gt; -g &lt;source git url> -b &lt;source branch> -s gitflow -r -n &lt;repository name> -d &lt;local destination directory></pre>
</div>
</div>
<div class="paragraph">
<p>This will create <code>master</code> (and <code>develop</code> since a branching strategy is specified) from the <code>&lt;source branch&gt;</code>, removing any other branch (including <code>&lt;source branch&gt;</code>).</p>
</div>
</div>
<div class="sect3">
<h4 id="devonfw-guide_hangar.wiki_gcloud_setup-repository-script.asciidoc_importing-local-directory-or-git-repository">Importing local directory or Git repository</h4>
<div class="literalblock">
<div class="content">
<pre>./create-repo.sh -a import -p &lt;project&gt; -d &lt;local source directory> -n &lt;repository name></pre>
</div>
</div>
<div class="paragraph">
<p>In case repository name is not specified, source directory name will be used.</p>
</div>
</div>
<div class="sect3">
<h4 id="devonfw-guide_hangar.wiki_gcloud_setup-repository-script.asciidoc_importing-a-specific-local-git-repository-branch-as-source-for-a-new-repository-with-gitflow-branching-strategy">Importing a specific local Git repository branch as source for a new repository with Gitflow branching strategy</h4>
<div class="literalblock">
<div class="content">
<pre>./create-repo.sh -a 'import' -p &lt;project&gt; -d &lt;local source directory> -b &lt;source branch> -s gitflow -r -n &lt;repository name></pre>
</div>
</div>
<div class="paragraph">
<p>This will create <code>master</code> (and <code>develop</code> since a branching strategy is specified) from the <code>&lt;source branch&gt;</code>, removing any other branch (including <code>&lt;source branch&gt;</code>).</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="icon-warning" title=""></i>
</td>
<td class="content">
This operation is destructive regarding branches on the local repository.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="icon-note" title=""></i>
</td>
<td class="content">
Same command could also be used with a local directory, but then using <code>-b</code> and <code>-r</code> would be redundant.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="devonfw-guide_hangar.wiki_gcloud_setup-repository-script.asciidoc_branching-strategies">Branching strategies</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To ensure the quality of development, it is crucial to keep a clean Git workflow. The following branching strategies are supported (using <code>-s</code> flag):</p>
</div>
<div class="sect2">
<h3 id="devonfw-guide_hangar.wiki_gcloud_setup-repository-script.asciidoc_gitflow">Gitflow</h3>
<div class="paragraph">
<p>This is not an explanation of Gitflow (there are plenty of them on the web), but the actions performed by the script to help you start using this worflow.</p>
</div>
<div class="sect3">
<h4 id="devonfw-guide_hangar.wiki_gcloud_setup-repository-script.asciidoc_branches">Branches</h4>
<div class="ulist">
<ul>
<li>
<p><code>master</code> is the initial (seed) branch.</p>
</li>
<li>
<p><code>develop</code> branch is created from <code>master</code> branch.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Any other branch part the strategy (feature, release, and hotfix branches) will be created by developers during the lifecycle of the project.</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer" class="footer">
<div class="openblock footerLinks">
<div class="content">
<div class="dlist linklist">
<dl>
<dt class="hdlist1">About</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="/website/pages/welcome/welcome.html">About devonfw</a></p>
</li>
<li>
<p><a href="/website/pages/docs/devonfw-guide_getting-started.wiki_introduction-why-should-i-use-devonfw.asciidoc_features.html">Features</a></p>
</li>
<li>
<p><a href="/website/pages/docs/devonfw-guide_devon4j.wiki_architecture.asciidoc.html#devonfw-guide_devon4j.wiki_architecture.asciidoc_technology-stack">Technology Stack</a></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="dlist linklist">
<dl>
<dt class="hdlist1">Explore</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="/website/pages/docs/devonfw-guide_getting-started.wiki_getting-started.asciidoc.html">Getting started</a></p>
</li>
<li>
<p><a href="/website/pages/docs/devonfw-guide_devon4j.wiki_architecture.asciidoc.html">Architecture</a></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="dlist linklist">
<dl>
<dt class="hdlist1">Docs</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="/website/pages/docs/devonfw-guide_ide.wiki_devonfw-ide-introduction.asciidoc.html">User guide</a></p>
</li>
<li>
<p><a href="/website/pages/docs/devonfw-guide_general_master-release-notes.asciidoc.html">Releases information</a></p>
</li>
<li>
<p><a href="/website/pages/docs/master.html">Wiki</a></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="dlist linklist">
<dl>
<dt class="hdlist1">Community</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/orgs/devonfw/people">Contributors</a></p>
</li>
<li>
<p><a href="https://github.com/devonfw/devonfw.github.io/blob/develop/README.asciidoc">Website Contribution</a></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="ulist footerFooter">
<ul>
<li>
<p><a href="https://devonfw.com/website/pages/docs/devonfw-guide_ide.wiki_LICENSE.asciidoc.html">Terms of Use</a></p>
</li>
<li>
<p><a href="https://github.com/devonfw">Support</a></p>
</li>
</ul>
</div>
</div>
    <script>
      let bb = document.getElementById('menu-button');
      bb.addEventListener('click', function() {
        document.querySelector('.website-navbar ul').classList.toggle('visible');
        console.log(document.querySelector('.website-navbar ul'))
      })
    </script>
    <script type="module">
      import { EditLinksModule } from '/website/shared/editlinks.js';

      let alwaysVisible = true;
      if(document.location.pathname.endsWith("pages/welcome/welcome.html")) {
        alwaysVisible = false;
      }
      EditLinksModule.addEditLinks(alwaysVisible);
    </script>
    <script src="/website/assets/scripts/popper.min.js"></script>
    <script src="/website/assets/scripts/bootstrap.min.js"></script>
<div class="footnote"><sub>

Last updated 2022-11-17 09:33:37 UTC
</sub></div>
</div>
</div>
<link rel="stylesheet" type="text/css" href="https://cginternal.devonfw.com/websitesnippets/main.css">
<script async src="https://cginternal.devonfw.com/websitesnippets/main.js"></script>
<script>
  if(!document.location.pathname.endsWith("pages/welcome/welcome.html")) {
    anchors.options.visible = 'always';
  }
  anchors.add();
</script>
<script>
  var internalUrls = ["https://cginternal.devonfw.com/websitesnippets/"];
  $(".internal").each(function(){
    internalUrls.forEach((internalUrl, index) => {
      $.ajax({url: internalUrl + $(this).text() + "/index.html" })
      .then(r => {
        var leftDiv = $('<div class="info"><span class="infoText">Internal</span><img class="infoImage" src="' + internalUrl + 'logo.png"/></div>');
        var rightFirstDiv = $('<div class="message">This is only visible inside of the corporate network.</div>');
        var rightLastDiv = $('<div class="content"></div>');
        rightLastDiv.html(r);
        var rightDiv = $('<div class="right"></div>');
        rightDiv.append(rightFirstDiv);
        rightDiv.append(rightLastDiv);
        $(this).html(leftDiv);
        $(this).append(rightDiv);
        $(this).addClass("internal-active");
        $(this).removeClass("internal");
      })
    });
	});
</script>
<script>
      let cookieName = 'cookie_consent';
      let expiryTime = new Date(2037, 11, 21);
      let today = new Date();
      let cookieConsentDeclinedDate = localStorage.getItem("cookie_consent_declined");
      let dateDiffHours = 0;
      let cookieConsentHtml = `
      <div id="cookie-consent">
        <p>
          We use cookies to perform analytics and enhance user experience. Do you accept to the use of cookies?
        </p>
        <p class="cookie-consent-buttons">
          <a id="decline-cookie-btn" class="btn white-button" href="javascript:void(0)">Decline</a>
          <a id="accept-cookie-btn" class="btn blue-button" href="javascript:void(0)">Accept</a>
        </p>
      </div>
      `;
      
      const parseCookie = str =>
        str
        .split(';')
        .map(v => v.split('='))
        .reduce((acc, v) => {
          acc[decodeURIComponent(v[0].trim())] = decodeURIComponent(v[1].trim());
          return acc;
        }, {});
      
      dateDiffHours = cookieConsentDeclinedDate ? Math.abs(cookieConsentDeclinedDate - today) / 36e5 : 0;
      if (document.cookie.indexOf(cookieName) < 0) {
        if (cookieConsentDeclinedDate) {
          if (dateDiffHours > 24) {
            $("body").append(cookieConsentHtml);
          }
        } else {
          $("body").append(cookieConsentHtml);
        }
      } else {
        cookies = parseCookie(document.cookie);
        if (cookies["cookie_consent"] == "accept") {
          consentGranted();
        }
      }
      
      $("#accept-cookie-btn").click(function() {
        document.cookie = `${cookieName}=accept;expires=${expiryTime};path=/`;
        localStorage.removeItem("cookie_consent_declined");
        consentGranted();
        $("#cookie-consent").hide();
      });
      $("#decline-cookie-btn").click(function() {
        localStorage.setItem("cookie_consent_declined", today);
        $("#cookie-consent").hide();
      });
</script>
</body>
</html>