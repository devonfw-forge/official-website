<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=">
<meta name="generator" content="Asciidoctor 1.5.8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- ******** SOCIAL MEDIA META ********** -->

<meta name="title" property="og:title" content="devonfw website">
<meta property="og:type" content="website">
<meta name="image" property="og:image" content="https://devonfw.com/images/devonfwwebsite.png">
<meta name="description" property="og:description" content="devonfw is the standard open source software development platform; Serving the full Software Delivery Life Cycle.">
<meta property="og:url" content="https://devonfw.com/index.html">

<meta name="twitter:title" content="devonfw website">
<meta name="twitter:description" content="devonfw is the standard open source software development platform; Serving the full Software Delivery Life Cycle.">
<meta name="twitter:image" content="https://devonfw.com/images/devonfwwebsite.png">
<meta name="twitter:card" content="summary_large_image">

<!-- ************************************* -->


<title>From existing devonfw Template for Production Line</title>
<!-- devonfw website stylesheet -->
<link rel="stylesheet" type="text/css" href="/devonfw.css">
<!-- Lunr -->
<script src="/website/assets/scripts/lunr.min.js"></script>
<!-- JQuery -->
<script src="/website/assets/scripts/jquery.min.js"></script>
<link rel="stylesheet" href="/website/assets/styles/font-awesome.min.css">
<link rel="stylesheet" href="/website/assets/styles/googlecode.min.css">
<script src="/website/assets/scripts/highlight.min.js"></script>
<script src="/website/assets/scripts/common.min.js"></script>
<script>hljs.initHighlightingOnLoad()</script>
<link rel="stylesheet" href="/website/assets/styles/bootstrap.min.css">

<script src="/website/assets/scripts/anchor.min.js"></script>

<script src="/website/components/header/search-engine/bundle.js"></script>

<script src="/website/shared/rightmenu.js"></script>

<!-- ************** Google analytics ************ -->
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}

gtag('consent', 'default', {
  'analytics_storage': 'denied'
});
</script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-151636804-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-151636804-1');
</script>
<script>
  function consentGranted() {
    gtag('consent', 'update', {
      'analytics_storage': 'granted'
    });
  }
</script>

<!-- ******************************************** -->


</head>
<body class="article">
<div id="website-navbar" class="website-navbar">
<button id="menu-button" class="menu-button">
  <img src="/images/menu-button.svg" width="32px" height="32px" alt=""/>
</button>

<ul>
<li>
<p><span class="image"><a class="image" href="/website/pages/welcome/welcome.html"><img alt="logo" src="/images/Logo_devonfw.svg"></a></span></p>
</li>
<li>
<p><a href="https://killercoda.com/devonfw">Tutorials</a></p>
</li>
<li>
<p><a href="/website/pages/solutions/index.html">Solutions</a></p>
</li>
<li>
<p><a href="/website/pages/docs/master.html">Docs</a></p>
</li>
</ul>

<form class="form-inline">
  <div class="search-bar">
    <input
      id="search-field"
      type="search"
      class="form-control mr-sm-2"
      placeholder="Search by keyword(s)..."
      aria-label="Search"
      style="height: auto;"
      autocomplete="off"/>
    <div class="sb-res-pos px-4">
      <div id="click-outside" class="click-outside z-50 hidden"></div>
      <div class="col rounded px-0 border z-100 bg-white hidden search-bar-results" id="search-results-box">
      </div>
    </div>
  </div>
</form>
<a class="navbar-github text-white" href="https://github.com/devonfw/">
  <img src="/images/github-mark.png" width=auto height=auto alt="">
</a></div>
<div id="sidebar" class="wiki-sidebar"></div>

<div id="content" class="mt-4 mt-sm-5">
<div class="toc2">
<div class="title">Table of Contents</div>
<ul class="sectlevel0">
<li><a href="#devonfw-guide_production-line.wiki_from-existing-devonfw.asciidoc">From existing devonfw Template for Production Line</a>
<ul class="sectlevel1">
<li><a href="#devonfw-guide_production-line.wiki_from-existing-devonfw.asciidoc_overview">Overview</a></li>
<li><a href="#devonfw-guide_production-line.wiki_from-existing-devonfw.asciidoc_prerequisites">Prerequisites</a></li>
<li><a href="#devonfw-guide_production-line.wiki_from-existing-devonfw.asciidoc_how-to-insert-the-template">How to insert the Template</a></li>
<li><a href="#devonfw-guide_production-line.wiki_from-existing-devonfw.asciidoc_how-to-run-the-template">How to run the Template</a></li>
</ul>
</li>
</ul>
<div class="imageblock">
<div class="content">
<img src="/home/runner/work/devonfw.github.io/devonfw.github.io/target/generated-docs/images/devon4node-pl/pl.png" alt="400" width="300">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="/home/runner/work/devonfw.github.io/devonfw.github.io/target/generated-docs/images/devon4node-pl/devonfw.png" alt="400" width="300">
</div>
</div>
<h1 id="devonfw-guide_production-line.wiki_from-existing-devonfw.asciidoc" class="sect0">From existing devonfw Template for Production Line</h1>
<div class="sect1">
<h2 id="devonfw-guide_production-line.wiki_from-existing-devonfw.asciidoc_overview">Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>From existing devonfw template is very similar to devon4j, devon4ng, devon4net and devon4node templates. The main difference is from existing devonfw template will no create a new devonfw project, it takes an existing project from GitLab and then add/create everything in order to apply a CICD strategy to your project.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="devonfw-guide_production-line.wiki_from-existing-devonfw.asciidoc_prerequisites">Prerequisites</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To be able to run Jenkins Node job under ProductionLine you need to configure below settings in Jenkins and Gitlab</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Jenkins<br></p>
<div class="ulist">
<ul>
<li>
<p>Execute the <a href="#devonfw-guide_production-line.wiki_._initialize-instance.asciidoc">initialize instance template</a></p>
</li>
<li>
<p>If you plan to deploy into OpenShift, you need to execute <a href="#devonfw-guide_production-line.wiki_._openshift-configuration.asciidoc">openshift-configuration</a> template also.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Gitlab<br></p>
<div class="ulist">
<ul>
<li>
<p>Create a project and upload your current code. In order to start a new project in your local machine, you can use the <a href="#devonfw-guide/production-line.wiki_https://github.com/devonfw/ide">devonfw-ide</a>. The project must be a devon4j, devon4ng, devon4net or devon4node project.</p>
</li>
<li>
<p>Generate User Private Token<br>
Go to your Profile in Gitlab<br></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="/home/runner/work/devonfw.github.io/devonfw.github.io/target/generated-docs/images/devon4node-pl/profile.png" alt="500" width="400">
</div>
</div>
<div class="paragraph">
<p>Next click on the pen icon<br></p>
</div>
<div class="imageblock">
<div class="content">
<img src="/home/runner/work/devonfw.github.io/devonfw.github.io/target/generated-docs/images/devon4node-pl/pen.png" alt="500" width="400">
</div>
</div>
<div class="paragraph">
<p>On the left menu choose Access Tokens and put token name and check fields like below<br></p>
</div>
<div class="imageblock">
<div class="content">
<img src="/home/runner/work/devonfw.github.io/devonfw.github.io/target/generated-docs/images/devon4node-pl/token.JPG" alt="600" width="500">
</div>
</div>
<div class="paragraph">
<p>Click "Create personal access token", you should receive notification about created token and token string. Copy the token string.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/home/runner/work/devonfw.github.io/devonfw.github.io/target/generated-docs/images/devon4node-pl/created_token.JPG" alt="600" width="500">
</div>
</div>
<div class="paragraph">
<p>The GitLab API user needs to have API access and the rights to create a new group. To set this permission follow the next steps:<br></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Enter the Admin control panel</p>
</li>
<li>
<p>Select 'Users'</p>
</li>
<li>
<p>Select the user(s) in question and click 'Edit'</p>
</li>
<li>
<p>Scroll down to 'Access' and un-tick 'Can Create Group'</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="devonfw-guide_production-line.wiki_from-existing-devonfw.asciidoc_how-to-insert-the-template">How to insert the Template</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In order to add the template, you can follow the <a href="#devonfw-guide_production-line.wiki_._how-to-add-a-template.asciidoc">guide</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="devonfw-guide_production-line.wiki_from-existing-devonfw.asciidoc_how-to-run-the-template">How to run the Template</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Build the job with parameters:</p>
<div class="ulist">
<ul>
<li>
<p>REPOSITORY_URL: The internal repository URL. Without protocol. Example: gitlab-core:80/gitlab/mygroup/myproject-frontend.</p>
</li>
<li>
<p>GIT_BRANCH: The branch where you want to apply the CICD changes.</p>
</li>
<li>
<p>MERGE_STRATEGY: Choose the merge strategy for cicdgen. For more information see the <a href="#devonfw-guide/production-line.wiki_https://github.com/devonfw/cicdgen/wiki/merge-strategies">CICDGEN merge documentation page</a></p>
</li>
<li>
<p>GITLAB_USER_PRIVATE_TOKEN: Private Token of a Production Line Gitlab User that can be used to create/update repositories. The token proprietary user must have admin rights in the repository. Created as prerequisite, you only need to add it as credential with GitLab API token <strong>Kind</strong>.</p>
</li>
<li>
<p>DEPLOY: Choose the environment where you want to deploy. The deployment could be <strong>none</strong>, <strong>docker</strong> or <strong>openshift</strong>. If <strong>docker</strong> or <strong>openshift</strong> were selected, extra parameters will be required in their dedicated steps:</p>
<div class="ulist">
<ul>
<li>
<p>Configuring DOCKER:</p>
<div class="ulist">
<ul>
<li>
<p>DOCKER_URL: The remote docker daemon URL</p>
</li>
<li>
<p>DOCKER_CERT: Credentials to access docker daemon. If the daemon is not secure, you can leave this empty.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Configuring Openshift:</p>
<div class="ulist">
<ul>
<li>
<p>OC_NAME: Openshift cluster name. It was defined in the Openshift Configuration template</p>
</li>
<li>
<p>DOCKER_REGISTRY_CREDENTIALS: Nexus docker registry user credentials. It was created in the initialize instance pipeline. The default username is nexus-api, the default password is the same as your service account.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>After executing this template, you will have:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Your GitLab project updated.</p>
<div class="ulist">
<ul>
<li>
<p>Added a Jenkinsfile with all CICD stages.</p>
</li>
<li>
<p>The repository is updated in order to have the jenkins webhook.</p>
</li>
</ul>
</div>
</li>
<li>
<p>A new multibranch pipeline in jenkins inside the folder <em>PROJECT_NAME</em> with the name <em>PROJECT_NAME</em>-<em>PROJECT_SUFFIX</em>. As the webhook is already configured, it should be executed on every push to GitLab repository.</p>
</li>
<li>
<p>If you choose docker for deployment, your Jenkinsfile should contain two extra stages in order to build and deploy the docker image. Also, the repository should contain the Dockerfiles to create the docker images.</p>
</li>
<li>
<p>If you choose OpenShift for deployment, three new applications should be created in your OpenShift. Those applications represent three environments of your application: develop, uat and stage. Also, your Jenkinsfile should contain three extra stages in order to build and deploy the docker image and check that the pod is running without errors. Also, the repository should contain the Dockerfiles to create the docker images.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div id="footer" class="footer">
<div class="openblock footerLinks">
<div class="content">
<div class="dlist linklist">
<dl>
<dt class="hdlist1">About</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="/website/pages/welcome/welcome.html">About devonfw</a></p>
</li>
<li>
<p><a href="/website/pages/docs/devonfw-guide_getting-started.wiki_introduction-why-should-i-use-devonfw.asciidoc_features.html">Features</a></p>
</li>
<li>
<p><a href="/website/pages/docs/devonfw-guide_devon4j.wiki_architecture.asciidoc.html#devonfw-guide_devon4j.wiki_architecture.asciidoc_technology-stack#">Technology Stack</a></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="dlist linklist">
<dl>
<dt class="hdlist1">Explore</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="/website/pages/docs/devonfw-guide_getting-started.wiki_getting-started.asciidoc.html">Getting started</a></p>
</li>
<li>
<p><a href="/website/pages/docs/devonfw-guide_devon4j.wiki_architecture.asciidoc.html">Architecture</a></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="dlist linklist">
<dl>
<dt class="hdlist1">Docs</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="/website/pages/docs/devonfw-guide_ide.wiki_devonfw-ide-introduction.asciidoc.html">User guide</a></p>
</li>
<li>
<p><a href="/website/pages/docs/devonfw-guide_general_master-release-notes.asciidoc.html">Releases information</a></p>
</li>
<li>
<p><a href="/website/pages/docs/master.html">Wiki</a></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="dlist linklist">
<dl>
<dt class="hdlist1">Community</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/orgs/devonfw/people">Contributors</a></p>
</li>
<li>
<p><a href="https://github.com/devonfw/devonfw.github.io/blob/develop/README.asciidoc">Website Contribution</a></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="ulist footerFooter">
<ul>
<li>
<p><a href="https://devonfw.com/website/pages/docs/devonfw-guide_ide.wiki_LICENSE.asciidoc.html">Terms of Use</a></p>
</li>
<li>
<p><a href="https://github.com/devonfw">Support</a></p>
</li>
</ul>
</div>
</div>
    <script>
      let bb = document.getElementById('menu-button');
      bb.addEventListener('click', function() {
        document.querySelector('.website-navbar ul').classList.toggle('visible');
        console.log(document.querySelector('.website-navbar ul'))
      })
    </script>
    <script type="module">
      import { EditLinksModule } from '/website/shared/editlinks.js';

      let alwaysVisible = true;
      if(document.location.pathname.endsWith("pages/welcome/welcome.html")) {
        alwaysVisible = false;
      }
      EditLinksModule.addEditLinks(alwaysVisible);
    </script>
    <script src="/website/assets/scripts/popper.min.js"></script>
    <script src="/website/assets/scripts/bootstrap.min.js"></script>
<div class="footnote"><sub>

Last updated 2022-06-23 14:25:01 UTC
</sub></div>
</div>
</div>
<link rel="stylesheet" type="text/css" href="https://cginternal.devonfw.com/websitesnippets/main.css">
<script async src="https://cginternal.devonfw.com/websitesnippets/main.js"></script>
<script>
  if(!document.location.pathname.endsWith("pages/welcome/welcome.html")) {
    anchors.options.visible = 'always';
  }
  anchors.add();
</script>
<script>
  var internalUrls = ["https://cginternal.devonfw.com/websitesnippets/"];
  $(".internal").each(function(){
    internalUrls.forEach((internalUrl, index) => {
      $.ajax({url: internalUrl + $(this).text() + "/index.html" })
      .then(r => {
        var leftDiv = $('<div class="info"><span class="infoText">Internal</span><img class="infoImage" src="' + internalUrl + 'logo.png"/></div>');
        var rightFirstDiv = $('<div class="message">This is only visible inside of the corporate network.</div>');
        var rightLastDiv = $('<div class="content"></div>');
        rightLastDiv.html(r);
        var rightDiv = $('<div class="right"></div>');
        rightDiv.append(rightFirstDiv);
        rightDiv.append(rightLastDiv);
        $(this).html(leftDiv);
        $(this).append(rightDiv);
        $(this).addClass("internal-active");
        $(this).removeClass("internal");
      })
    });
	});
</script>
<script>
      let cookieName = 'cookie_consent';
      let expiryTime = new Date(2037, 11, 21);
      let today = new Date();
      let cookieConsentDeclinedDate = localStorage.getItem("cookie_consent_declined");
      let dateDiffHours = 0;
      let cookieConsentHtml = `
      <div id="cookie-consent">
        <p>
          We use cookies to perform analytics and enhance user experience. Do you accept to the use of cookies?
        </p>
        <p class="cookie-consent-buttons">
          <a id="decline-cookie-btn" class="btn white-button" href="javascript:void(0)">Decline</a>
          <a id="accept-cookie-btn" class="btn blue-button" href="javascript:void(0)">Accept</a>
        </p>
      </div>
      `;
      dateDiffHours = cookieConsentDeclinedDate ? Math.abs(cookieConsentDeclinedDate - today) / 36e5 : 0;
      if (document.cookie.indexOf(cookieName) < 0) {
        if (cookieConsentDeclinedDate) {
          if (dateDiffHours > 24) {
            $("body").append(cookieConsentHtml);
          }
        } else {
          $("body").append(cookieConsentHtml);
        }
      }
      $("#accept-cookie-btn").click(function() {
        document.cookie = `${cookieName}=accept;expires=${expiryTime};path=/`;
        localStorage.removeItem("cookie_consent_declined");
        consentGranted();
        $("#cookie-consent").hide();
      });
      $("#decline-cookie-btn").click(function() {
        localStorage.setItem("cookie_consent_declined", today);
        $("#cookie-consent").hide();
      });
</script>
</body>
</html>