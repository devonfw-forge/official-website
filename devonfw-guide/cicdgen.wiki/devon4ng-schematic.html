<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=">
<meta name="generator" content="Asciidoctor 1.5.8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- ******** SOCIAL MEDIA META ********** -->

<meta name="title" property="og:title" content="devonfw website">
<meta property="og:type" content="website">
<meta name="image" property="og:image" content="https://devonfw.com/images/devonfwwebsite.png">
<meta name="description" property="og:description" content="devonfw is the standard open source software development platform; Serving the full Software Delivery Life Cycle.">
<meta property="og:url" content="https://devonfw.com/index.html">

<meta name="twitter:title" content="devonfw website">
<meta name="twitter:description" content="devonfw is the standard open source software development platform; Serving the full Software Delivery Life Cycle.">
<meta name="twitter:image" content="https://devonfw.com/images/devonfwwebsite.png">
<meta name="twitter:card" content="summary_large_image">

<!-- ************************************* -->


<title>devon4ng schematic</title>
<!-- devonfw website stylesheet -->
<link rel="stylesheet" type="text/css" href="/devonfw.css">
<!-- Lunr -->
<script src="/website/assets/scripts/lunr.min.js"></script>
<!-- JQuery -->
<script src="/website/assets/scripts/jquery.min.js"></script>
<link rel="stylesheet" href="/website/assets/styles/font-awesome.min.css">
<link rel="stylesheet" href="/website/assets/styles/googlecode.min.css">
<script src="/website/assets/scripts/highlight.min.js"></script>
<script src="/website/assets/scripts/common.min.js"></script>
<script>hljs.initHighlightingOnLoad()</script>
<link rel="stylesheet" href="/website/assets/styles/bootstrap.min.css">

<script src="/website/assets/scripts/anchor.min.js"></script>

<script src="/website/components/header/search-engine/bundle.js"></script>

<script src="/website/shared/rightmenu.js"></script>

<!-- ************** Google analytics ************ -->
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}

gtag('consent', 'default', {
  'analytics_storage': 'denied'
});
</script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-151636804-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-151636804-1');
</script>
<script>
  function consentGranted() {
    gtag('consent', 'update', {
      'analytics_storage': 'granted'
    });
  }
</script>

<!-- ******************************************** -->


</head>
<body class="article">
<div id="website-navbar" class="website-navbar">
<button id="menu-button" class="menu-button">
  <img src="/images/menu-button.svg" width="32px" height="32px" alt=""/>
</button>

<ul>
<li>
<p><span class="image"><a class="image" href="/website/pages/welcome/welcome.html"><img alt="logo" src="/images/Logo_devonfw.svg"></a></span></p>
</li>
<li>
<p><a href="https://killercoda.com/devonfw">Tutorials</a></p>
</li>
<li>
<p><a href="/website/pages/solutions/index.html">Solutions</a></p>
</li>
<li>
<p><a href="/website/pages/docs/master.html">Docs</a></p>
</li>
</ul>

<form class="form-inline">
  <div class="search-bar">
    <input
      id="search-field"
      type="search"
      class="form-control mr-sm-2"
      placeholder="Search by keyword(s)..."
      aria-label="Search"
      style="height: auto;"
      autocomplete="off"/>
    <div class="sb-res-pos px-4">
      <div id="click-outside" class="click-outside z-50 hidden"></div>
      <div class="col rounded px-0 border z-100 bg-white hidden search-bar-results" id="search-results-box">
      </div>
    </div>
  </div>
</form>
<a class="navbar-github text-white" href="https://github.com/devonfw/">
  <img src="/images/github-mark.png" width=auto height=auto alt="">
</a></div>
<div id="sidebar" class="wiki-sidebar"></div>

<div id="content" class="mt-4 mt-sm-5">
<div class="toc2">
<div class="title">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#devonfw-guide_cicdgen.wiki_devon4ng-schematic.asciidoc_devon4ng-schematic">devon4ng schematic</a>
<ul class="sectlevel2">
<li><a href="#devonfw-guide_cicdgen.wiki_devon4ng-schematic.asciidoc_devon4ng-schematic-arguments">devon4ng schematic arguments</a></li>
<li><a href="#devonfw-guide_cicdgen.wiki_devon4ng-schematic.asciidoc_devon4ng-generated-files">devon4ng generated files</a></li>
<li><a href="#devonfw-guide_cicdgen.wiki_devon4ng-schematic.asciidoc_devon4ng-docker-generated-files">devon4ng Docker generated files</a></li>
</ul>
</li>
</ul>
<div class="sect1">
<h2 id="devonfw-guide_cicdgen.wiki_devon4ng-schematic.asciidoc_devon4ng-schematic">devon4ng schematic</h2>
<div class="sectionbody">
<div class="paragraph">
<p>With the <code>cicdgen generate devon4ng</code> command you can generate some files required for CICD. In this section we will explain the arguments of this command and also the files that will be generated.</p>
</div>
<div class="sect2">
<h3 id="devonfw-guide_cicdgen.wiki_devon4ng-schematic.asciidoc_devon4ng-schematic-arguments">devon4ng schematic arguments</h3>
<div class="paragraph">
<p>When you execute the <code>cicdgen generate devon4ng</code> command you can also add some arguments in order to modify the behaviour of the command. Those arguments are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>--docker</p>
<div class="paragraph">
<p>The type of this parameter if boolean. If it is present, docker related files and pipeline stage will be also generated. For more details see docker section of Jenkinsfile and <a href="#devonfw-guide_cicdgen.wiki_devon4ng-schematic.asciidoc_devon4ng-docker-generated-files">files generated for docker</a></p>
</div>
</li>
<li>
<p><code>--dockerurl</code></p>
<div class="paragraph">
<p>The URL of your external docker daemon. Example: tcp://127.0.0.1:2376</p>
</div>
</li>
<li>
<p><code>--dockercertid</code></p>
<div class="paragraph">
<p>The Jenkins credential id for your docker daemon certificate. It is only required when your docker daemon is secure.</p>
</div>
</li>
<li>
<p><code>--registryurl</code></p>
<div class="paragraph">
<p>Your docker registry URL. It is required when <code>--docker</code> is true, and it will be used to know where the docker image will be uploaded.</p>
</div>
</li>
<li>
<p><code>--openshift</code></p>
<div class="paragraph">
<p>The type of this parameter if boolean. If it is present, OpenShift related files and pipeline stage will be also generated. For more details see OpenShift section of Jenkinsfile and <a href="#devonfw-guide_cicdgen.wiki_devon4ng-schematic.asciidoc_devon4ng-docker-generated-files">files generated for OpenShift</a> (same as <code>--docker</code>)</p>
</div>
</li>
<li>
<p><code>--ocname</code></p>
<div class="paragraph">
<p>The name used for register your OpenShift cluster in Jenkins.</p>
</div>
</li>
<li>
<p><code>--ocn</code></p>
<div class="paragraph">
<p>OpenShift cluster namespace</p>
</div>
</li>
<li>
<p>--groupid</p>
<div class="paragraph">
<p>The project <code>groupId</code>. This argument is required. It will be used for store the project in a maven repository at Nexus 3. Why maven? Because is the kind of repository where we can upload/download a zip file easily. Npm repository needs a package.json file but, as we compile the angular application to static javascript and html files, the package.json is no needed anymore.</p>
</div>
</li>
<li>
<p>--teams</p>
<div class="paragraph">
<p>With this argument we can add the teams notification option in the <code><a href="#devonfw-guide_cicdgen.wiki_devon4ng-schematic.asciidoc_jenkinsfile-teams</code>">Jenkinsfile</a>.</p>
</div>
</li>
<li>
<p><code>--teamsname</code></p>
<div class="paragraph">
<p>The name of the Microsoft Teams <code>webhook</code>. It is defined at Microsoft Teams connectors.</p>
</div>
</li>
<li>
<p><code>--teamsurl</code></p>
<div class="paragraph">
<p>The url of the Microsoft Teams <code>webhook</code>. It is returned by Microsoft Teams when you create a connector.</p>
</div>
</li>
<li>
<p>--merge</p>
<div class="paragraph">
<p>If you have used cicdgen previously, you can choose what you want to do in case of file conflict. The default behavior is to throw an error and not modify any file. You can see the other strategies on their <a href="#devonfw-guide_cicdgen.wiki_merge-strategies.asciidoc">specific page</a>.</p>
</div>
</li>
<li>
<p>--commit</p>
<div class="paragraph">
<p>If true, all changes will be committed at the end of the process (if possible). In order to send a false value, you need to write <code>--commit=false</code></p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="devonfw-guide_cicdgen.wiki_devon4ng-schematic.asciidoc_devon4ng-generated-files">devon4ng generated files</h3>
<div class="paragraph">
<p>When you execute the generate devon4ng command, some files will be added/updated in your project.</p>
</div>
<div class="sect3">
<h4 id="devonfw-guide_cicdgen.wiki_devon4ng-schematic.asciidoc_files">Files</h4>
<div class="ulist">
<ul>
<li>
<p>angular.json</p>
<div class="paragraph">
<p>The angular.json is modified in order to change the compiled files destination folder. Now, when you make a build of your project, the compiled files will be generated into dist folder instead of dist/&lt;project-name&gt; folder.</p>
</div>
</li>
<li>
<p>package.json</p>
<div class="paragraph">
<p>The package.json is modified in order to add a script for test the application using Chrome Headless instead of a regular chrome. This script is called <code>test:ci</code>.</p>
</div>
</li>
<li>
<p><code>karma.conf.js</code></p>
<div class="paragraph">
<p>The <code>karma.conf.js</code> is also modified in order to add the Chrome Headless as a browser to execute test. The coverage output folder is change to <code>./coverage</code> instead of <code>./coverage/&lt;project-name&gt;</code></p>
</div>
</li>
<li>
<p>Jenkinsfile</p>
<div class="paragraph">
<p>The Jenkinsfile is the file which define the Jenkins pipeline of our project. With this we can execute the test, build the application and deploy it automatically following a CICD methodology. This file is prepared to work with the Production Line default values, but it is also fully configurable to your needs.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Prerequisites</p>
<div class="ulist">
<ul>
<li>
<p>A Production Line instance. It can works also if you have a Jenkins, SonarQube and Nexus3, but in this case maybe you need to configure them properly.</p>
</li>
<li>
<p>NodeJS installed in Jenkins as a global tool.</p>
</li>
<li>
<p>Google Chrome installed in Jenkins as a global custom tool.</p>
</li>
<li>
<p>SonarQube installed in Jenkins as a global tool.</p>
</li>
<li>
<p>Maven3 installed in Jenkins as a global tool.</p>
</li>
<li>
<p>A maven global settings properly configured in Jenkins.</p>
</li>
<li>
<p>If you will use docker :</p>
<div class="ulist">
<ul>
<li>
<p>Docker installed in Jenkins as a global custom tool.</p>
</li>
<li>
<p>The Nexus3 with a docker repository.</p>
</li>
<li>
<p>A machine with docker installed where the build and deploy will happen.</p>
</li>
<li>
<p>A docker network called application.</p>
</li>
</ul>
</div>
</li>
<li>
<p>If you will use OpenShift :</p>
<div class="ulist">
<ul>
<li>
<p>An OpenShift instance</p>
</li>
<li>
<p>The OpenShift projects created</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>The Jenkins syntax</p>
<div class="paragraph">
<p>In this section we will  explain a little bit the syntax of the Jenkins, so if you need to change something you will be able to do it properly.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>agent: Here you can specify the Jenkins agent where the pipeline will be executed. The default value is any.</p>
</li>
<li>
<p>options: Here you can set global options for the pipeline. By default, we add a build discarded to delete old artifacts/build of the pipeline and also we disable the concurrent builds.</p>
<div id="devonfw-guide_cicdgen.wiki_devon4ng-schematic.asciidoc_jenkinsfile-teams" class="paragraph">
<p>If the teams option is passed to cicdgen, we add a new option in order to send notifications to Microsoft Teams with the status of the pipeline executions.</p>
</div>
</li>
<li>
<p>tools: Here we define the global tools configurations. By default a version of nodejs is added here.</p>
</li>
<li>
<p>environment: Here all environment variables are defined. All values defined here matches with the Production Line defaults. If you Jenkins has other values, you need to update it manually.</p>
</li>
<li>
<p>stages: Here are defined all stages that our pipeline will execute. Those stages are:</p>
<div class="ulist">
<ul>
<li>
<p>Loading Custom Tools: in this stage some custom tools are loaded. Also we set some variables depending on the git branch which you are executing.</p>
</li>
<li>
<p>Fresh Dependency Installation: install all packages need to build/run your angular project.</p>
</li>
<li>
<p>Code Linting: execute the linter analysis.</p>
</li>
<li>
<p>Execute Angular tests: execute the angular test in a Chrome Headless.</p>
</li>
<li>
<p>SonarQube code analysis: send the project to SonarQube in order to get the static code analysis of your project.</p>
</li>
<li>
<p>Build Application: compile the application to be ready to deploy in a web server.</p>
</li>
<li>
<p>Deliver application into Nexus: store all compiled files in Nexus3 as a zip file.</p>
</li>
<li>
<p>If <code>--docker</code> is present:</p>
<div class="ulist">
<ul>
<li>
<p>Create the Docker image: build a new docker image that contains the new version of the project.</p>
</li>
<li>
<p>Deploy the new image: deploy a new version of the application using the image created in the previous stage. The previous version is removed.</p>
</li>
</ul>
</div>
</li>
<li>
<p>If <code>--openshift</code> is present:</p>
<div class="ulist">
<ul>
<li>
<p>Create the Docker image: build a new docker image that contains the new version of the project using a OpenShift build config.</p>
</li>
<li>
<p>Deploy the new image: deploy a new version of the application in OpenShift.</p>
</li>
<li>
<p>Check pod status: checks that the application deployed in the previous stage is running properly. If the application does not run the pipeline will fail.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>post: actions that will be executed after the stages. We use it to clean up all files.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="devonfw-guide_cicdgen.wiki_devon4ng-schematic.asciidoc_devon4ng-docker-generated-files">devon4ng Docker generated files</h3>
<div class="paragraph">
<p>When you generate the files for a devon4ng you can also pass the option <code>--docker</code>. It will generate also some extra files related to docker.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="icon-note" title=""></i>
</td>
<td class="content">
If you pass the <code>--docker</code> option the option <code>--registryurl</code> is also required. It will be used to upload the images to a docker registry. Example: if your registry url is <code>docker-registry-test.s2-eu.capgemini.com</code> you should execute the command in this way: <code>cicdgen generate devon4node --groupid com.devonfw --docker `--registryurl</code> docker-registry-test.s2-eu.capgemini.com`.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="devonfw-guide_cicdgen.wiki_devon4ng-schematic.asciidoc_files">Files</h4>
<div class="ulist">
<ul>
<li>
<p>.dockerignore</p>
<div class="paragraph">
<p>In this files are defined the folders that will not be copied to the docker image. Fore more information read the <a href="devonfw-guide/cicdgen.wiki_https://docs.docker.com/engine/reference/builder/.html#dockerignore-file">official documentation</a>.</p>
</div>
</li>
<li>
<p>Dockerfile</p>
<div class="paragraph">
<p>This file contains the instructions to build a docker image for you project. This Dockerfile is for local development purposes, you can use it in your machine executing:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ cd &lt;path-to-your-project&gt;
$ docker build -t &lt;project-name&gt;/&lt;tag&gt; .</pre>
</div>
</div>
<div class="paragraph">
<p>This build is using a multi-stage build. First, it use a node image in order to compile the source code, then it will use a nginx image as a web server for our devon4ng application. With the multi-stage build we avoid everything related to <code>node.js</code> in our final image, where we only have a nginx with our application compiled.</p>
</div>
</li>
<li>
<p>Dockerfile.ci</p>
<div class="paragraph">
<p>This file contains the instructions to create a docker image for you project. The main difference with the Dockerfile is that this file will be only used in the Jenkins pipeline. Instead of compiling again the code, it takes all compiled files and the nginx.conf from Jenkins to the image.</p>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer" class="footer">
<div class="openblock footerLinks">
<div class="content">
<div class="dlist linklist">
<dl>
<dt class="hdlist1">About</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="/website/pages/welcome/welcome.html">About devonfw</a></p>
</li>
<li>
<p><a href="/website/pages/docs/devonfw-guide_getting-started.wiki_introduction-why-should-i-use-devonfw.asciidoc_features.html">Features</a></p>
</li>
<li>
<p><a href="/website/pages/docs/devonfw-guide_devon4j.wiki_architecture.asciidoc.html#devonfw-guide_devon4j.wiki_architecture.asciidoc_technology-stack">Technology Stack</a></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="dlist linklist">
<dl>
<dt class="hdlist1">Explore</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="/website/pages/docs/devonfw-guide_getting-started.wiki_getting-started.asciidoc.html">Getting started</a></p>
</li>
<li>
<p><a href="/website/pages/docs/devonfw-guide_devon4j.wiki_architecture.asciidoc.html">Architecture</a></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="dlist linklist">
<dl>
<dt class="hdlist1">Docs</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="/website/pages/docs/devonfw-guide_ide.wiki_devonfw-ide-introduction.asciidoc.html">User guide</a></p>
</li>
<li>
<p><a href="/website/pages/docs/devonfw-guide_general_master-release-notes.asciidoc.html">Releases information</a></p>
</li>
<li>
<p><a href="/website/pages/docs/master.html">Wiki</a></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="dlist linklist">
<dl>
<dt class="hdlist1">Community</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/orgs/devonfw/people">Contributors</a></p>
</li>
<li>
<p><a href="https://github.com/devonfw/devonfw.github.io/blob/develop/README.asciidoc">Website Contribution</a></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="ulist footerFooter">
<ul>
<li>
<p><a href="https://devonfw.com/website/pages/docs/devonfw-guide_ide.wiki_LICENSE.asciidoc.html">Terms of Use</a></p>
</li>
<li>
<p><a href="https://github.com/devonfw">Support</a></p>
</li>
</ul>
</div>
</div>
    <script>
      let bb = document.getElementById('menu-button');
      bb.addEventListener('click', function() {
        document.querySelector('.website-navbar ul').classList.toggle('visible');
        console.log(document.querySelector('.website-navbar ul'))
      })
    </script>
    <script type="module">
      import { EditLinksModule } from '/website/shared/editlinks.js';

      let alwaysVisible = true;
      if(document.location.pathname.endsWith("pages/welcome/welcome.html")) {
        alwaysVisible = false;
      }
      EditLinksModule.addEditLinks(alwaysVisible);
    </script>
    <script src="/website/assets/scripts/popper.min.js"></script>
    <script src="/website/assets/scripts/bootstrap.min.js"></script>
<div class="footnote"><sub>

Last updated 2022-06-27 10:17:45 UTC
</sub></div>
</div>
</div>
<link rel="stylesheet" type="text/css" href="https://cginternal.devonfw.com/websitesnippets/main.css">
<script async src="https://cginternal.devonfw.com/websitesnippets/main.js"></script>
<script>
  if(!document.location.pathname.endsWith("pages/welcome/welcome.html")) {
    anchors.options.visible = 'always';
  }
  anchors.add();
</script>
<script>
  var internalUrls = ["https://cginternal.devonfw.com/websitesnippets/"];
  $(".internal").each(function(){
    internalUrls.forEach((internalUrl, index) => {
      $.ajax({url: internalUrl + $(this).text() + "/index.html" })
      .then(r => {
        var leftDiv = $('<div class="info"><span class="infoText">Internal</span><img class="infoImage" src="' + internalUrl + 'logo.png"/></div>');
        var rightFirstDiv = $('<div class="message">This is only visible inside of the corporate network.</div>');
        var rightLastDiv = $('<div class="content"></div>');
        rightLastDiv.html(r);
        var rightDiv = $('<div class="right"></div>');
        rightDiv.append(rightFirstDiv);
        rightDiv.append(rightLastDiv);
        $(this).html(leftDiv);
        $(this).append(rightDiv);
        $(this).addClass("internal-active");
        $(this).removeClass("internal");
      })
    });
	});
</script>
<script>
      let cookieName = 'cookie_consent';
      let expiryTime = new Date(2037, 11, 21);
      let today = new Date();
      let cookieConsentDeclinedDate = localStorage.getItem("cookie_consent_declined");
      let dateDiffHours = 0;
      let cookieConsentHtml = `
      <div id="cookie-consent">
        <p>
          We use cookies to perform analytics and enhance user experience. Do you accept to the use of cookies?
        </p>
        <p class="cookie-consent-buttons">
          <a id="decline-cookie-btn" class="btn white-button" href="javascript:void(0)">Decline</a>
          <a id="accept-cookie-btn" class="btn blue-button" href="javascript:void(0)">Accept</a>
        </p>
      </div>
      `;
      dateDiffHours = cookieConsentDeclinedDate ? Math.abs(cookieConsentDeclinedDate - today) / 36e5 : 0;
      if (document.cookie.indexOf(cookieName) < 0) {
        if (cookieConsentDeclinedDate) {
          if (dateDiffHours > 24) {
            $("body").append(cookieConsentHtml);
          }
        } else {
          $("body").append(cookieConsentHtml);
        }
      }
      $("#accept-cookie-btn").click(function() {
        document.cookie = `${cookieName}=accept;expires=${expiryTime};path=/`;
        localStorage.removeItem("cookie_consent_declined");
        consentGranted();
        $("#cookie-consent").hide();
      });
      $("#decline-cookie-btn").click(function() {
        localStorage.setItem("cookie_consent_declined", today);
        $("#cookie-consent").hide();
      });
</script>
</body>
</html>