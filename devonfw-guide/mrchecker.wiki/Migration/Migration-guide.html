<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=">
<meta name="generator" content="Asciidoctor 1.5.8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- ******** SOCIAL MEDIA META ********** -->

<meta name="title" property="og:title" content="devonfw website">
<meta property="og:type" content="website">
<meta name="image" property="og:image" content="https://devonfw.com/images/devonfwwebsite.png">
<meta name="description" property="og:description" content="devonfw is the standard open source software development platform; Serving the full Software Delivery Life Cycle.">
<meta property="og:url" content="https://devonfw.com/index.html">

<meta name="twitter:title" content="devonfw website">
<meta name="twitter:description" content="devonfw is the standard open source software development platform; Serving the full Software Delivery Life Cycle.">
<meta name="twitter:image" content="https://devonfw.com/images/devonfwwebsite.png">
<meta name="twitter:card" content="summary_large_image">

<!-- ************************************* -->


<title>Junit4 to Junit5 migration guide</title>
<!-- devonfw website stylesheet -->
<link rel="stylesheet" type="text/css" href="/devonfw.css">
<!-- Lunr -->
<script src="/website/assets/scripts/lunr.min.js"></script>
<!-- JQuery -->
<script src="/website/assets/scripts/jquery.min.js"></script>
<link rel="stylesheet" href="/website/assets/styles/font-awesome.min.css">
<link rel="stylesheet" href="/website/assets/styles/googlecode.min.css">
<script src="/website/assets/scripts/highlight.min.js"></script>
<script src="/website/assets/scripts/common.min.js"></script>
<script>hljs.initHighlightingOnLoad()</script>
<link rel="stylesheet" href="/website/assets/styles/bootstrap.min.css">

<script src="/website/assets/scripts/anchor.min.js"></script>

<script src="/website/components/header/search-engine/bundle.js"></script>

<script src="/website/shared/rightmenu.js"></script>

<!-- ************** Google analytics ************ -->
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}

gtag('consent', 'default', {
  'analytics_storage': 'denied'
});
</script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-151636804-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-151636804-1');
</script>
<script>
  function consentGranted() {
    gtag('consent', 'update', {
      'analytics_storage': 'granted'
    });
  }
</script>

<!-- ******************************************** -->


</head>
<body id="devonfw-guide_mrchecker.wiki_Migration_Migration-guide.asciidoc" class="article">
<div id="website-navbar" class="website-navbar">
<button id="menu-button" class="menu-button">
  <img src="/images/menu-button.svg" width="32px" height="32px" alt=""/>
</button>

<ul>
<li>
<p><span class="image"><a class="image" href="/website/pages/welcome/welcome.html"><img alt="logo" src="/images/Logo_devonfw.svg"></a></span></p>
</li>
<li>
<p><a href="https://killercoda.com/devonfw">Tutorials</a></p>
</li>
<li>
<p><a href="/website/pages/solutions/index.html">Solutions</a></p>
</li>
<li>
<p><a href="/website/pages/docs/master.html">Docs</a></p>
</li>
</ul>

<form class="form-inline">
  <div class="search-bar">
    <input
      id="search-field"
      type="search"
      class="form-control mr-sm-2"
      placeholder="Search by keyword(s)..."
      aria-label="Search"
      style="height: auto;"
      autocomplete="off"/>
    <div class="sb-res-pos px-4">
      <div id="click-outside" class="click-outside z-50 hidden"></div>
      <div class="col rounded px-0 border z-100 bg-white hidden search-bar-results" id="search-results-box">
      </div>
    </div>
  </div>
</form>
<a class="navbar-github text-white" href="https://github.com/devonfw/">
  <img src="/images/github-mark.png" width=auto height=auto alt="">
</a></div>
<div id="sidebar" class="wiki-sidebar"></div>

<div id="content" class="mt-4 mt-sm-5">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p><strong>mrchecker-core-module version 5.6.2.1</strong> features the upgrade of Junit4 to Junit5. Consequently, the Junit4 features are now obsolete and current test projects require migration
in order to use the latest revision of MrChecker. This site provides guidance on the migration.</p>
</div>
<div class="paragraph">
<p>References:
Junit5 User Guide - <a href="https://junit.org/junit5/docs/current/user-guide/#overview" class="bare">https://junit.org/junit5/docs/current/user-guide/#overview</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="devonfw-guide_mrchecker.wiki_migration_migration-guide.asciidoc_pom">POM</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The project <code>pom.xml</code> file needs to be adjusted in the first place. An exemplary POM file for download can be found here: <a href="https://github.com/devonfw/mrchecker/blob/develop/template/pom.xml" class="bare">https://github.com/devonfw/mrchecker/blob/develop/template/pom.xml</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="devonfw-guide_mrchecker.wiki_migration_migration-guide.asciidoc_test-annotations">Test Annotations</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Junit5 redefines annotations defining a test flow. The annotations need to be adjusted as per the following table.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/home/runner/work/devonfw.github.io/devonfw.github.io/target/generated-docs/images/migration01.png" alt="migration01">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="devonfw-guide_mrchecker.wiki_migration_migration-guide.asciidoc_rule">Rule, ClassRule, TestRule and TestMethod</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Junit4 <code>@Rule</code> and <code>@ClassRule</code> annoations as well as <code>TestRule</code> and <code>TestMethod</code> interfaces have been replaced
with the Junit5 extension mechanism (<a href="https://junit.org/junit5/docs/current/user-guide/#extensions" class="bare">https://junit.org/junit5/docs/current/user-guide/#extensions</a>).
During the migration to Junit5, all the instances of the mentioned types need to be rewritten according to the Junit5 User Guide.
The extension mechanism is far more flexible than the Junit4 functionality based on rules.</p>
</div>
<div class="paragraph">
<p><strong>Note</strong>: as per Junit5 API spec: <code>ExpectedExceptionSupport, ExternalResourceSupport, VerifierSupport</code>
provide native support of the correspoinding Junit4 rules.</p>
</div>
<div class="paragraph">
<p>Extension registration example:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/home/runner/work/devonfw.github.io/devonfw.github.io/target/generated-docs/images/migration02.png" alt="migration02">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="/home/runner/work/devonfw.github.io/devonfw.github.io/target/generated-docs/images/migration_arrow_down.png" alt="migration arrow down">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="/home/runner/work/devonfw.github.io/devonfw.github.io/target/generated-docs/images/migration03.png" alt="migration03">
</div>
</div>
<div class="paragraph">
<p>TestRule (<code>TestWatcher</code> and <code>ExternalResource</code>) to Extension (<code>TestWatcher</code> and <code>AfterAllCallback</code>) example:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/home/runner/work/devonfw.github.io/devonfw.github.io/target/generated-docs/images/migration04.png" alt="migration04">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="/home/runner/work/devonfw.github.io/devonfw.github.io/target/generated-docs/images/migration_arrow_down.png" alt="migration arrow down">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="/home/runner/work/devonfw.github.io/devonfw.github.io/target/generated-docs/images/migration05.png" alt="migration05">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="devonfw-guide_mrchecker.wiki_migration_migration-guide.asciidoc_page">Page, BasePageAutoRegistration and PageFactory classes</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>Page</code> class is a new MrChecker class. It was introduced to provide common implemenation for its subpages in specific MrChecker modules.
In order to receive test lifecycle notifications, particular <code>Pages</code> need to be registered by calling <code>addToTestExecutionObserver()</code> method.
To facilitate this process, <code>PageFactory</code> class was designed and it’s usage is a recommended way of creating <code>Page</code> objects for tests.
Although in MrChecker based on Junit4, the registration process was done in a specific <code>BasePage</code> constructor, it’s been considered error prone and reimplemented.
Furthermore, to reduce migration cost <code>BasePageAutoRegistration</code> classes are available in MrChceker modules. They use the old way of registration.
Given that three ways of migration are possible.</p>
</div>
<div class="paragraph">
<p>Migration with <code>PageFactory</code> class example <strong>(RECOMMENDED)</strong>:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/home/runner/work/devonfw.github.io/devonfw.github.io/target/generated-docs/images/migration06.png" alt="migration06">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="/home/runner/work/devonfw.github.io/devonfw.github.io/target/generated-docs/images/migration_arrow_down.png" alt="migration arrow down">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="/home/runner/work/devonfw.github.io/devonfw.github.io/target/generated-docs/images/migration07.png" alt="migration07">
</div>
</div>
<div class="paragraph">
<p>Migration with calling <code>addToTestExecutionObserver()</code> method example:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/home/runner/work/devonfw.github.io/devonfw.github.io/target/generated-docs/images/migration06.png" alt="migration06">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="/home/runner/work/devonfw.github.io/devonfw.github.io/target/generated-docs/images/migration_arrow_down.png" alt="migration arrow down">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="/home/runner/work/devonfw.github.io/devonfw.github.io/target/generated-docs/images/migration08.png" alt="migration08">
</div>
</div>
<div class="paragraph">
<p>Migration with <code>BasePageAutoRegistration</code> class example:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/home/runner/work/devonfw.github.io/devonfw.github.io/target/generated-docs/images/migration09.png" alt="migration09">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="/home/runner/work/devonfw.github.io/devonfw.github.io/target/generated-docs/images/migration_arrow_down.png" alt="migration arrow down">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="/home/runner/work/devonfw.github.io/devonfw.github.io/target/generated-docs/images/migration10.png" alt="migration10">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="devonfw-guide_mrchecker.wiki_migration_migration-guide.asciidoc_test-suites">Test suites</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Test suite migration example:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/home/runner/work/devonfw.github.io/devonfw.github.io/target/generated-docs/images/migration11.png" alt="migration11">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="/home/runner/work/devonfw.github.io/devonfw.github.io/target/generated-docs/images/migration_arrow_down.png" alt="migration arrow down">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="/home/runner/work/devonfw.github.io/devonfw.github.io/target/generated-docs/images/migration12.png" alt="migration12">
</div>
</div>
<div class="paragraph">
<p>Running tests from Maven:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/home/runner/work/devonfw.github.io/devonfw.github.io/target/generated-docs/images/migration13.png" alt="migration13">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="/home/runner/work/devonfw.github.io/devonfw.github.io/target/generated-docs/images/migration_arrow_down.png" alt="migration arrow down">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="/home/runner/work/devonfw.github.io/devonfw.github.io/target/generated-docs/images/migration14.png" alt="migration14">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="devonfw-guide_mrchecker.wiki_migration_migration-guide.asciidoc_concurrency">Concurrency</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Junit5 provides native thread count and parallel execution control in contrast to Junit4 where it was controlled by Maven Surefire plugin.
To enable concurrent test execution, <code>junit-platform.properties</code> file needs to placed in the <code>test/resources</code> directory of a project.</p>
</div>
<div class="paragraph">
<p>Exemplary file contents:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/home/runner/work/devonfw.github.io/devonfw.github.io/target/generated-docs/images/migration15.png" alt="migration15">
</div>
</div>
<div class="paragraph">
<p>A ready-to-use file can be found here.</p>
</div>
<div class="paragraph">
<p>MrChecker supports only concurrent test class execution.
<code>@ResourceLock</code> can be used to synchronize between classes if needed:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/home/runner/work/devonfw.github.io/devonfw.github.io/target/generated-docs/images/migration16.png" alt="migration16">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="devonfw-guide_mrchecker.wiki_migration_migration-guide.asciidoc_cucumber">Cucumber</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If Cucumber is used in a project, it is neccessary to change a hook class.
An exemplary hook source file for download can be found here.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="devonfw-guide_mrchecker.wiki_migration_migration-guide.asciidoc_data-driven-tests">Data driven tests</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Junit5 implements new approach to data driven tests by various data resolution mechanisms.</p>
</div>
<div class="paragraph">
<p>An example of method source parameters migration version one:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/home/runner/work/devonfw.github.io/devonfw.github.io/target/generated-docs/images/migration17.png" alt="migration17">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="/home/runner/work/devonfw.github.io/devonfw.github.io/target/generated-docs/images/migration_arrow_down.png" alt="migration arrow down">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="/home/runner/work/devonfw.github.io/devonfw.github.io/target/generated-docs/images/migration18.png" alt="migration18">
</div>
</div>
<div class="paragraph">
<p>An example of method source parameters migration version two:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/home/runner/work/devonfw.github.io/devonfw.github.io/target/generated-docs/images/migration17.png" alt="migration17">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="/home/runner/work/devonfw.github.io/devonfw.github.io/target/generated-docs/images/migration_arrow_down.png" alt="migration arrow down">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="/home/runner/work/devonfw.github.io/devonfw.github.io/target/generated-docs/images/migration19.png" alt="migration19">
</div>
</div>
<div class="paragraph">
<p>An example of method source in another class parameters migration:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/home/runner/work/devonfw.github.io/devonfw.github.io/target/generated-docs/images/migration20.png" alt="migration20">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="/home/runner/work/devonfw.github.io/devonfw.github.io/target/generated-docs/images/migration_arrow_down.png" alt="migration arrow down">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="/home/runner/work/devonfw.github.io/devonfw.github.io/target/generated-docs/images/migration21.png" alt="migration21">
</div>
</div>
<div class="paragraph">
<p>Providing parameters directly in annotations has no analogy in Junit5 and needs to be replaced with e.g. method source:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/home/runner/work/devonfw.github.io/devonfw.github.io/target/generated-docs/images/migration22.png" alt="migration22">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="/home/runner/work/devonfw.github.io/devonfw.github.io/target/generated-docs/images/migration_arrow_down.png" alt="migration arrow down">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="/home/runner/work/devonfw.github.io/devonfw.github.io/target/generated-docs/images/migration23.png" alt="migration23">
</div>
</div>
<div class="paragraph">
<p>An example of csv parameters source with no header line migration:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/home/runner/work/devonfw.github.io/devonfw.github.io/target/generated-docs/images/migration24.png" alt="migration24">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="/home/runner/work/devonfw.github.io/devonfw.github.io/target/generated-docs/images/migration_arrow_down.png" alt="migration arrow down">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="/home/runner/work/devonfw.github.io/devonfw.github.io/target/generated-docs/images/migration25.png" alt="migration25">
</div>
</div>
<div class="paragraph">
<p>An example of csv parameters source with the header line migration:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/home/runner/work/devonfw.github.io/devonfw.github.io/target/generated-docs/images/migration26.png" alt="migration26">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="/home/runner/work/devonfw.github.io/devonfw.github.io/target/generated-docs/images/migration_arrow_down.png" alt="migration arrow down">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="/home/runner/work/devonfw.github.io/devonfw.github.io/target/generated-docs/images/migration27.png" alt="migration27">
</div>
</div>
<div class="paragraph">
<p>An example of csv parameters source with object mapping migration step1:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/home/runner/work/devonfw.github.io/devonfw.github.io/target/generated-docs/images/migration28.png" alt="migration28">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="/home/runner/work/devonfw.github.io/devonfw.github.io/target/generated-docs/images/migration_arrow_down.png" alt="migration arrow down">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="/home/runner/work/devonfw.github.io/devonfw.github.io/target/generated-docs/images/migration29.png" alt="migration29">
</div>
</div>
<div class="paragraph">
<p>An example of csv parameters source with object mapping migration step 2:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/home/runner/work/devonfw.github.io/devonfw.github.io/target/generated-docs/images/migration30.png" alt="migration30">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="/home/runner/work/devonfw.github.io/devonfw.github.io/target/generated-docs/images/migration_arrow_down.png" alt="migration arrow down">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="/home/runner/work/devonfw.github.io/devonfw.github.io/target/generated-docs/images/migration31.png" alt="migration31">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="devonfw-guide_mrchecker.wiki_migration_migration-guide.asciidoc_setup-and-teardown">setUp() and tearDown()</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>BaseTest.setUp()</code> and <code>BaseTest.tearDown()</code> methods are now not abstract and need no implementation in subclasses. <code>@Override</code> when a custom implemenatation is needed.</p>
</div>
</div>
</div>
</div>
<div id="footer" class="footer">
<div class="openblock footerLinks">
<div class="content">
<div class="dlist linklist">
<dl>
<dt class="hdlist1">About</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="/website/pages/welcome/welcome.html">About devonfw</a></p>
</li>
<li>
<p><a href="/website/pages/docs/devonfw-guide_getting-started.wiki_introduction-why-should-i-use-devonfw.asciidoc_features.html">Features</a></p>
</li>
<li>
<p><a href="/website/pages/docs/devonfw-guide_devon4j.wiki_architecture.asciidoc.html#devonfw-guide_devon4j.wiki_architecture.asciidoc_technology-stack">Technology Stack</a></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="dlist linklist">
<dl>
<dt class="hdlist1">Explore</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="/website/pages/docs/devonfw-guide_getting-started.wiki_getting-started.asciidoc.html">Getting started</a></p>
</li>
<li>
<p><a href="/website/pages/docs/devonfw-guide_devon4j.wiki_architecture.asciidoc.html">Architecture</a></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="dlist linklist">
<dl>
<dt class="hdlist1">Docs</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="/website/pages/docs/devonfw-guide_ide.wiki_devonfw-ide-introduction.asciidoc.html">User guide</a></p>
</li>
<li>
<p><a href="/website/pages/docs/devonfw-guide_general_master-release-notes.asciidoc.html">Releases information</a></p>
</li>
<li>
<p><a href="/website/pages/docs/master.html">Wiki</a></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="dlist linklist">
<dl>
<dt class="hdlist1">Community</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/orgs/devonfw/people">Contributors</a></p>
</li>
<li>
<p><a href="https://github.com/devonfw/devonfw.github.io/blob/develop/README.asciidoc">Website Contribution</a></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="ulist footerFooter">
<ul>
<li>
<p><a href="https://devonfw.com/website/pages/docs/devonfw-guide_ide.wiki_LICENSE.asciidoc.html">Terms of Use</a></p>
</li>
<li>
<p><a href="https://github.com/devonfw">Support</a></p>
</li>
</ul>
</div>
</div>
    <script>
      let bb = document.getElementById('menu-button');
      bb.addEventListener('click', function() {
        document.querySelector('.website-navbar ul').classList.toggle('visible');
        console.log(document.querySelector('.website-navbar ul'))
      })
    </script>
    <script type="module">
      import { EditLinksModule } from '/website/shared/editlinks.js';

      let alwaysVisible = true;
      if(document.location.pathname.endsWith("pages/welcome/welcome.html")) {
        alwaysVisible = false;
      }
      EditLinksModule.addEditLinks(alwaysVisible);
    </script>
    <script src="/website/assets/scripts/popper.min.js"></script>
    <script src="/website/assets/scripts/bootstrap.min.js"></script>
<div class="footnote"><sub>

Last updated 2022-06-27 09:02:20 UTC
</sub></div>
</div>
</div>
<link rel="stylesheet" type="text/css" href="https://cginternal.devonfw.com/websitesnippets/main.css">
<script async src="https://cginternal.devonfw.com/websitesnippets/main.js"></script>
<script>
  if(!document.location.pathname.endsWith("pages/welcome/welcome.html")) {
    anchors.options.visible = 'always';
  }
  anchors.add();
</script>
<script>
  var internalUrls = ["https://cginternal.devonfw.com/websitesnippets/"];
  $(".internal").each(function(){
    internalUrls.forEach((internalUrl, index) => {
      $.ajax({url: internalUrl + $(this).text() + "/index.html" })
      .then(r => {
        var leftDiv = $('<div class="info"><span class="infoText">Internal</span><img class="infoImage" src="' + internalUrl + 'logo.png"/></div>');
        var rightFirstDiv = $('<div class="message">This is only visible inside of the corporate network.</div>');
        var rightLastDiv = $('<div class="content"></div>');
        rightLastDiv.html(r);
        var rightDiv = $('<div class="right"></div>');
        rightDiv.append(rightFirstDiv);
        rightDiv.append(rightLastDiv);
        $(this).html(leftDiv);
        $(this).append(rightDiv);
        $(this).addClass("internal-active");
        $(this).removeClass("internal");
      })
    });
	});
</script>
<script>
      let cookieName = 'cookie_consent';
      let expiryTime = new Date(2037, 11, 21);
      let today = new Date();
      let cookieConsentDeclinedDate = localStorage.getItem("cookie_consent_declined");
      let dateDiffHours = 0;
      let cookieConsentHtml = `
      <div id="cookie-consent">
        <p>
          We use cookies to perform analytics and enhance user experience. Do you accept to the use of cookies?
        </p>
        <p class="cookie-consent-buttons">
          <a id="decline-cookie-btn" class="btn white-button" href="javascript:void(0)">Decline</a>
          <a id="accept-cookie-btn" class="btn blue-button" href="javascript:void(0)">Accept</a>
        </p>
      </div>
      `;
      dateDiffHours = cookieConsentDeclinedDate ? Math.abs(cookieConsentDeclinedDate - today) / 36e5 : 0;
      if (document.cookie.indexOf(cookieName) < 0) {
        if (cookieConsentDeclinedDate) {
          if (dateDiffHours > 24) {
            $("body").append(cookieConsentHtml);
          }
        } else {
          $("body").append(cookieConsentHtml);
        }
      }
      $("#accept-cookie-btn").click(function() {
        document.cookie = `${cookieName}=accept;expires=${expiryTime};path=/`;
        localStorage.removeItem("cookie_consent_declined");
        consentGranted();
        $("#cookie-consent").hide();
      });
      $("#decline-cookie-btn").click(function() {
        localStorage.setItem("cookie_consent_declined", today);
        $("#cookie-consent").hide();
      });
</script>
</body>
</html>