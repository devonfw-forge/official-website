<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=">
<meta name="generator" content="Asciidoctor 1.5.8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- ******** SOCIAL MEDIA META ********** -->

<meta name="title" property="og:title" content="devonfw website">
<meta property="og:type" content="website">
<meta name="image" property="og:image" content="https://devonfw.com/images/devonfwwebsite.png">
<meta name="description" property="og:description" content="devonfw is the standard open source software development platform; Serving the full Software Delivery Life Cycle.">
<meta property="og:url" content="https://devonfw.com/index.html">

<meta name="twitter:title" content="devonfw website">
<meta name="twitter:description" content="devonfw is the standard open source software development platform; Serving the full Software Delivery Life Cycle.">
<meta name="twitter:image" content="https://devonfw.com/images/devonfwwebsite.png">
<meta name="twitter:card" content="summary_large_image">

<!-- ************************************* -->


<title>Components</title>
<!-- devonfw website stylesheet -->
<link rel="stylesheet" type="text/css" href="/devonfw.css">
<!-- Lunr -->
<script src="/website/assets/scripts/lunr.min.js"></script>
<!-- JQuery -->
<script src="/website/assets/scripts/jquery.min.js"></script>
<link rel="stylesheet" href="/website/assets/styles/font-awesome.min.css">
<link rel="stylesheet" href="/website/assets/styles/googlecode.min.css">
<script src="/website/assets/scripts/highlight.min.js"></script>
<script src="/website/assets/scripts/common.min.js"></script>
<script>hljs.initHighlightingOnLoad()</script>
<link rel="stylesheet" href="/website/assets/styles/bootstrap.min.css">

<script src="/website/assets/scripts/anchor.min.js"></script>

<script src="/website/components/header/search-engine/bundle.js"></script>

<script src="/website/shared/rightmenu.js"></script>

<!-- ************** Google analytics ************ -->
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}

gtag('consent', 'default', {
  'analytics_storage': 'denied'
});
</script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-151636804-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-151636804-1');
</script>
<script>
  function consentGranted() {
    gtag('consent', 'update', {
      'analytics_storage': 'granted'
    });
  }
</script>

<!-- ******************************************** -->


</head>
<body class="article">
<div id="website-navbar" class="website-navbar">
<button id="menu-button" class="menu-button">
  <img src="/images/menu-button.svg" width="32px" height="32px" alt=""/>
</button>

<ul>
<li>
<p><span class="image"><a class="image" href="/website/pages/welcome/welcome.html"><img alt="logo" src="/images/Logo_devonfw.svg"></a></span></p>
</li>
<li>
<p><a href="https://killercoda.com/devonfw">Tutorials</a></p>
</li>
<li>
<p><a href="/website/pages/solutions/index.html">Solutions</a></p>
</li>
<li>
<p><a href="/website/pages/docs/master.html">Docs</a></p>
</li>
</ul>

<form class="form-inline">
  <div class="search-bar">
    <input
      id="search-field"
      type="search"
      class="form-control mr-sm-2"
      placeholder="Search by keyword(s)..."
      aria-label="Search"
      style="height: auto;"
      autocomplete="off"/>
    <div class="sb-res-pos px-4">
      <div id="click-outside" class="click-outside z-50 hidden"></div>
      <div class="col rounded px-0 border z-100 bg-white hidden search-bar-results" id="search-results-box">
      </div>
    </div>
  </div>
</form>
<a class="navbar-github text-white" href="https://github.com/devonfw/">
  <img src="/images/github-mark.png" width=auto height=auto alt="">
</a></div>
<div id="sidebar" class="wiki-sidebar"></div>

<div id="content" class="mt-4 mt-sm-5">
<div class="toc2">
<div class="title">Table of Contents</div>
<ul class="sectlevel0">
<li><a href="#devonfw-guide_jump-the-queue.wiki_devon4j-components.asciidoc">Components</a>
<ul class="sectlevel1">
<li><a href="#devonfw-guide_jump-the-queue.wiki_devon4j-components.asciidoc_principles">Principles</a>
<ul class="sectlevel2">
<li><a href="#devonfw-guide_jump-the-queue.wiki_devon4j-components.asciidoc_component-structure">Component Structure</a></li>
<li><a href="#devonfw-guide_jump-the-queue.wiki_devon4j-components.asciidoc_component-core">Component Core</a></li>
</ul>
</li>
<li><a href="#devonfw-guide_jump-the-queue.wiki_devon4j-components.asciidoc_create-your-components">Create your Components</a>
<ul class="sectlevel2">
<li><a href="#devonfw-guide_jump-the-queue.wiki_devon4j-components.asciidoc_the-database">The Database</a></li>
<li><a href="#devonfw-guide_jump-the-queue.wiki_devon4j-components.asciidoc_the-core-of-the-components">The Core of the Components</a></li>
<li><a href="#devonfw-guide_jump-the-queue.wiki_devon4j-components.asciidoc_the-component-structure-using-cobigen">The Component Structure (using CobiGen)</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<h1 id="devonfw-guide_jump-the-queue.wiki_devon4j-components.asciidoc" class="sect0">Components</h1>
<div class="imageblock">
<div class="content">
<img src="/home/runner/work/devonfw.github.io/devonfw.github.io/target/generated-docs/images/devon4j/4.Components/architecture.png" alt="Architecture" width="700">
</div>
</div>
<div class="paragraph">
<p>When working with <em>devon4j</em> the recommended approach for designing an applications is <em>Component Oriented Design</em>. Each component will represent a significant part (or feature) of our application related to <em>CRUD</em> operations. Internally, the components will be divided into three layers (<code>service</code>, <code>logic</code>, and <code>dataaccess</code>) and will communicate in two directions: service with database or&#8201;&#8212;&#8201;in the <em>logic</em> layer&#8201;&#8212;&#8201;a component with another component.</p>
</div>
<div class="sect1">
<h2 id="devonfw-guide_jump-the-queue.wiki_devon4j-components.asciidoc_principles">Principles</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The benefits of dividing our application into components are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://en.wikipedia.org/wiki/Separation_of_concerns">separation of concerns</a></p>
</li>
<li>
<p><a href="https://en.wikipedia.org/wiki/Reusability">reusability</a></p>
</li>
<li>
<p>to avoid <a href="https://en.wikipedia.org/wiki/Redundant_code">redundant code</a></p>
</li>
<li>
<p><a href="https://en.wikipedia.org/wiki/Information_hiding">information hiding</a></p>
</li>
<li>
<p>self contained, descriptive and stable component <a href="https://en.wikipedia.org/wiki/Application_programming_interface">APIs</a></p>
</li>
<li>
<p><a href="https://en.wikipedia.org/wiki/Data_consistency">data consistency</a> (a component is responsible for its data and changes to this data shall only happen via the component)</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="devonfw-guide_jump-the-queue.wiki_devon4j-components.asciidoc_component-structure">Component Structure</h3>
<div class="paragraph">
<p>A component consists of three packages, which correspond to the three layers defined by the <em>devon4j</em> architecture: <code>service</code>, <code>logic</code> and <code>dataaccess</code>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/home/runner/work/devonfw.github.io/devonfw.github.io/target/generated-docs/images/devon4j/4.Components/layers.png" alt="Component Layers" width="300">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><em>Service</em> layer: exposes the REST API to exchange information with client applications</p>
</li>
<li>
<p><em>Logic</em> layer: in charge of hosting the business logic of the application</p>
</li>
<li>
<p><em>Data Access</em> layer: communicates with the database</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Apart from that, most components will have a fourth package&#8201;&#8212;&#8201;<em>common</em>&#8201;&#8212;&#8201;to store shared elements, which will be used by all layers of the component. It will contain common <em>interfaces</em>, <em>constants</em>, <em>exceptions</em> or <em>enumerations</em>.</p>
</div>
</div>
<div class="sect2">
<h3 id="devonfw-guide_jump-the-queue.wiki_devon4j-components.asciidoc_component-core">Component Core</h3>
<div class="paragraph">
<p>As we mentioned earlier, each component will be related to a functionality. This functionality will be represented in code by an <em>Entity</em> that defines all the properties needed to wrap the logic of that feature.</p>
</div>
<div class="paragraph">
<p>This <em>Entity</em> represents the "core" of the component and will be located in the <code>dataaccess.api</code> package.</p>
</div>
<div class="paragraph">
<p>The naming convention for these entities in <em>devon4j</em> is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[Target]Entity</pre>
</div>
</div>
<div class="paragraph">
<p>"Target" should match the name of the related table in the database&#8201;&#8212;&#8201;although this is not mandatory.</p>
</div>
<div class="paragraph">
<p>Basically, each <em>Entity</em> is a <a href="https://en.wikipedia.org/wiki/Plain_old_Java_object">POJO</a> (plain old Java object) that will be mapped to a table in the database and represent each column via a suitable property.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/home/runner/work/devonfw.github.io/devonfw.github.io/target/generated-docs/images/devon4j/4.Components/example_entity.png" alt="Example Entity" width="800">
</div>
<div class="title">Example: An entity and its corresponding table in the DB (taken from another application).</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="devonfw-guide_jump-the-queue.wiki_devon4j-components.asciidoc_create-your-components">Create your Components</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We are now going to create our first app components. Our example application needs to provide two basic functionalities:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>register a user (returning an access code)</p>
</li>
<li>
<p>show registered queue members</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To accomplish this we are going to work with three entities; <em>Visitor</em>, <em>Queue</em> and <code><em>AccessCode</em></code>:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/home/runner/work/devonfw.github.io/devonfw.github.io/target/generated-docs/images/devon4j/4.Components/jtq_entities.png" alt="JumpTheQueue Entities" width="750">
</div>
</div>
<div class="paragraph">
<p>The components will be defined as follows:</p>
</div>
<table class="tableblock frame-all grid-all" style="width: 100%;">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Visitor</th>
<th class="tableblock halign-left valign-top">Access Code</th>
<th class="tableblock halign-left valign-top">Daily Queue</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>username</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ticketNumber</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>creationTime</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>logo</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>password</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>startTime</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>password</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>phoneNumber</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>endTime</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>currentNumber</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>acceptedCommercial</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8201;&#8212;&#8201;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>attentionTime</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>acceptedTerms</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8201;&#8212;&#8201;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>minAttentionTime</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>userType</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8201;&#8212;&#8201;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>active</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8201;&#8212;&#8201;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8201;&#8212;&#8201;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>customers</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>In addition, we will have to represent two relationships:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The <a href="https://en.wikipedia.org/wiki/One-to-one_(data_model)">one to one</a> relation between <em>Visitor</em> and <em>Access Code</em>.</p>
</li>
<li>
<p>The <a href="https://en.wikipedia.org/wiki/One-to-many_(data_model)">one to many</a> relation between <em>Daily Queue</em> and <em>Access Code</em>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Now is the moment to decide about the components of our app. The low complexity of the functionality would allow us to create only one component for managing all entities. In order to clarify the example we are going to create three managing components however; one for <em>Visitor</em>, one for <em>Access Code</em> and one for <em>Daily Queue</em>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="icon-note" title=""></i>
</td>
<td class="content">
<div class="paragraph">
<p>If you feel more comfortable managing all the entities in a single component, you could also do it this way. The result will be the same, the only difference will be the structure of some elements and the distribution of code inside the packages.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="devonfw-guide_jump-the-queue.wiki_devon4j-components.asciidoc_the-database">The Database</h3>
<div class="paragraph">
<p>Projects created with the <em>devon4j</em> archetype already contain a pre-defined database schema, which we can use as a basis to create our own. We are going to utilize the <a href="http://www.h2database.com/html/main.html">H2 Database Engine</a>, because our generated <em>devon4j</em> application uses it by default.</p>
</div>
<div class="paragraph">
<p>There are four pre-defined database schemas:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>jtqj-core/src/main/resources/db/type/h2/V0001__Create_Sequence.sql
jtqj-core/src/main/resources/db/type/h2/V0002__Create_RevInfo.sql
jtqj-core/src/main/resources/db/type/h2/V0003__Create_BinaryObject.sql
jtqj-core/src/main/resources/db/migration/1.0/V0004__Add_blob_data.sql</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="icon-note" title=""></i>
</td>
<td class="content">
<div class="paragraph">
<p>May be you need to install some SQL editor from eclipse marketplace, or use an external one.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="devonfw-guide_jump-the-queue.wiki_devon4j-components.asciidoc__visitor_-table"><em>Visitor</em> Table</h4>
<div class="paragraph">
<p>We are going to create our own table for <em>Visitor(s)</em> by right-clicking the folder <code>/jtqj-core/src/main/resources/db/migration/1.0</code> and selecting <code>New &gt; File</code>. Following the naming scheme we are going to call it:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>V0005__Create_Visitor.sql</code></pre>
</div>
</div>
<div class="paragraph">
<p>A visitor will provide: <code>username</code>, <code>name</code>, <code>password</code>, <code>phoneNumber</code>, <code>acceptedCommercial</code> and <code>acceptedTerms</code> in order to obtain an <em>Access Code</em>. We need to represent this data in our table:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="sql language-sql">create table Visitor(
  id BIGINT NOT NULL AUTO_INCREMENT,
  modificationCounter INTEGER NOT NULL,
  username VARCHAR(255),
  name VARCHAR(255),
  password VARCHAR(255),
  phoneNumber VARCHAR(255),
  acceptedCommercial BOOL DEFAULT '0',
  acceptedTerms BOOL NOT NULL DEFAULT '0',
  userType BOOL DEFAULT '0',
  CONSTRAINT PK_Visitor PRIMARY KEY(id)
);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>id</code>: The <code>ID</code> of each visitor.</p>
</li>
<li>
<p><code>modificationCounter</code>: Used internally by <a href="https://en.wikipedia.org/wiki/Java_Persistence_API">JPA</a> to take care of <a href="https://en.wikipedia.org/wiki/Optimistic_concurrency_control">optimistic locking</a> for us.</p>
</li>
<li>
<p><code>username</code>: The visitors email address.</p>
</li>
<li>
<p><code>name</code>: The visitors name.</p>
</li>
<li>
<p><code>password</code>: The visitors password.</p>
</li>
<li>
<p><code>phoneNumber</code>: The visitors phone number.</p>
</li>
<li>
<p><code>acceptedCommercial</code>: A <code>boolean</code> to denote if the visitor has the accepted commercial agreements.</p>
</li>
<li>
<p><code>acceptedTerms</code>: A <code>boolean</code> to denote if the visitor has accepted the terms &amp; conditions.</p>
</li>
<li>
<p><code>userType</code>: Denotes the type of user.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="devonfw-guide_jump-the-queue.wiki_devon4j-components.asciidoc__daily-queue_-table"><em>Daily Queue</em> Table</h4>
<div class="paragraph">
<p>In a second table we will represent the <em>Daily Queue</em>, which will contain <code>name</code>, <code>logo</code>, <code>currentNumber</code>, <code>attentionTime</code>, <code>minAttentionTime</code>, <code>active</code> and <code>customers</code>. This table will be created in <code>/jtqj-core/src/main/resources/db/type/h2</code>, and is called:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>V0006__Create_Queue.sql</code></pre>
</div>
</div>
<div class="paragraph">
<p>It will contain the following declarations:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="sql language-sql">create table DailyQueue(
  id BIGINT NOT NULL AUTO_INCREMENT,
  modificationCounter INTEGER NOT NULL,
  name VARCHAR(255),
  logo VARCHAR(255),
  currentNumber VARCHAR(255),
  attentionTime TIMESTAMP,
  minAttentionTime TIMESTAMP NOT NULL DEFAULT '60000',
  active BOOL NOT NULL DEFAULT '1',
  customers INTEGER NOT NULL DEFAULT '0',
  CONSTRAINT PK_DailyQueue PRIMARY KEY(id)
);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>id</code>: The <code>ID</code> of each queue.</p>
</li>
<li>
<p><code>modificationCounter</code>: Used internally by <a href="https://en.wikipedia.org/wiki/Java_Persistence_API">JPA</a> to take care of <a href="https://en.wikipedia.org/wiki/Optimistic_concurrency_control">optimistic locking</a> for us.</p>
</li>
<li>
<p><code>name</code>: The queues name.</p>
</li>
<li>
<p><code>logo</code>: The queues logo.</p>
</li>
<li>
<p><code>currentNumber</code>: the queue&#8217;s number being attended.</p>
</li>
<li>
<p><code>attentionTime</code>: Average time required to attend a visitor.</p>
</li>
<li>
<p><code>minAttentionTime</code>: Minimum time required to attend a visitor, set by default.</p>
</li>
<li>
<p><code>active</code>: A <code>boolean</code> to denote if the queue is active.</p>
</li>
<li>
<p><code>customer</code>: The queues total number of customers.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="devonfw-guide_jump-the-queue.wiki_devon4j-components.asciidoc__access-code_-table"><em>Access Code</em> Table</h4>
<div class="paragraph">
<p>The third table will represent the <em>Access Code</em> and contain the <code>ticketNumber</code>, <code>creationTime</code>, <code>startTime</code> and <code>endTime</code>. This table will be created in <code>/jtqj-core/src/main/resources/db/type/h2</code>, and is called:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>V0007__Create_Access_Code.sql</code></pre>
</div>
</div>
<div class="paragraph">
<p>It will contain the following declarations:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="sql language-sql">CREATE TABLE AccessCode(
  id BIGINT NOT NULL AUTO_INCREMENT,
  modificationCounter INTEGER NOT NULL,
  ticketNumber VARCHAR(5),
  creationTime TIMESTAMP,
  startTime TIMESTAMP,
  endTime TIMESTAMP,
  idVisitor BIGINT NOT NULL,
  idQueue BIGINT NOT NULL,
  CONSTRAINT PK_AccessCode PRIMARY KEY(id),
  CONSTRAINT FK_AccessCode_idVisitor FOREIGN KEY(idVisitor) REFERENCES Visitor(id),
  CONSTRAINT FK_AccessCode_idQueue FOREIGN KEY(idQueue) REFERENCES DailyQueue(id)
);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>id</code>: The <code>ID</code> of each code.</p>
</li>
<li>
<p><code>modificationCounter</code>: Used internally by <a href="https://en.wikipedia.org/wiki/Java_Persistence_API">JPA</a> to take care of <a href="https://en.wikipedia.org/wiki/Optimistic_concurrency_control">optimistic locking</a> for us.</p>
</li>
<li>
<p><code>ticketNumber</code>: The number of the ticket for a queue.</p>
</li>
<li>
<p><code>creationTime</code>: The date and time of creation.</p>
</li>
<li>
<p><code>startTime</code>: The date and time, from which the code is valid.</p>
</li>
<li>
<p><code>endTime</code>: The date and time, when the code expires.</p>
</li>
<li>
<p><code>idVisitor</code>: The relation with the <em>Visitor</em> table.</p>
</li>
<li>
<p><code>idQueue</code>: The relation with the <code><em>DailyQueue</em></code> table.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="devonfw-guide_jump-the-queue.wiki_devon4j-components.asciidoc_mock-data">Mock Data</h4>
<div class="paragraph">
<p>Finally we are going to provide a certain amount of mock data, which will be available right from the start in our application. Create a new SQL script in <code>/jtqj-core/src/main/resources/db/migration/1.0/</code>, called:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>V0008__Master_data.sql</code></pre>
</div>
</div>
<div class="paragraph">
<p>Copy and paste the following data into it:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="sql language-sql">INSERT INTO Visitor (id, modificationCounter, username, name, password, phoneNumber, acceptedCommercial, acceptedTerms, userType) VALUES (0, 1, 'mike@mail.com', 'test', '1', '123456789', '0', '1', '1');
INSERT INTO Visitor (id, modificationCounter, username, name, password, phoneNumber, acceptedCommercial, acceptedTerms, userType) VALUES (1, 1, 'peter@mail.com', 'test', '1', '123456789', '1', '1', '0');
INSERT INTO Visitor (id, modificationCounter, username, name, password, phoneNumber, acceptedCommercial, acceptedTerms, userType) VALUES (2, 1, 'pablo@mail.com', 'test', '1', '123456789', '0', '1', '0');
INSERT INTO Visitor (id, modificationCounter, username, name, password, phoneNumber, acceptedCommercial, acceptedTerms, userType) VALUES (3, 1, 'test1@mail.com', 'test', '1', '123456789', '0', '1', '0');
INSERT INTO Visitor (id, modificationCounter, username, name, password, phoneNumber, acceptedCommercial, acceptedTerms, userType) VALUES (4, 1, 'test2@mail.com', 'test', '1', '123456789', '1', '1', '0');
INSERT INTO Visitor (id, modificationCounter, username, name, password, phoneNumber, acceptedCommercial, acceptedTerms, userType) VALUES (5, 1, 'test3@mail.com', 'test', '1', '123456789', '0', '1', '0');
INSERT INTO Visitor (id, modificationCounter, username, name, password, phoneNumber, acceptedCommercial, acceptedTerms, userType) VALUES (6, 1, 'test4@mail.com', 'test', '1', '123456789', '0', '1', '0');
INSERT INTO Visitor (id, modificationCounter, username, name, password, phoneNumber, acceptedCommercial, acceptedTerms, userType) VALUES (7, 1, 'test5@mail.com', 'test', '1', '123456789', '1', '1', '0');
INSERT INTO Visitor (id, modificationCounter, username, name, password, phoneNumber, acceptedCommercial, acceptedTerms, userType) VALUES (8, 1, 'test6@mail.com', 'test', '1', '123456789', '0', '1', '0');
INSERT INTO Visitor (id, modificationCounter, username, name, password, phoneNumber, acceptedCommercial, acceptedTerms, userType) VALUES (9, 1, 'test7@mail.com', 'test', '1', '123456789', '0', '1', '0');

INSERT INTO DailyQueue (id, modificationCounter, name, logo, currentNumber, attentionTime, minAttentionTime, active, customers) VALUES (1, 1, 'Day2', 'C:/logos/Day1Logo.png', 'Q001', NULL, '1970-01-01 00:01:00', TRUE, 9);

INSERT INTO AccessCode (id, modificationCounter, ticketNumber, creationTime, startTime, endTime, idVisitor, idQueue) VALUES (1, 1, 'Q001', CURRENT_TIMESTAMP, CURRENT_TIMESTAMP, NULL, 1, 1);
INSERT INTO AccessCode (id, modificationCounter, ticketNumber, creationTime, startTime, endTime, idVisitor, idQueue) VALUES (2, 1, 'Q002', CURRENT_TIMESTAMP, '2008-01-01 00:00:01', NULL, 2, 1);
INSERT INTO AccessCode (id, modificationCounter, ticketNumber, creationTime, startTime, endTime, idVisitor, idQueue) VALUES (3, 1, 'Q003', CURRENT_TIMESTAMP, '2008-01-01 00:00:01', NULL, 3, 1);
INSERT INTO AccessCode (id, modificationCounter, ticketNumber, creationTime, startTime, endTime, idVisitor, idQueue) VALUES (4, 1, 'Q004', CURRENT_TIMESTAMP, '2008-01-01 00:00:01', NULL, 4, 1);
INSERT INTO AccessCode (id, modificationCounter, ticketNumber, creationTime, startTime, endTime, idVisitor, idQueue) VALUES (5, 1, 'Q005', CURRENT_TIMESTAMP, '2008-01-01 00:00:01', NULL, 5, 1);
INSERT INTO AccessCode (id, modificationCounter, ticketNumber, creationTime, startTime, endTime, idVisitor, idQueue) VALUES (6, 1, 'Q006', CURRENT_TIMESTAMP, '2008-01-01 00:00:01', NULL, 6, 1);
INSERT INTO AccessCode (id, modificationCounter, ticketNumber, creationTime, startTime, endTime, idVisitor, idQueue) VALUES (7, 1, 'Q007', CURRENT_TIMESTAMP, '2008-01-01 00:00:01', NULL, 7, 1);
INSERT INTO AccessCode (id, modificationCounter, ticketNumber, creationTime, startTime, endTime, idVisitor, idQueue) VALUES (8, 1, 'Q008', CURRENT_TIMESTAMP, '2008-01-01 00:00:01', NULL, 8, 1);
INSERT INTO AccessCode (id, modificationCounter, ticketNumber, creationTime, startTime, endTime, idVisitor, idQueue) VALUES (9, 1, 'Q009', CURRENT_TIMESTAMP, '2008-01-01 00:00:01', NULL, 9, 1);</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="devonfw-guide_jump-the-queue.wiki_devon4j-components.asciidoc_the-core-of-the-components">The Core of the Components</h3>
<div class="paragraph">
<p>Now that we have defined the database for our entities, we should start creating the code of the related components.</p>
</div>
<div class="paragraph">
<p>We are going to use CobiGen to generate the component structure. That means that&#8201;&#8212;&#8201;as already commented&#8201;&#8212;&#8201;we can generate all the structure and layers starting from a <em>core</em> element: a simple <em>Plain Old Java Object</em> that represents our <em>Entity</em>. So, in order to use CobiGen, we have to create our entities in the expected locations (as you will see in the following section): <code>&lt;entitymanagement&gt;.dataaccess.api</code>.</p>
</div>
<div class="sect3">
<h4 id="devonfw-guide_jump-the-queue.wiki_devon4j-components.asciidoc__visitor_-component"><em>Visitor</em> Component</h4>
<div class="paragraph">
<p>To implement the component we will need to define a <code><em>VisitorEntity</em></code> to connect and manage the data of the <em>Visitor</em> table in the database. The name of this component will be <code>visitormanagement</code>, the entity will be called <code>VisitorEntity</code>.</p>
</div>
<div class="paragraph">
<p>Right-click on the root folder of the project <code>/jtqj-core/src/main/java</code>, select <code>New &gt; Package</code> and create the following package:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>com.devonfw.application.jtqj.visitormanagement.dataaccess.api</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="/home/runner/work/devonfw.github.io/devonfw.github.io/target/generated-docs/images/devon4j/4.Components/new_package_1.png" alt="New Package Creation Step 1" width="500">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="/home/runner/work/devonfw.github.io/devonfw.github.io/target/generated-docs/images/devon4j/4.Components/new_package_2.png" alt="New Package Creation Step 2" width="500">
</div>
</div>
<div class="paragraph">
<p>Now create a new Java class in this package and call it <code>VisitorEntity</code>:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/home/runner/work/devonfw.github.io/devonfw.github.io/target/generated-docs/images/devon4j/4.Components/new_class.png" alt="New Class Creation" width="500">
</div>
</div>
<div class="paragraph">
<p>We are going to need fields, which represent the data model, so our entity should contain the following code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="java language-java">  ...

  private String username;

  private String name;

  private String phoneNumber;

  private String password;

  private Boolean acceptedCommercial;

  private Boolean acceptedTerms;

  private Boolean userType;

  ...</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="icon-note" title=""></i>
</td>
<td class="content">
<div class="paragraph">
<p>We are not adding <code>id</code> or <code>modificationCounter</code>, because CobiGen will generate these fields for us.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Now we need to declare our entity as a <code>JPA</code> entity with the <code>@Entity</code> annotation (<code>javax.persistence.Entity</code>) at class level. To map the entity to the database table, we will use the <code>@Table</code> annotation (<code>javax.persistence.Table</code>) defining the <code>name</code> of our already created <em>Visitor</em> table (also at class level):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="java language-java">...

@Entity
@Table(name = "Visitor")
public class VisitorEntity {

  ...</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now we have to declare the <em>getter</em> and <em>setter</em> methods for the fields of our entity. We can do this manually or automatically generate them using Eclipse:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/home/runner/work/devonfw.github.io/devonfw.github.io/target/generated-docs/images/devon4j/4.Components/getter_setter.png" alt="Generating Getter and Setter Methods with Eclipse">
</div>
</div>
<div class="paragraph">
<p>The resulting implementation of our <code><em>VisitorEntity</em></code> class should now look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="java language-java">package com.devonfw.application.jtqj.visitormanagement.dataaccess.api;

import javax.persistence.Entity;
import javax.persistence.Table;

@Entity
@Table(name = "Visitor")
public class VisitorEntity {

  private String username;

  private String name;

  private String phoneNumber;

  private String password;

  private Boolean acceptedCommercial;

  private Boolean acceptedTerms;

  private Boolean userType;

  /**
   * @return the username
   */
  public String getUsername() {
    return username;
  }

  /**
   * @param username the username to set
   */
  public void setUsername(String username) {
    this.username = username;
  }

  /**
   * @return the name
   */
  public String getName() {
    return name;
  }

  /**
   * @param name the name to set
   */
  public void setName(String name) {
    this.name = name;
  }

  /**
   * @return the phoneNumber
   */
  public String getPhoneNumber() {
    return phoneNumber;
  }

  /**
   * @param phoneNumber the phoneNumber to set
   */
  public void setPhoneNumber(String phoneNumber) {
    this.phoneNumber = phoneNumber;
  }

  /**
   * @return the password
   */
  public String getPassword() {
    return password;
  }

  /**
   * @param password the password to set
   */
  public void setPassword(String password) {
    this.password = password;
  }

  /**
   * @return the acceptedCommercial
   */
  public Boolean getAcceptedCommercial() {
    return acceptedCommercial;
  }

  /**
   * @param acceptedCommercial the acceptedCommercial to set
   */
  public void setAcceptedCommercial(Boolean acceptedCommercial) {
    this.acceptedCommercial = acceptedCommercial;
  }

  /**
   * @return the acceptedTerms
   */
  public Boolean getAcceptedTerms() {
    return acceptedTerms;
  }

  /**
   * @param acceptedTerms the acceptedTerms to set
   */
  public void setAcceptedTerms(Boolean acceptedTerms) {
    this.acceptedTerms = acceptedTerms;
  }

  /**
   * @return the userType
   */
  public Boolean getUserType() {
    return userType;
  }

  /**
   * @param userType the userType to set
   */
  public void setUserType(Boolean userType) {
    this.userType = userType;
  }

}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="devonfw-guide_jump-the-queue.wiki_devon4j-components.asciidoc__accesscode_-component"><code><em>AccessCode</em></code> component</h4>
<div class="paragraph">
<p>We are going to repeat the same process for the <code><em>AccessCode</em></code> component. Create these packages in <code>/jtqj-core/src/main/java</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>com.devonfw.application.jtqj.accesscodemanagement.dataaccess.api</code></pre>
</div>
</div>
<div class="paragraph">
<p>... and create a class called <code>AccessCodeEntity</code> inside of them.<br>
We will end up with the following structure:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/home/runner/work/devonfw.github.io/devonfw.github.io/target/generated-docs/images/devon4j/4.Components/accesscode_entity.png" alt="`AccessCode` Entity" width="250">
</div>
</div>
<div class="paragraph">
<p>The contents of <code><em>AccessCodeEntity</em></code> before using CobiGen will be:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="java language-java">package com.devonfw.application.jtqj.accesscodemanagement.dataaccess.api;

import java.sql.Timestamp;

import javax.persistence.CascadeType;
import javax.persistence.Entity;
import javax.persistence.FetchType;
import javax.persistence.JoinColumn;
import javax.persistence.ManyToOne;
import javax.persistence.OneToOne;
import javax.persistence.Table;
import javax.persistence.Temporal;
import javax.persistence.TemporalType;
import javax.validation.constraints.Size;

import com.devonfw.application.jtqj.visitormanagement.dataaccess.api.VisitorEntity;

@Entity
@Table(name = "AccessCode")
public class AccessCodeEntity {

  @Size(min = 2, max = 5)
  private String ticketNumber;

  @Temporal(TemporalType.TIMESTAMP)
  private Timestamp creationTime;

  @Temporal(TemporalType.TIMESTAMP)
  private Timestamp startTime;

  @Temporal(TemporalType.TIMESTAMP)
  private Timestamp endTime;

  private VisitorEntity visitor;

  private QueueEntity queue;

  /**
   * @return the ticketNumber
   */
  public String getTicketNumber() {
    return ticketNumber;
  }

  /**
   * @param ticketNumber the ticketNumber to set
   */
  public void setTicketNumber(String ticketNumber) {
    this.ticketNumber = ticketNumber;
  }

  /**
   * @return the creationTime
   */
  public Timestamp getCreationTime() {
    return creationTime;
  }

  /**
   * @param creationTime the creationTime to set
   */
  public void setCreationTime(Timestamp creationTime) {
    this.creationTime = creationTime;
  }

  /**
   * @return the startTime
   */
  public Timestamp getStartTime() {
    return startTime;
  }

  /**
   * @param startTime the startTime to set
   */
  public void setStartTime(Timestamp startTime) {
    this.startTime = startTime;
  }

  /**
   * @return the endTime
   */
  public Timestamp getEndTime() {
    return endTime;
  }

  /**
   * @param endTime the endTime to set
   */
  public void setEndTime(Timestamp endTime) {
    this.endTime = endTime;
  }

  /**
   * @return the visitor
   */
  @OneToOne(cascade = CascadeType.DETACH, fetch = FetchType.EAGER)
  @JoinColumn(name = "idVisitor")
  public VisitorEntity getVisitor() {
    return visitor;
  }

  /**
   * @param visitor the visitor to set
   */
  public void setVisitor(VisitorEntity visitor) {
    this.visitor = visitor;
  }

  /**
   * @return the queue
   */
  @ManyToOne(cascade = CascadeType.DETACH, fetch = FetchType.EAGER)
  @JoinColumn(name = "idQueue")
  public QueueEntity getQueue() {
    return queue;
  }

  /**
   * @param queue the queue to set
   */
  public void setQueue(QueueEntity queue) {
    this.queue = queue;
  }

}</code></pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="icon-warning" title=""></i>
</td>
<td class="content">
<div class="paragraph">
<p>Eclipse will report some errors related to <code>QueueEntity</code>.<br>
These will be resolved, when we create the corresponding class in the next step.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="devonfw-guide_jump-the-queue.wiki_devon4j-components.asciidoc__queue_-component"><em>Queue</em> Component</h4>
<div class="paragraph">
<p>Finally, we are going to repeat the same process for our last entity <code><em>QueueEntity</em></code> component. Create these packages in <code>/jtqj-core/src/main/java</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>com.devonfw.application.jtqj.queuemanagement.dataaccess.api</code></pre>
</div>
</div>
<div class="paragraph">
<p>... and create a class called <code>QueueEntity</code> inside of them.<br>
We will end up with the following structure:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/home/runner/work/devonfw.github.io/devonfw.github.io/target/generated-docs/images/devon4j/4.Components/queue_entity.png" alt="Queue Entity" width="250">
</div>
</div>
<div class="paragraph">
<p>The contents of <code><em>QueueEntity</em></code> before using CobiGen will be:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="java language-java">package com.devonfw.application.jtqj.queuemanagement.dataaccess.api;

import java.sql.Timestamp;

import javax.persistence.Entity;
import javax.persistence.Table;
import javax.persistence.Temporal;
import javax.persistence.TemporalType;

@Entity
@Table(name = "DailyQueue")
public class QueueEntity {

  private String name;

  private String logo;

  private String currentNumber;

  @Temporal(TemporalType.TIMESTAMP)
  private Timestamp attentionTime;

  @Temporal(TemporalType.TIMESTAMP)
  private Timestamp minAttentionTime;

  private Boolean active;

  private int customers;

  /**
   * @return the name
   */
  public String getName() {
    return name;
  }

  /**
   * @param name the name to set
   */
  public void setName(String name) {
    this.name = name;
  }

  /**
   * @return the logo
   */
  public String getLogo() {
    return logo;
  }

  /**
   * @param logo the logo to set
   */
  public void setLogo(String logo) {
    this.logo = logo;
  }

  /**
   * @return the currentNumber
   */
  public String getCurrentNumber() {
    return currentNumber;
  }

  /**
   * @param currentNumber the currentNumber to set
   */
  public void setCurrentNumber(String currentNumber) {
    this.currentNumber = currentNumber;
  }

  /**
   * @return the attentionTime
   */
  public Timestamp getAttentionTime() {
    return attentionTime;
  }

  /**
   * @param attentionTime the attentionTime to set
   */
  public void setAttentionTime(Timestamp attentionTime) {
    this.attentionTime = attentionTime;
  }

  /**
   * @return the minAttentionTime
   */
  public Timestamp getMinAttentionTime() {
    return minAttentionTime;
  }

  /**
   * @param minAttentionTime the minAttentionTime to set
   */
  public void setMinAttentionTime(Timestamp minAttentionTime) {
    this.minAttentionTime = minAttentionTime;
  }

  /**
   * @return the active
   */
  public Boolean getActive() {
    return active;
  }

  /**
   * @param active the active to set
   */
  public void setActive(Boolean active) {
    this.active = active;
  }

  /**
   * @return the customers
   */
  public int getCustomers() {
    return customers;
  }

  /**
   * @param customers the customers to set
   */
  public void setCustomers(int customers) {
    this.customers = customers;
  }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now we have finished preparing the <em>core</em> of our components and can start using CobiGen to generate the remaining structure (services, layers, DAOs, &#8230;&#8203;).</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="icon-important" title=""></i>
</td>
<td class="content">
<div class="paragraph">
<p>Now we can resolve the compilation errors related to <code>QueueEntity</code> in the <code>AccessCodeEntity.java</code> by applying the suggestions of the IDE. To do this, open the offending file, click the first red light bulb on the left border of the editor and select <code>Import 'QueueEntity' (com.devonfw. &#8230;&#8203;)</code>.</p>
</div>
<div class="paragraph">
<p>Or just manually add this line to your import statements:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>import com.devonfw.application.jtqj.queuemanagement.dataaccess.api.QueueEntity;</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="devonfw-guide_jump-the-queue.wiki_devon4j-components.asciidoc_the-component-structure-using-cobigen">The Component Structure (using CobiGen)</h3>
<div class="paragraph">
<p>Once we are finished creating the <em>core</em> of our components we could continue to create the structure and all elements manually, but we are going to use CobiGen for these tasks, since we can save a significant amount of time and effort this way.</p>
</div>
<div class="paragraph">
<p>First however, we need to make sure that the CobiGen plugin is installed in our Eclipse instance:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/home/runner/work/devonfw.github.io/devonfw.github.io/target/generated-docs/images/devon4j/4.Components/cobigen_plugin_check.png" alt="CobiGen Plugin Check" width="550">
</div>
</div>
<div class="paragraph">
<p>If you don&#8217;t see this option in the dropdown menu, close Eclipse (remember to save all your progress) and in the <code>jump-the-queue</code> folder right-click to <code>Open a Devon `CMD</code> shell here`.</p>
</div>
<div class="paragraph">
<p>Now enter and execute:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>devon eclipse add-plugin cobigen</pre>
</div>
</div>
<div class="paragraph">
<p>... and re-open Eclipse via the <code>eclipse-main.bat</code> script.</p>
</div>
<div class="sect3">
<h4 id="devonfw-guide_jump-the-queue.wiki_devon4j-components.asciidoc_cobigen-health-check">CobiGen Health Check</h4>
<div class="paragraph">
<p>When using CobiGen for the first time it&#8217;s recommended to check the health of the tool.<br>
To do so, right-click one of our entities and select <code>CobiGen &gt; Health Check&#8230;&#8203;</code>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/home/runner/work/devonfw.github.io/devonfw.github.io/target/generated-docs/images/devon4j/4.Components/cobigen_health_1.png" alt="CobiGen Health Check 1" width="550">
</div>
</div>
<div class="paragraph">
<p>The next dialogs will show us if there are outdated templates. In that case just click the "Update" button. You can also run an <em>Advanced Health Check</em> to see exactly which CobiGen templates are available for this project.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/home/runner/work/devonfw.github.io/devonfw.github.io/target/generated-docs/images/devon4j/4.Components/cobigen_health_2.png" alt="CobiGen Health Check 2" width="550">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="/home/runner/work/devonfw.github.io/devonfw.github.io/target/generated-docs/images/devon4j/4.Components/cobigen_health_3.png" alt="CobiGen Health Check 3" width="400">
</div>
</div>
<div class="paragraph">
<p>In case you receive an error like this:
image::images/devon4j/4.Components/templates_not_found.png[CobiGen Health Check 3, 400]</p>
</div>
<div class="paragraph">
<p>You need to force download of templates as in the following image:
image::images/devon4j/4.Components/adapt-templates.png[CobiGen Health Check 3, 550]</p>
</div>
<div class="paragraph">
<p>Now the templates should be downloaded, and you will see a new folder in the workspace:
image::images/devon4j/4.Components/cobigen-folder.png[CobiGen Health Check 3, 400]</p>
</div>
</div>
<div class="sect3">
<h4 id="devonfw-guide_jump-the-queue.wiki_devon4j-components.asciidoc__queue_-component-structure-entity-without-relations"><em>Queue</em> Component Structure (Entity without Relations)</h4>
<div class="paragraph">
<p>In order to create the whole structure of a component with CobiGen we only need to right-click our component core entity (<code><em>QueueEntity</em></code>) and select <code>CobiGen &gt; Generate</code>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/home/runner/work/devonfw.github.io/devonfw.github.io/target/generated-docs/images/devon4j/4.Components/cobigen1.png" alt="CobiGen Generate" width="550">
</div>
</div>
<div class="paragraph">
<p>Now we&#8217;ll get to choose which packages we want to generate with the tool.</p>
</div>
<div class="paragraph">
<p>To get the needed functionalities for our component we are going to select <strong>all</strong> of the following packages <strong>at the same time</strong>:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/home/runner/work/devonfw.github.io/devonfw.github.io/target/generated-docs/images/devon4j/4.Components/cobigen3_allpackages.png" alt="CobiGen Package Selection">
</div>
</div>
<div class="paragraph">
<p>By default, all files will be selected for generation (which is what we want in this case), but you <em>could</em> also change which files will be generated by clicking <code>Customize</code>.</p>
</div>
<div class="paragraph">
<p>For now just click <code>Finish</code> and let CobiGen do its work.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="icon-note" title=""></i>
</td>
<td class="content">
<div class="paragraph">
<p>In detail the selected options do the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>CRUD <code>SpringData</code> Repository</em>: Generates the entity repository (that contains the CRUD operations) in the data access layer.</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="/home/runner/work/devonfw.github.io/devonfw.github.io/target/generated-docs/images/devon4j/4.Components/cobigen2_crud_springdata_repository.png" alt="CobiGen CRUD Spring Data Repository" width="650">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><em>CRUD REST Services</em>: Generates a complete service layer with CRUD operations for our entity exposed as a REST service.</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="/home/runner/work/devonfw.github.io/devonfw.github.io/target/generated-docs/images/devon4j/4.Components/cobigen2_crud_rest_services.png" alt="CobiGen CRUD REST Services" width="650">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><em>CRUD <code>UC</code> Logic</em>: Generates the logic layer dividing the implementation in different use cases.</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="/home/runner/work/devonfw.github.io/devonfw.github.io/target/generated-docs/images/devon4j/4.Components/cobigen2_crud_uc_logic.png" alt="CobiGen CRUD UC Logic" width="650">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><em>Entity Infrastructure</em>: Creates the entity main interface and edits (by a merge) the current entity to extend the devon classes.</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="/home/runner/work/devonfw.github.io/devonfw.github.io/target/generated-docs/images/devon4j/4.Components/cobigen2_entity_infrastructure.png" alt="CobiGen Entity Infrastructure" width="650">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><em>TO&#8217;s</em>: Generates the related <em>Transfer Objects</em>, that we will explain in next chapters of this tutorial.</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="/home/runner/work/devonfw.github.io/devonfw.github.io/target/generated-docs/images/devon4j/4.Components/cobigen2_to.png" alt="CobiGen Transfer Objects" width="650">
</div>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>During the process CobiGen will show a message asking us to review some ambiguous references, which we will get to right away. For now just click <code>Continue</code>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/home/runner/work/devonfw.github.io/devonfw.github.io/target/generated-docs/images/devon4j/4.Components/cobigen4_review_imports.png" alt="CobiGen Import Review">
</div>
</div>
<div class="paragraph">
<p>Once CobiGen has finished generating the new classes, we will check for and fix those ambiguous references if we need to introduce manual adjustments.</p>
</div>
<div class="paragraph">
<p>First, we need to adjust manually some imports related to <em>Timestamp</em> in:</p>
</div>
<div class="paragraph">
<p><strong><code>jtqj-core</code>:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>queuemanagement.dataaccess.api.repo.QueueRepository</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong><code>jtqj-api</code>:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>queuemanagement.common.api.Queue</code></p>
</li>
<li>
<p><code>queuemanagement.logic.api.to.QueueEto</code></p>
</li>
<li>
<p><code>queuemanagement.logic.api.to.QueueSearchCriteriaTo</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>We can fix these errors manually by adding <code><strong>import</strong> java.sql.Timestamp</code> to the affected Java files:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/home/runner/work/devonfw.github.io/devonfw.github.io/target/generated-docs/images/devon4j/4.Components/cobigen5_manual_import.png" alt="CobiGen Manual Import">
</div>
</div>
</div>
<div class="sect3">
<h4 id="devonfw-guide_jump-the-queue.wiki_devon4j-components.asciidoc__accesscode_-component-structure-entity-with-relations"><code><em>AccessCode</em></code> Component Structure (Entity with Relations)</h4>
<div class="paragraph">
<p>We repeat this process on our <code><em>AccessCodeEntity</em></code>, but in this case&#8201;&#8212;&#8201;since its an entity with relations&#8201;&#8212;&#8201;we are going to have to select different CobiGen options:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/home/runner/work/devonfw.github.io/devonfw.github.io/target/generated-docs/images/devon4j/4.Components/cobigen-accesscode-new.png" alt="CobiGen New `AccessCode`">
</div>
</div>
<div class="paragraph">
<p>After CobiGen has finished generating, fix the issues regarding <code><strong>import</strong> java.sql.Timestamp</code> (as you did in the last step) in the following files:</p>
</div>
<div class="paragraph">
<p><strong><code>jtqj-core</code>:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>accesscodemanagement.dataaccess.api.repo.AccessCodeRepository</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong><code>jtqj-api</code>:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>accesscodemanagement.common.api.AccessCode</code></p>
</li>
<li>
<p><code>accesscodemanagement.logic.api.to.AccessCodeEto</code></p>
</li>
<li>
<p><code>accesscodemanagement.logic.api.to.AccessCodeSearchCriteriaTo</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>There will be some compilation errors left. This is because we have some dependencies on <em>Queue</em> and <em>Visitor</em> component elements, that are not created yet. These compilation errors will be fixed in the next steps.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/home/runner/work/devonfw.github.io/devonfw.github.io/target/generated-docs/images/devon4j/4.Components/cobigen6_expected_errors.png" alt="CobiGen Expected Errors">
</div>
</div>
</div>
<div class="sect3">
<h4 id="devonfw-guide_jump-the-queue.wiki_devon4j-components.asciidoc__visitor_-component-structure-entity-without-relations"><em>Visitor</em> Component Structure (Entity without Relations)</h4>
<div class="paragraph">
<p>Finally we are going to generate the same classes that we generated for the <code><em>QueueEntity</em></code> component for our <code><em>VisitorEntity</em></code> component:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/home/runner/work/devonfw.github.io/devonfw.github.io/target/generated-docs/images/devon4j/4.Components/cobigen-visitor-new.png" alt="CobiGen New Visitor">
</div>
</div>
<div class="paragraph">
<p>Once CobiGen has finished we can fix the rest of the compilation errors related to <code>VisitorEto</code> by manually importing the class into:</p>
</div>
<div class="paragraph">
<p><strong><code>jtqj-core</code>:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>accesscodemanagement.logic.impl.usecase.UcFindAccessCodeImpl</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong><code>jtqj-api</code>:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>accesscodemanagement.logic.api.to.AccessCodeCto</code></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="devonfw-guide_jump-the-queue.wiki_devon4j-components.asciidoc_run-the-app">Run the App</h4>
<div class="paragraph">
<p>If all compilation errors are solved run the app (right-click <code>SpringBootApp.java &gt; Run As &gt; Java Application</code>). The back-end should launch without errors.</p>
</div>
<div class="paragraph">
<p><strong>Congratulations!</strong><br>
You have created your first devon4j components. You should be able to access the login screen via <a href="http://localhost:8081/jumpthequeue">localhost:8081/jumpthequeue</a>. You can login with the username and password "<strong>waiter</strong>". In the next chapter we will show and explain each of the created elements in detail.</p>
</div>
<hr>
<div class="paragraph">
<p><strong>Next Chapter</strong>: <a href="#devonfw-guide_jump-the-queue.wiki_devon4j-layers.asciidoc">devon4j Structure</a></p>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer" class="footer">
<div class="openblock footerLinks">
<div class="content">
<div class="dlist linklist">
<dl>
<dt class="hdlist1">About</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="/website/pages/welcome/welcome.html">About devonfw</a></p>
</li>
<li>
<p><a href="/website/pages/docs/devonfw-guide_getting-started.wiki_introduction-why-should-i-use-devonfw.asciidoc_features.html">Features</a></p>
</li>
<li>
<p><a href="/website/pages/docs/devonfw-guide_devon4j.wiki_architecture.asciidoc.html#devonfw-guide_devon4j.wiki_architecture.asciidoc_technology-stack">Technology Stack</a></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="dlist linklist">
<dl>
<dt class="hdlist1">Explore</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="/website/pages/docs/devonfw-guide_getting-started.wiki_getting-started.asciidoc.html">Getting started</a></p>
</li>
<li>
<p><a href="/website/pages/docs/devonfw-guide_devon4j.wiki_architecture.asciidoc.html">Architecture</a></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="dlist linklist">
<dl>
<dt class="hdlist1">Docs</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="/website/pages/docs/devonfw-guide_ide.wiki_devonfw-ide-introduction.asciidoc.html">User guide</a></p>
</li>
<li>
<p><a href="/website/pages/docs/devonfw-guide_general_master-release-notes.asciidoc.html">Releases information</a></p>
</li>
<li>
<p><a href="/website/pages/docs/master.html">Wiki</a></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="dlist linklist">
<dl>
<dt class="hdlist1">Community</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/orgs/devonfw/people">Contributors</a></p>
</li>
<li>
<p><a href="https://github.com/devonfw/devonfw.github.io/blob/develop/README.asciidoc">Website Contribution</a></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="ulist footerFooter">
<ul>
<li>
<p><a href="https://devonfw.com/website/pages/docs/devonfw-guide_ide.wiki_LICENSE.asciidoc.html">Terms of Use</a></p>
</li>
<li>
<p><a href="https://github.com/devonfw">Support</a></p>
</li>
</ul>
</div>
</div>
    <script>
      let bb = document.getElementById('menu-button');
      bb.addEventListener('click', function() {
        document.querySelector('.website-navbar ul').classList.toggle('visible');
        console.log(document.querySelector('.website-navbar ul'))
      })
    </script>
    <script type="module">
      import { EditLinksModule } from '/website/shared/editlinks.js';

      let alwaysVisible = true;
      if(document.location.pathname.endsWith("pages/welcome/welcome.html")) {
        alwaysVisible = false;
      }
      EditLinksModule.addEditLinks(alwaysVisible);
    </script>
    <script src="/website/assets/scripts/popper.min.js"></script>
    <script src="/website/assets/scripts/bootstrap.min.js"></script>
<div class="footnote"><sub>

Last updated 2022-06-30 16:53:04 UTC
</sub></div>
</div>
</div>
<link rel="stylesheet" type="text/css" href="https://cginternal.devonfw.com/websitesnippets/main.css">
<script async src="https://cginternal.devonfw.com/websitesnippets/main.js"></script>
<script>
  if(!document.location.pathname.endsWith("pages/welcome/welcome.html")) {
    anchors.options.visible = 'always';
  }
  anchors.add();
</script>
<script>
  var internalUrls = ["https://cginternal.devonfw.com/websitesnippets/"];
  $(".internal").each(function(){
    internalUrls.forEach((internalUrl, index) => {
      $.ajax({url: internalUrl + $(this).text() + "/index.html" })
      .then(r => {
        var leftDiv = $('<div class="info"><span class="infoText">Internal</span><img class="infoImage" src="' + internalUrl + 'logo.png"/></div>');
        var rightFirstDiv = $('<div class="message">This is only visible inside of the corporate network.</div>');
        var rightLastDiv = $('<div class="content"></div>');
        rightLastDiv.html(r);
        var rightDiv = $('<div class="right"></div>');
        rightDiv.append(rightFirstDiv);
        rightDiv.append(rightLastDiv);
        $(this).html(leftDiv);
        $(this).append(rightDiv);
        $(this).addClass("internal-active");
        $(this).removeClass("internal");
      })
    });
	});
</script>
<script>
      let cookieName = 'cookie_consent';
      let expiryTime = new Date(2037, 11, 21);
      let today = new Date();
      let cookieConsentDeclinedDate = localStorage.getItem("cookie_consent_declined");
      let dateDiffHours = 0;
      let cookieConsentHtml = `
      <div id="cookie-consent">
        <p>
          We use cookies to perform analytics and enhance user experience. Do you accept to the use of cookies?
        </p>
        <p class="cookie-consent-buttons">
          <a id="decline-cookie-btn" class="btn white-button" href="javascript:void(0)">Decline</a>
          <a id="accept-cookie-btn" class="btn blue-button" href="javascript:void(0)">Accept</a>
        </p>
      </div>
      `;
      dateDiffHours = cookieConsentDeclinedDate ? Math.abs(cookieConsentDeclinedDate - today) / 36e5 : 0;
      if (document.cookie.indexOf(cookieName) < 0) {
        if (cookieConsentDeclinedDate) {
          if (dateDiffHours > 24) {
            $("body").append(cookieConsentHtml);
          }
        } else {
          $("body").append(cookieConsentHtml);
        }
      }
      $("#accept-cookie-btn").click(function() {
        document.cookie = `${cookieName}=accept;expires=${expiryTime};path=/`;
        localStorage.removeItem("cookie_consent_declined");
        consentGranted();
        $("#cookie-consent").hide();
      });
      $("#decline-cookie-btn").click(function() {
        localStorage.setItem("cookie_consent_declined", today);
        $("#cookie-consent").hide();
      });
</script>
</body>
</html>