<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=">
<meta name="generator" content="Asciidoctor 1.5.8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- ******** SOCIAL MEDIA META ********** -->

<meta name="title" property="og:title" content="devonfw website">
<meta property="og:type" content="website">
<meta name="image" property="og:image" content="https://devonfw.com/images/devonfwwebsite.png">
<meta name="description" property="og:description" content="devonfw is the standard open source software development platform; Serving the full Software Delivery Life Cycle.">
<meta property="og:url" content="https://devonfw.com/index.html">

<meta name="twitter:title" content="devonfw website">
<meta name="twitter:description" content="devonfw is the standard open source software development platform; Serving the full Software Delivery Life Cycle.">
<meta name="twitter:image" content="https://devonfw.com/images/devonfwwebsite.png">
<meta name="twitter:card" content="summary_large_image">

<!-- ************************************* -->


<title>Logging</title>
<!-- devonfw website stylesheet -->
<link rel="stylesheet" type="text/css" href="/devonfw.css">
<!-- Lunr -->
<script src="/website/assets/scripts/lunr.min.js"></script>
<!-- JQuery -->
<script src="/website/assets/scripts/jquery.min.js"></script>
<link rel="stylesheet" href="/website/assets/styles/font-awesome.min.css">
<link rel="stylesheet" href="/website/assets/styles/googlecode.min.css">
<script src="/website/assets/scripts/highlight.min.js"></script>
<script src="/website/assets/scripts/common.min.js"></script>
<script>hljs.initHighlightingOnLoad()</script>
<link rel="stylesheet" href="/website/assets/styles/bootstrap.min.css">

<script src="/website/assets/scripts/anchor.min.js"></script>

<script src="/website/components/header/search-engine/bundle.js"></script>

<script src="/website/shared/rightmenu.js"></script>

<!-- ************** Google analytics ************ -->
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}

gtag('consent', 'default', {
  'analytics_storage': 'denied'
});
</script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-151636804-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-151636804-1');
</script>
<script>
  function consentGranted() {
    gtag('consent', 'update', {
      'analytics_storage': 'granted'
    });
  }
</script>

<!-- ******************************************** -->


</head>
<body class="article">
<div id="website-navbar" class="website-navbar">
<button id="menu-button" class="menu-button">
  <img src="/images/menu-button.svg" width="32px" height="32px" alt=""/>
</button>

<ul>
<li>
<p><span class="image"><a class="image" href="https://devonfw.com/"><img alt="logo" src="/images/Logo_devonfw.svg"></a></span></p>
</li>
<li>
<p><a href="https://devonfw.com/website/pages/learning/">Tutorials</a></p>
</li>
<li>
<p><a href="/website/pages/solutions/index.html">Solutions</a></p>
</li>
<li>
<p><a href="/website/pages/docs/master.html">Docs</a></p>
</li>
</ul>

<form class="form-inline">
  <div class="search-bar">
    <input
      id="search-field"
      type="search"
      class="form-control mr-sm-2"
      placeholder="Search by keyword(s)..."
      aria-label="Search"
      style="height: auto;"
      autocomplete="off"/>
    <div class="sb-res-pos px-4">
      <div id="click-outside" class="click-outside z-50 hidden"></div>
      <div class="col rounded px-0 border z-100 bg-white hidden search-bar-results" id="search-results-box">
      </div>
    </div>
  </div>
</form>
<a class="navbar-github text-white" href="https://github.com/devonfw/">
  <img src="/images/github-mark.png" width=auto height=auto alt="">
</a></div>
<div id="sidebar" class="wiki-sidebar"></div>

<div id="content" class="mt-4 mt-sm-5">
<div class="toc2">
<div class="title">Table of Contents</div>
<ul class="sectlevel0">
<li><a href="#devonfw-guide_devon4j.wiki_guide-logging.asciidoc">Logging</a>
<ul class="sectlevel1">
<li><a href="#devonfw-guide_devon4j.wiki_guide-logging.asciidoc_logging-dependencies">Logging Dependencies</a></li>
<li><a href="#devonfw-guide_devon4j.wiki_guide-logging.asciidoc_logger-access">Logger Access</a>
<ul class="sectlevel2">
<li><a href="#devonfw-guide_devon4j.wiki_guide-logging.asciidoc_lombok">Lombok</a></li>
</ul>
</li>
<li><a href="#devonfw-guide_devon4j.wiki_guide-logging.asciidoc_log-levels">Log-Levels</a>
<ul class="sectlevel2">
<li><a href="#devonfw-guide_devon4j.wiki_guide-logging.asciidoc_configuration-of-logback">Configuration of Logback</a></li>
<li><a href="#devonfw-guide_devon4j.wiki_guide-logging.asciidoc_configuration-in-quarkus">Configuration in Quarkus</a></li>
</ul>
</li>
<li><a href="#devonfw-guide_devon4j.wiki_guide-logging.asciidoc_json-logging">JSON-logging</a>
<ul class="sectlevel2">
<li><a href="#devonfw-guide_devon4j.wiki_guide-logging.asciidoc_adding-custom-values-to-json-log-with-logstash">Adding custom values to JSON log with Logstash</a></li>
</ul>
</li>
<li><a href="#devonfw-guide_devon4j.wiki_guide-logging.asciidoc_classic-log-files">Classic log-files</a>
<ul class="sectlevel2">
<li><a href="#devonfw-guide_devon4j.wiki_guide-logging.asciidoc_maven-integration">Maven-Integration</a></li>
<li><a href="#devonfw-guide_devon4j.wiki_guide-logging.asciidoc_log-files">Log Files</a></li>
<li><a href="#devonfw-guide_devon4j.wiki_guide-logging.asciidoc_output-format">Output format</a></li>
<li><a href="#devonfw-guide_devon4j.wiki_guide-logging.asciidoc_correlation-id">Correlation ID</a></li>
<li><a href="#devonfw-guide_devon4j.wiki_guide-logging.asciidoc_security">Security</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<h1 id="devonfw-guide_devon4j.wiki_guide-logging.asciidoc" class="sect0">Logging</h1>
<div class="paragraph">
<p>We recommend to use <a href="http://www.slf4j.org/">SLF4J</a> as API for logging, that has become a de facto standard in Java as it has a much better design than <code>java.util.logging</code> offered by the JDK.
There are serveral implementations for SLF4J. For Spring applications our recommended implementation is <a href="http://logback.qos.ch/">Logback</a>. Quarkus uses JBoss Logging which provides a JBoss Log Manager implementation for SLF4J. For more information on logging in Quarkus, see the <a href="https://quarkus.io/guides/logging">Quarkus logging guide</a>.</p>
</div>
<div class="sect1">
<h2 id="devonfw-guide_devon4j.wiki_guide-logging.asciidoc_logging-dependencies">Logging Dependencies</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To use Logback in your Spring application, you need to include the following dependencies:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="xml language-xml">&lt;!-- SLF4J as logging API --&gt;
&lt;dependency&gt;
  &lt;groupId&gt;org.slf4j&lt;/groupId&gt;
  &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;
&lt;/dependency&gt;
&lt;!-- Logback as logging implementation  --&gt;
&lt;dependency&gt;
  &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;
  &lt;artifactId&gt;logback-classic&lt;/artifactId&gt;
&lt;/dependency&gt;
&lt;!-- JSON logging for cloud-native log monitoring --&gt;
&lt;dependency&gt;
  &lt;groupId&gt;net.logstash.logback&lt;/groupId&gt;
  &lt;artifactId&gt;logstash-logback-encoder&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>In devon4j these dependencies are provided by the <a href="https://github.com/devonfw/devon4j/tree/master/modules/logging">devon4j-logging module</a>.</p>
</div>
<div class="paragraph">
<p>In Quarkus, SLF4J and the <a href="https://github.com/jboss-logging/slf4j-jboss-logmanager"><code>slf4j-jboss-logmanager</code></a> are directly included in the Quarkus core runtime and can be used out of the box.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="devonfw-guide_devon4j.wiki_guide-logging.asciidoc_logger-access">Logger Access</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The general pattern for accessing loggers from your code is a static logger instance per class using the following pattern:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="java language-java">import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

public class MyClass {
  private static final Logger LOG = LoggerFactory.getLogger(MyClass.class);
  ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>For detailed documentation how to use the logger API check the <a href="http://www.slf4j.org/manual.html">SLF4j manual</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="icon-note" title=""></i>
</td>
<td class="content">
In case you are using <a href="https://github.com/devonfw/ide">devonfw-ide</a> and Eclipse you can just type <code>LOG</code> and hit <code>[ctrl][space]</code> to insert the code pattern including the imports into your class.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="devonfw-guide_devon4j.wiki_guide-logging.asciidoc_lombok">Lombok</h3>
<div class="paragraph">
<p>In case you are using <a href="#devonfw-guide_devon4j.wiki_guide-lombok.asciidoc">Lombok</a>, you can simply use the <a href="https://projectlombok.org/api/lombok/extern/slf4j/Slf4j.html"><code>@Slf4j</code></a> annotation in your class. This causes Lombok to generate the logger instance for you.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="devonfw-guide_devon4j.wiki_guide-logging.asciidoc_log-levels">Log-Levels</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We use a common understanding of the log-levels as illustrated by the following table.
This helps for better maintenance and operation of the systems.</p>
</div>
<table class="tableblock frame-all grid-all" style="width: 100%;">
<caption class="title">Table 1. Log-levels</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Log-level</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
<th class="tableblock halign-left valign-top"><strong>Impact</strong></th>
<th class="tableblock halign-left valign-top"><strong>Active Environments</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">FATAL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Only used for fatal errors that prevent the application to work at all (e.g. startup fails or shutdown/restart required)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Operator has to react immediately</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">all</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ERROR</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An abnormal error indicating that the processing failed due to technical problems.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Operator should check for known issue and otherwise inform development</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">all</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">WARNING</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A situation where something worked not as expected. E.g. a business exception or user validation failure occurred.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No direct reaction required. Used for problem analysis.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">all</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">INFO</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Important information such as context, duration, success/failure of request or process</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No direct reaction required. Used for analysis.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">all</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DEBUG</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Development information that provides additional context for debugging problems.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No direct reaction required. Used for analysis.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">development and testing</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TRACE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Like DEBUG but exhaustive information and for code that is run very frequently. Will typically cause large log-files.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No direct reaction required. Used for problem analysis.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">none (turned off by default)</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Exceptions (with their stack trace) should only be logged on <code>FATAL</code> or <code>ERROR</code> level. For business exceptions typically a <code>WARNING</code> including the message of the exception is sufficient.</p>
</div>
<div class="sect2">
<h3 id="devonfw-guide_devon4j.wiki_guide-logging.asciidoc_configuration-of-logback">Configuration of Logback</h3>
<div class="paragraph">
<p>The configuration of logback happens via the <code>logback.xml</code> file that you should place into <code>src/main/resources</code> of your app.
For details consult the <a href="http://logback.qos.ch/manual/configuration.html">logback configuration manual</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="icon-note" title=""></i>
</td>
<td class="content">
Logback also allows to overrule the configuration with a <code>logback-test.xml</code> file that you may put into <code>src/test/resources</code> or into a test-dependency.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="devonfw-guide_devon4j.wiki_guide-logging.asciidoc_configuration-in-quarkus">Configuration in Quarkus</h3>
<div class="paragraph">
<p>The are several options you can set in the <code>application.properties</code> file to configure the behaviour of the logger in Quarkus. For a detailed overview, see the corresponding part of the <a href="https://quarkus.io/guides/logging#runtime-configuration">Quarkus guide</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="devonfw-guide_devon4j.wiki_guide-logging.asciidoc_json-logging">JSON-logging</h2>
<div class="sectionbody">
<div class="paragraph">
<p>For easy integration with <a href="#devonfw-guide_devon4j.wiki_guide-log-monitoring.asciidoc">log-monitoring</a>, we recommend that your app logs to <code>standard out</code> in JSON following <a href="https://jsonlines.org/">JSON Lines</a>.</p>
</div>
<div class="paragraph">
<p>In Spring applications, this can be achieved via <a href="https://github.com/logstash/logstash-logback-encoder">logstash-logback-encoder</a> (see <a href="#devonfw-guide_devon4j.wiki_guide-logging.asciidoc_dependencies">dependencies</a>). In Quarkus, it can be easily achieved using the <a href="https://github.com/quarkusio/quarkus/tree/main/extensions/logging-json">quarkus-logging-json</a> extension (see <a href="https://quarkus.io/guides/logging#json-logging">here</a> for more details).</p>
</div>
<div class="paragraph">
<p>This will produce log-lines with the following format (example formatted for readability):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="javascript language-javascript">{
  "timestamp":"2000-12-31T23:59:59.999+00:00",
  "@version":"1",
  "message":"Processing 4 order(s) for shipment",
  "logger_name":"com.myapp.order.logic.UcManageOrder",
  "thread_name":"http-nio-8081-exec-6",
  "level":"INFO",
  "level_value":20000,
  "appname":"myapp",
}</code></pre>
</div>
</div>
<div class="sect2">
<h3 id="devonfw-guide_devon4j.wiki_guide-logging.asciidoc_adding-custom-values-to-json-log-with-logstash">Adding custom values to JSON log with Logstash</h3>
<div class="paragraph">
<p>The JSON encoder even supports logging custom properties for your <a href="#devonfw-guide_devon4j.wiki_guide-log-monitoring.asciidoc">log-monitoring</a>.
The <em>trick</em> is to use the class <code>net.logstash.logback.argument.StructuredArguments</code> for adding the arguments to you log message, e.g.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="java language-java">import static net.logstash.logback.argument.StructuredArguments.v;

...
    LOG.info("Request with {} and {} took {} ms.", v("url", url), v("status", statusCode), v("duration", millis));
...</code></pre>
</div>
</div>
<div class="paragraph">
<p>This will produce the a JSON log-line with the following properties:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="javascript language-javascript">...
  "message":"Request with url=https://api/service/v1/ordermanagement/order and status=200 took duration=251 ms",
  "url":"https://api/service/v1/ordermanagement/order",
  "status":"200",
  "duration":"251",
...</code></pre>
</div>
</div>
<div class="paragraph">
<p>As you can quickly see besides the human readable <code>message</code> you also have the structured properties <code>url</code>, <code>status</code> and <code>duration</code> that can be extremly valuable to configure dashboards in your <a href="#devonfw-guide_devon4j.wiki_guide-log-monitoring.asciidoc">log-monitoring</a> that visualize success/failure ratio as well as performance of your requests.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="devonfw-guide_devon4j.wiki_guide-logging.asciidoc_classic-log-files">Classic log-files</h2>
<div class="sectionbody">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="icon-note" title=""></i>
</td>
<td class="content">
<strong>In devon4j, we strongly recommend using JSON logging instead of classic log files. The following section refers only to devon4j Spring applications that use Logback.</strong>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Even though we do not recommend anymore to write classical log-files to the local disc, here you can still find our approach for it.</p>
</div>
<div class="sect2">
<h3 id="devonfw-guide_devon4j.wiki_guide-logging.asciidoc_maven-integration">Maven-Integration</h3>
<div class="paragraph">
<p>In the <code>pom.xml</code> of your application add this dependency:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="xml language-xml">&lt;dependency&gt;
  &lt;groupId&gt;com.devonfw.java&lt;/groupId&gt;
  &lt;artifactId&gt;devon4j-logging&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The above dependency already adds transitive dependencies to SLF4J and logback.
Also it comes with <a href="https://github.com/devonfw/devon4j/tree/master/modules/logging/src/main/resources/com/devonfw/logging/logback">configration snipplets</a> that can be included from your <code>logback.xml</code> file (see <a href="#devonfw-guide_devon4j.wiki_guide-logging.asciidoc_configuration">configuration</a>).</p>
</div>
<div class="paragraph">
<p>The <code>logback.xml</code> to write regular log-files can look as following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="xml language-xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;configuration scan="true" scanPeriod="60 seconds"&gt;
  &lt;property resource="com/devonfw/logging/logback/application-logging.properties" /&gt;
  &lt;property name="appname" value="MyApp"/&gt;
  &lt;property name="logPath" value="../logs"/&gt;
  &lt;include resource="com/devonfw/logging/logback/appenders-file-all.xml" /&gt;
  &lt;include resource="com/devonfw/logging/logback/appender-console.xml" /&gt;

  &lt;root level="DEBUG"&gt;
    &lt;appender-ref ref="ERROR_APPENDER"/&gt;
    &lt;appender-ref ref="INFO_APPENDER"/&gt;
    &lt;appender-ref ref="DEBUG_APPENDER"/&gt;
    &lt;appender-ref ref="CONSOLE_APPENDER"/&gt;
  &lt;/root&gt;

  &lt;logger name="org.springframework" level="INFO"/&gt;
&lt;/configuration&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The provided <code>logback.xml</code> is configured to use variables defined on the <code>config/application.properties</code> file.
On our example, the log files path point to <code>../logs/</code> in order to log to tomcat log directory when starting tomcat on the bin folder.
Change it according to your custom needs.</p>
</div>
<div class="listingblock">
<div class="title">config/application.properties</div>
<div class="content">
<pre class="highlight"><code class="properties language-properties">log.dir=../logs/</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="devonfw-guide_devon4j.wiki_guide-logging.asciidoc_log-files">Log Files</h3>
<div class="paragraph">
<p>The classical approach uses the following log files:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Error Log</strong>: Includes log entries to detect errors.</p>
</li>
<li>
<p><strong>Info Log</strong>: Used to analyze system status and to detect bottlenecks.</p>
</li>
<li>
<p><strong>Debug Log</strong>: Detailed information for error detection.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The log file name pattern is as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>«LOGTYPE»_log_«HOST»_«APPLICATION»_«TIMESTAMP».log</code></pre>
</div>
</div>
<table class="tableblock frame-all grid-all" style="width: 100%;">
<caption class="title">Table 2. Segments of Logfilename</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Element</strong></th>
<th class="tableblock halign-left valign-top"><strong>Value</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">«LOGTYPE»</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">info, error, debug</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type of log file</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">«HOST»</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">e.g. mywebserver01</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of server, where logs are generated</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">«APPLICATION»</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">e.g. myapp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of application, which causes logs</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">«TIMESTAMP»</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">YYYY-MM-DD_HH00</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">date of log file</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Example:
error_log_mywebserver01_myapp_2013-09-16_0900.log</p>
</div>
<div class="paragraph">
<p>Error log from mywebserver01 at application myapp at 16th September 2013 9pm.</p>
</div>
</div>
<div class="sect2">
<h3 id="devonfw-guide_devon4j.wiki_guide-logging.asciidoc_output-format">Output format</h3>
<div class="paragraph">
<p>We use the following output format for all log entries to ensure that searching and filtering of log entries work consistent for all logfiles:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>[D: «timestamp»] [P: «priority»] [C: «NDC»][T: «thread»][L: «logger»]-[M: «message»]</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>D</strong>: Date (Timestamp in ISO8601 format e.g. 2013-09-05 16:40:36,464)</p>
</li>
<li>
<p><strong>P</strong>: Priority (the log level)</p>
</li>
<li>
<p><strong>C</strong>: <a href="#devonfw-guide_devon4j.wiki_guide-logging.asciidoc_correlation-id">Correlation ID</a> (ID to identify users across multiple systems, needed when application is distributed)</p>
</li>
<li>
<p><strong>T</strong>: Thread (Name of thread)</p>
</li>
<li>
<p><strong>L</strong>: Logger name (use class name)</p>
</li>
<li>
<p><strong>M</strong>: Message (log message)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>[D: 2013-09-05 16:40:36,464] [P: DEBUG] [C: 12345] [T: main] [L: my.package.MyClass]-[M: My message...]</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="icon-note" title=""></i>
</td>
<td class="content">
When using devon4j-logging, this format is used by default. To achieve this format in Quarkus, set <code>quarkus.log.console.format=[D: %d] [P: %p] [C: %X] [T: %t] [L: %c] [M: %m]%n</code> in your properties.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="devonfw-guide_devon4j.wiki_guide-logging.asciidoc_correlation-id">Correlation ID</h3>
<div class="paragraph">
<p>In order to correlate separate HTTP requests to services belonging to the same user / session, we provide a servlet filter called <code>DiagnosticContextFilter</code>.
This filter takes a provided correlation ID from the HTTP header <code>X-Correlation-Id</code>.
If none was found, it will generate a new correlation id as <code>UUID</code>.
This correlation ID is added as MDC to the logger.
Therefore, it will then be included to any log message of the current request (thread).
Further concepts such as <a href="#devonfw-guide_devon4j.wiki_guide-service-client.asciidoc">service invocations</a> will pass this correlation ID to subsequent calls in the application landscape. Hence you can find all log messages related to an initial request simply via the correlation ID even in highly distributed systems.</p>
</div>
</div>
<div class="sect2">
<h3 id="devonfw-guide_devon4j.wiki_guide-logging.asciidoc_security">Security</h3>
<div class="paragraph">
<p>In order to prevent <a href="https://owasp.org/www-community/attacks/Log_Injection">log forging</a> attacks you can simply use the suggested <a href="#devonfw-guide_devon4j.wiki_guide-logging.asciidoc_json-logging">JSON logging</a> format.
Otherwise you can use <code>com.devonfw.module.logging.common.impl.SingleLinePatternLayout</code> as demonstrated  <a href="https://github.com/devonfw/devon4j/blob/master/modules/logging/src/main/resources/com/devonfw/logging/logback/appender-file-warn.xml">here</a> in order to prevent such attacks.</p>
</div>
</div>
</div>
</div>
</div>
<div id="footer" class="footer">
<div class="openblock footerLinks">
<div class="content">
<div class="dlist linklist">
<dl>
<dt class="hdlist1">About</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="/website/pages/welcome/welcome.html">About devonfw</a></p>
</li>
<li>
<p><a href="/website/pages/docs/devonfw-guide_getting-started.wiki_introduction-why-should-i-use-devonfw.asciidoc_features.html">Features</a></p>
</li>
<li>
<p><a href="/website/pages/docs/devonfw-guide_devon4j.wiki_architecture.asciidoc.html#devonfw-guide_devon4j.wiki_architecture.asciidoc_technology-stack">Technology Stack</a></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="dlist linklist">
<dl>
<dt class="hdlist1">Explore</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="/website/pages/docs/devonfw-guide_getting-started.wiki_getting-started.asciidoc.html">Getting started</a></p>
</li>
<li>
<p><a href="/website/pages/docs/devonfw-guide_devon4j.wiki_architecture.asciidoc.html">Architecture</a></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="dlist linklist">
<dl>
<dt class="hdlist1">Docs</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="/website/pages/docs/devonfw-guide_ide.wiki_devonfw-ide-introduction.asciidoc.html">User guide</a></p>
</li>
<li>
<p><a href="/website/pages/docs/devonfw-guide_general_master-release-notes.asciidoc.html">Releases information</a></p>
</li>
<li>
<p><a href="/website/pages/docs/master.html">Wiki</a></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="dlist linklist">
<dl>
<dt class="hdlist1">Community</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/orgs/devonfw/people">Contributors</a></p>
</li>
<li>
<p><a href="https://github.com/devonfw/devonfw.github.io/blob/develop/README.asciidoc">Website Contribution</a></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="ulist footerFooter">
<ul>
<li>
<p><a href="https://devonfw.com/website/pages/docs/devonfw-guide_ide.wiki_LICENSE.asciidoc.html">Terms of Use</a></p>
</li>
<li>
<p><a href="https://github.com/devonfw">Support</a></p>
</li>
</ul>
</div>
</div>
    <script>
      let bb = document.getElementById('menu-button');
      bb.addEventListener('click', function() {
        document.querySelector('.website-navbar ul').classList.toggle('visible');
        console.log(document.querySelector('.website-navbar ul'))
      })
    </script>
    <script type="module">
      import { EditLinksModule } from '/website/shared/editlinks.js';

      let alwaysVisible = true;
      if(document.location.pathname.endsWith("pages/welcome/welcome.html")) {
        alwaysVisible = false;
      }
      EditLinksModule.addEditLinks(alwaysVisible);
    </script>
    <script src="/website/assets/scripts/popper.min.js"></script>
    <script src="/website/assets/scripts/bootstrap.min.js"></script>
<div class="footnote"><sub>

Last updated 2023-11-03 14:14:01 UTC
</sub></div>
</div>
</div>
<link rel="stylesheet" type="text/css" href="https://cginternal.devonfw.com/websitesnippets/main.css">
<script async src="https://cginternal.devonfw.com/websitesnippets/main.js"></script>
<script>
  if(!document.location.pathname.endsWith("pages/welcome/welcome.html")) {
    anchors.options.visible = 'always';
  }
  anchors.add();
</script>
<script>
  var internalUrls = ["https://cginternal.devonfw.com/websitesnippets/"];
  $(".internal").each(function(){
    internalUrls.forEach((internalUrl, index) => {
      $.ajax({url: internalUrl + $(this).text() + "/index.html" })
      .then(r => {
        var leftDiv = $('<div class="info"><span class="infoText">Internal</span><img class="infoImage" src="' + internalUrl + 'logo.png"/></div>');
        var rightFirstDiv = $('<div class="message">This is only visible inside of the corporate network.</div>');
        var rightLastDiv = $('<div class="content"></div>');
        rightLastDiv.html(r);
        var rightDiv = $('<div class="right"></div>');
        rightDiv.append(rightFirstDiv);
        rightDiv.append(rightLastDiv);
        $(this).html(leftDiv);
        $(this).append(rightDiv);
        $(this).addClass("internal-active");
        $(this).removeClass("internal");
      })
    });
	});
</script>
<script>
      let cookieName = 'cookie_consent';
      let expiryTime = new Date(2037, 11, 21);
      let today = new Date();
      let cookieConsentDeclinedDate = localStorage.getItem("cookie_consent_declined");
      let dateDiffHours = 0;
      let cookieConsentHtml = `
      <div id="cookie-consent">
        <p>
          We use cookies to perform analytics and enhance user experience. Do you accept to the use of cookies?
        </p>
        <p class="cookie-consent-buttons">
          <a id="decline-cookie-btn" class="btn white-button" href="javascript:void(0)">Decline</a>
          <a id="accept-cookie-btn" class="btn blue-button" href="javascript:void(0)">Accept</a>
        </p>
      </div>
      `;
      
      const parseCookie = str =>
        str
        .split(';')
        .map(v => v.split('='))
        .reduce((acc, v) => {
          acc[decodeURIComponent(v[0].trim())] = decodeURIComponent(v[1].trim());
          return acc;
        }, {});
      
      dateDiffHours = cookieConsentDeclinedDate ? Math.abs(cookieConsentDeclinedDate - today) / 36e5 : 0;
      if (document.cookie.indexOf(cookieName) < 0) {
        if (cookieConsentDeclinedDate) {
          if (dateDiffHours > 24) {
            $("body").append(cookieConsentHtml);
          }
        } else {
          $("body").append(cookieConsentHtml);
        }
      } else {
        cookies = parseCookie(document.cookie);
        if (cookies["cookie_consent"] == "accept") {
          consentGranted();
        }
      }
      
      $("#accept-cookie-btn").click(function() {
        document.cookie = `${cookieName}=accept;expires=${expiryTime};path=/`;
        localStorage.removeItem("cookie_consent_declined");
        consentGranted();
        $("#cookie-consent").hide();
      });
      $("#decline-cookie-btn").click(function() {
        localStorage.setItem("cookie_consent_declined", today);
        $("#cookie-consent").hide();
      });
</script>
</body>
</html>