<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Configuration :: devonfw</title>
    <link rel="canonical" href="https://devonfw.com/docs/java/current/cross_cutting/configuration.html">
    <meta name="generator" content="Antora 3.0.2">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <script>var uiRootPath = '../../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://devonfw.com/docs">devonfw</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
    <div class="navbar-end">
        <a class="navbar-item" href="/docs/java/current/">Java</a>
        <a class="navbar-item" href="/docs/typescript/current/">TypeScript</a>
        <a class="navbar-item" href="https://github.com/devonfw/ide">IDE</a>
        <a class="navbar-item" href="https://github.com/devonfw/hangar">CI/CD</a>
        <a class="navbar-item" href="/website/pages/learning/">Tutorials</a>
        <a class="navbar-item" href="/website/pages/solutions/">Solutions</a>
        <a class="navbar-item" href="/website/pages/docs/master.html">Legacy Docs</a>
          <div class="navbar-item search hide-for-print">
            <div id="search-field" class="field">
              <input id="search-input" type="text" placeholder="Search the docs">
            </div>
          </div>
        <a class="navbar-github navbar-item" href="https://github.com/devonfw/"></a>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="java" data-version="1">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">Java</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../getting_started/getting_started.html">Getting started</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../getting_started/create_rest_service.html">Create a REST service</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Architecture</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../architecture/layered_architecture.html">Layered Architecture</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Integration</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../integration/rest_service.html">REST</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../integration/rest_exception_handling.html">RESTful Exception Handling</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../integration/rest_service_json.html">JSON</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../integration/rest_openapi.html">Open Api Generator</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Persistence</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Relational Databases</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../persistence/jpa.html">JPA</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../persistence/transactional.html">Transaction</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Cross cutting</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="coding_conventions.html">Coding Conventions</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="configuration.html">Configuration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="dependency_injection.html">Dependency Injection</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="exceptions.html">Exceptions</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="i18n.html">Internationalization (I18N)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="logging.html">Logging</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Security</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="security/authentication.html">Authentication</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="security/authorization.html">Authorization</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="security/cors.html">CORS</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="security/csrf.html">CSRF</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="tracing.html">Tracing</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Examples</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../examples/my-thai-star.html">My-Thai-Star Sample Application</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Java</span>
    <span class="version">1</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="../index.html">Java</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">1</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../typescript/current/index.html">Typescript</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../typescript/current/index.html">1</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Java</a></li>
    <li>Cross cutting</li>
    <li><a href="configuration.html">Configuration</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/devonfw/java/edit/main/modules/ROOT/pages/cross_cutting/configuration.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Configuration</h1>
<div class="sect1">
<h2 id="_overview"><a class="anchor" href="#_overview"></a>Overview</h2>
<div class="sectionbody">
<div class="tabset is-loading">
<div class="ulist tabs">
<ul>
<li>
<p><a id="tabset1_spring"></a>Spring</p>
</li>
</ul>
</div>
<div class="content">
<div class="tab-pane" aria-labelledby="tabset1_spring">
<div class="paragraph">
<p>A detailed overview of Springs configuration mechanisms is available here:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://docs.spring.io/spring-boot/docs/current-SNAPSHOT/reference/htmlsingle/#features.external-config" class="bare">https://docs.spring.io/spring-boot/docs/current-SNAPSHOT/reference/htmlsingle/#features.external-config</a></p>
</li>
<li>
<p><a href="https://docs.spring.io/spring-boot/docs/current-SNAPSHOT/reference/htmlsingle/#features.profiles" class="bare">https://docs.spring.io/spring-boot/docs/current-SNAPSHOT/reference/htmlsingle/#features.profiles</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A list of common properties provided by spring can be found here:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://docs.spring.io/spring-boot/docs/current/reference/html/common-application-properties.html" class="bare">https://docs.spring.io/spring-boot/docs/current/reference/html/common-application-properties.html</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_profile_configuration_files"><a class="anchor" href="#_profile_configuration_files"></a>Profile configuration files</h2>
<div class="sectionbody">
<div class="tabset is-loading">
<div class="ulist tabs">
<ul>
<li>
<p><a id="tabset2_spring"></a>Spring</p>
</li>
</ul>
</div>
<div class="content">
<div class="tab-pane" aria-labelledby="tabset2_spring">
<div class="paragraph">
<p>With <a href="https://docs.spring.io/spring-boot/docs/current-SNAPSHOT/reference/htmlsingle/#features.profiles">Spring Profiles</a> parts of the configuration can be made available in certain environments. The most prominent example might be the database config for dev and prod. Imagine on dev a h2 is used, whereas in prod a PostgreSQL instance needs to be connected.</p>
</div>
<div class="paragraph">
<p>In Spring there&#8217;re multiple ways to configure and use profiles:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://docs.spring.io/spring-boot/docs/current-SNAPSHOT/reference/htmlsingle/#features.external-config.files.profile-specific">Profile specific files</a> can be used to store profile related config. By setting <code>spring.profiles.active</code> to one of the profiles, the selected profile is considered.</p>
</li>
<li>
<p>Using <code>spring.config.activate.on-profile</code> in different property files, that mark those properties as configuration of a certain profile. Again the profile needs to be set form outside.</p>
</li>
<li>
<p>Using <a href="https://docs.spring.io/spring-boot/docs/current-SNAPSHOT/reference/htmlsingle/#features.external-config.files">external application properties</a> that reside outside the jar</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>It has proven a good practices to use external application properties in combination with defaults inside the jar.
Therefore, the following properties files are used in devonfw application:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>src/main/resources/application.properties</code> providing a default configuration - bundled and deployed with the application package. It further acts as a template to derive a tailored minimal environment-specific configuration.</p>
</li>
<li>
<p><code>src/main/resources/config/application.properties</code> providing additional properties only used at development time (for all local deployment scenarios). This property file is excluded from all packaging.</p>
</li>
<li>
<p><code>src/test/resources/config/application.properties</code> providing additional properties only used for testing.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For other environments where the software gets deployed such as <code>test</code>, <code>acceptance</code> and <code>production</code> a tailored copy of <code>application.properties</code> needs to be provided. The name will stay <code>application.properties</code> and the location depends on the deployment strategy:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>standalone run-able Spring Boot App using embedded tomcat: <code>config/application.properties</code> under the installation directory of the spring boot application.</p>
</li>
<li>
<p>dedicated tomcat (one tomcat per app): <code>$CATALINA_BASE/lib/config/application.properties</code></p>
</li>
<li>
<p>tomcat serving a number of apps (requires expanding the wars): <code>$CATALINA_BASE/webapps/&lt;app&gt;/WEB-INF/classes/config</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In this <code>application.properties</code> the minimum set of properties that are environment specific are defined everything else is inherited from the bundled <code>src/main/resources/application.properties</code>. In any case, it needs to be sure that the classloader will find the file.</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_naming_conventions_for_configuration_properties"><a class="anchor" href="#_naming_conventions_for_configuration_properties"></a>Naming conventions for configuration properties</h2>
<div class="sectionbody">
<div class="paragraph">
<p>As a best practice the configuration properties should follow these naming conventions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>build the property-name as a path of segments separated by the dot character (<code>.</code>)</p>
</li>
<li>
<p>segments should get more specific from left to right</p>
</li>
<li>
<p>a property-name should either be a leaf value or a tree node (prefix of other property-names) but never both! So never have something like <code>foo.bar=value</code> and <code>foo.bar.child=value2</code>.</p>
</li>
<li>
<p>start with a segment namespace unique to the context or application</p>
</li>
<li>
<p>a good example would be <code>«myapp».billing.service.email.sender</code> for the sender address of billing service emails send by <code>«myapp»</code>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_security"><a class="anchor" href="#_security"></a>Security</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Storing credentials as plain text in configuration files is not an option.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Plain text credentials or private keys should never be stored or written down, except in dedicated secret stores.</p>
</div>
<div class="paragraph">
<p>Never commit any plain text credentials in the source code management systems.
Those systems are designed to never forget anything! In case any secrets were stored in scm the history needs to be cleaned to completely remove it from scm.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_encryption"><a class="anchor" href="#_encryption"></a>Encryption</h3>
<div class="paragraph">
<p>Encryption partly solves this problem.
The plain text credentials are encrypted using a strong algorithm and masterpassword.
The encrypted password is useless for anybody not knowing the masterpassword.</p>
</div>
<div class="paragraph">
<p>The masterpassword needs to be provided to the system in a secure way.
Providing the password is the challenge in this scenario.
How and if the password can be provided securely depends highly on the environment.</p>
</div>
<div class="paragraph">
<p>For encryption jasypt can be used.</p>
</div>
<div class="tabset is-loading">
<div class="ulist tabs">
<ul>
<li>
<p><a id="tabset3_spring"></a>Spring</p>
</li>
<li>
<p><a id="tabset3_quarkus"></a>Quarkus</p>
</li>
</ul>
</div>
<div class="content">
<div class="tab-pane" aria-labelledby="tabset3_spring">
<div class="paragraph">
<p>Use the Spring Boot Jasypt starter.
The github repository delivers a god documentation:
<a href="https://github.com/ulisesbocchio/jasypt-spring-boot" class="bare">https://github.com/ulisesbocchio/jasypt-spring-boot</a></p>
</div>
<div class="paragraph">
<p>The default encryption options and the algorithm <code>PBEWITHHMACSHA512ANDAES_256</code> are considered secure enough.</p>
</div>
</div>
<div class="tab-pane" aria-labelledby="tabset3_quarkus">
<div class="paragraph">
<p>For Quarkus there&#8217;s currently no known ready to use library.
<a href="https://stackoverflow.com/questions/67159572/how-to-encrypt-and-decrypt-using-jasypt-in-quarkus-for-database-password" class="bare">https://stackoverflow.com/questions/67159572/how-to-encrypt-and-decrypt-using-jasypt-in-quarkus-for-database-password</a></p>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_vault"><a class="anchor" href="#_vault"></a>Vault</h3>
<div class="paragraph">
<p>The most secure way of providing secrets to the application is using a dedicate secret store.
This could be for example <a href="https://www.vaultproject.io/">HashiCorp Vault</a></p>
</div>
<div class="tabset is-loading">
<div class="ulist tabs">
<ul>
<li>
<p><a id="tabset4_spring"></a>Spring</p>
</li>
<li>
<p><a id="tabset4_quarkus"></a>Quarkus</p>
</li>
</ul>
</div>
<div class="content">
<div class="tab-pane" aria-labelledby="tabset4_spring">
<div class="paragraph">
<p>Spring provides an integration with HashiCorp Vault. <a href="https://spring.io/projects/spring-vault" class="bare">https://spring.io/projects/spring-vault</a></p>
</div>
</div>
<div class="tab-pane" aria-labelledby="tabset4_quarkus">
<div class="paragraph">
<p>See the official Quarkus guide for instruction on using HashiCorp Vault <a href="https://quarkiverse.github.io/quarkiverse-docs/quarkus-vault/dev/index.html" class="bare">https://quarkiverse.github.io/quarkiverse-docs/quarkus-vault/dev/index.html</a></p>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <div class="bottom-footer">
    <ul>
      <li><a>Impressum</a></li>
    </ul>
  </div>
</footer>
<script src="../../../_/js/site.js"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
<script src="../../../_/js/vendor/lunr.js"></script>
<script src="../../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../../.." data-snippet-length="100" data-stylesheet="../../../_/css/search.css"></script>
<script async src="../../../search-index.js"></script>
  </body>
</html>
