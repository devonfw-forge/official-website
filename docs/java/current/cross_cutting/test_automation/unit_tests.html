<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Unit Tests :: devonfw</title>
    <link rel="canonical" href="https://devonfw.com/docs/java/current/cross_cutting/test_automation/unit_tests.html">
    <meta name="generator" content="Antora 3.0.2">
    <link rel="stylesheet" href="../../../../_/css/site.css">
<meta property="og:title" content="1/cross_cutting/test_automation/unit_tests.adoc" />    <script>var uiRootPath = '../../../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://devonfw.com/">devonfw</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
    <div class="navbar-end">
        <a class="navbar-item" href="https://devonfw.com/docs/java/current/">Java</a>
        <a class="navbar-item" href="https://devonfw.com/docs/typescript/current/">TypeScript</a>
        <a class="navbar-item" href="https://github.com/devonfw/ide">IDE</a>
        <a class="navbar-item" href="https://github.com/devonfw/hangar">CI/CD</a>
        <a class="navbar-item" href="https://devonfw.com/website/pages/learning/">Tutorials</a>
        <a class="navbar-item" href="https://devonfw.com/website/pages/docs/master.html">Legacy Docs</a>
          <div class="navbar-item search hide-for-print">
            <div id="search-field" class="field">
              <input id="search-input" type="text" placeholder="Search the docs">
            </div>
          </div>
        <a class="navbar-github navbar-item" href="https://github.com/devonfw/"></a>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="java" data-version="1">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../../index.html">Java</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../getting_started/getting_started.html">Getting started</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../getting_started/create_rest_service.html">Create a REST service</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Architecture</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../architecture/layered_architecture.html">Layered Architecture</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../architecture/hexagonal_architecture.html">Hexagonal Architecture</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Integration</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../integration/rest_service.html">REST</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../integration/rest_exception_handling.html">RESTful Exception Handling</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../integration/rest_service_json.html">JSON</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../integration/rest_openapi.html">Open Api Generator</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Persistence</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Relational Databases</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../persistence/jpa.html">JPA</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../persistence/transactional.html">Transaction</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Cross cutting</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../coding_conventions.html">Coding Conventions</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../configuration.html">Configuration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../dependency_injection.html">Dependency Injection</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../exceptions.html">Exceptions</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../i18n.html">Internationalization (I18N)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../oauth2_proxy.html">Authentication with Keycloak using a OAuth 2 Proxy</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../logging.html">Logging</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Security</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../security/authentication.html">Authentication</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../security/authorization.html">Authorization</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../security/cors.html">CORS</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../security/csrf.html">CSRF</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../tracing.html">Tracing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="test_automation.html">Test Automation</a>
<ul class="nav-list">
  <li class="nav-item is-current-page" data-depth="3">
    <a class="nav-link" href="unit_tests.html">Unit Tests</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="sub_system_tests.html">Subsystem- and System-Tests</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="contract_tests.html">Consumer Driven Contract (CDC) Tests</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="architecture_tests.html">Architecture Tests</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Examples</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../examples/my-thai-star.html">My-Thai-Star Sample Application</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Java</span>
    <span class="version">1</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="../../index.html">Java</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../../index.html">1</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../typescript/current/index.html">Typescript</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../typescript/current/index.html">1</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../../index.html">Java</a></li>
    <li>Cross cutting</li>
    <li><a href="test_automation.html">Test Automation</a></li>
    <li><a href="unit_tests.html">Unit Tests</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/devonfw/java/edit/main/modules/ROOT/pages/cross_cutting/test_automation/unit_tests.adoc">Contribute to this page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<div id="contribution-overlay" class="contribution-overlay"></div>
<div id="contribution-div" class="contribution">
  <button id="contribution-btn" class="contribution-btn"><span class="close">&times</span></button>
  <div class="contribution-container">
      <div class="contribution-img"> </div>
      <h2> Contribute to help us improve!</h2> 
      <p> Are there edge cases or problems that we didn't consider? Is there a technical pitfall that we should add? Did we miss a comma in a sentence? </p>
      <p> If you have any input for us, we would love to hear from you and appreciate every contribution. Our goal is to learn from projects for projects such that nobody has to reinvent the wheel. </p>
      <p> Let's collect our experiences together to make room to explore the novel! </p> 
      <p> To contribute click on <span class="devonfw-primary-color">Contribute to this page</span> on the toolbar.</p>
  </div>
</div><h1 class="page">Unit Tests</h1>
<div class="sect1">
<h2 id="_unit_and_unit_integration_tests_good_practices"><a class="anchor" href="#_unit_and_unit_integration_tests_good_practices"></a>Unit- and Unit-Integration-Tests Good Practices</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This articles focuses on Unit- and Unit-Integration-Tests.
General test automation good practices can be found <a href="test_automation.html" class="xref page">here</a>.</p>
</div>
<div class="sect2">
<h3 id="_use_tdd_to_improve_code_and_test_quality"><a class="anchor" href="#_use_tdd_to_improve_code_and_test_quality"></a>Use TDD to improve code and test quality</h3>
<div class="paragraph">
<p><a href="https://testdriven.io/test-driven-development/">Test Driven Development (TDD)</a> is a software development method where tests are written first before the actual code in cycles "make it red, make it green, make it clean".
It leads to better tests and often to a better design, because the parts where the logic happens are better structured to allow easy testing.
It also leads to better code, because the last step is a refactoring that can be performed safely because of the tests.</p>
</div>
</div>
<div class="sect2">
<h3 id="_structure_your_tests_with_the_aaa_pattern"><a class="anchor" href="#_structure_your_tests_with_the_aaa_pattern"></a>Structure your tests with the AAA Pattern</h3>
<div class="paragraph">
<p>Structure your tests in three sections:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Arrange: bring your test object in the desired state.</p>
</li>
<li>
<p>Act: perform one action on your test object and capture the output, if there is any.</p>
</li>
<li>
<p>Assert: verify that your test object has acted in the expected way.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Alternative names are given - when - then.</p>
</div>
<div class="paragraph">
<p>The sections should be easily distinguishable.
This can be done by comments or simply by empty lines (clean code way).
Which way is used is a matter of taste but do it in a consistent way.</p>
</div>
<div class="paragraph">
<p>If there are no initializations, the arrange-section may be empty. The other two sections can never be empty.</p>
</div>
<div class="paragraph">
<p>A detailed article about the AAA-pattern can be found <a href="https://freecontent.manning.com/making-better-unit-tests-part-1-the-aaa-pattern/">here</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_use_test_coverage_but_not_as_a_measure_for_test_quality"><a class="anchor" href="#_use_test_coverage_but_not_as_a_measure_for_test_quality"></a>Use test coverage, but not as a measure for test quality</h3>
<div class="paragraph">
<p>A high test coverage does not mean you have good tests.
But a low test coverage means that much of your code is completely untested.
So, this is not an option.
That means:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Set an adequate objective for code coverage (e.g. 80%); you may exclude packages that do not contain considerable logic.</p>
</li>
<li>
<p>Do not rely on coverage alone, but review tests like other code.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_prefer_delegation_over_inheritance"><a class="anchor" href="#_prefer_delegation_over_inheritance"></a>Prefer delegation over inheritance</h3>
<div class="paragraph">
<p>Unit- and Unit-Integration tests may need cross-cutting functionality.
For this, prefer delegation over inheritance to avoid god-super-classes.
Good places to put this kind of code can be realized and reused via the JUnit @Rule mechanism.</p>
</div>
</div>
<div class="sect2">
<h3 id="_technology_stack"><a class="anchor" href="#_technology_stack"></a>Technology Stack</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://junit.org/junit5/">Junit 5</a> is the good de-facto standard for Java.</p>
</li>
<li>
<p>Keep the scope of Unit Tests small. This will require mocking of classes that a test object interacts with.
<a href="https://site.mockito.org/">Mockito</a> is a good choice for a mocking framework.</p>
</li>
<li>
<p>For mocking remote connections <a href="https://wiremock.org/">Wiremock</a> is a good choice.</p>
</li>
<li>
<p>Use <a href="https://assertj.github.io/doc/">AssertJ</a> to write good readable assertions that also provide valuable feedback in case a test fails.
Do not use legacy JUnit methods like <code>assertEquals</code> anymore.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_example"><a class="anchor" href="#_example"></a>Example</h3>
<div class="tabset is-loading">
<div class="ulist tabs">
<ul>
<li>
<p><a id="tabset1_simple-good-case"></a>Simple good case</p>
</li>
<li>
<p><a id="tabset1_parameterized-good-cases"></a>Parameterized good cases</p>
</li>
<li>
<p><a id="tabset1_parameterized-error-cases"></a>Parameterized error cases</p>
</li>
</ul>
</div>
<div class="content">
<div class="tab-pane" aria-labelledby="tabset1_simple-good-case">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">    @Test
    void shouldCreateAValidCommonBookingToken() {
        // arrange
        String validCommonToken = "CB_12345";
        // act
        BookingToken token = BookingToken.of(validCommonToken);
        // assert
        assertThat(token.getBookingType()).isEqualTo(BookingType.COMMON);
    }</code></pre>
</div>
</div>
</div>
<div class="tab-pane" aria-labelledby="tabset1_parameterized-good-cases">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">    @ParameterizedTest
    @CsvSource({
            "CB_, COMMON",
            "GB_1234 ,INVITED"})
    void shouldCreateValidCommonBookingTokens(String tokenStr, BookingType expectedType) {
        // act
        BookingToken token = BookingToken.of(tokenStr);
        // assert
        assertThat(token.getToken()).isEqualTo(tokenStr);
        assertThat(token.getBookingType()).isEqualTo(expectedType);
    }</code></pre>
</div>
</div>
</div>
<div class="tab-pane" aria-labelledby="tabset1_parameterized-error-cases">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">    @ParameterizedTest
    @NullSource
    @ValueSource(strings = { "A", "CB1233", " ", "122323423423" })
    void shouldDetectInvalidTokens(String token) {
        // act &amp; assert
        assertThrows(WrongTokenException.class, () -&gt; BookingToken.of(token));
    }</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<hr>
<div id="giscus-div">
  <script src="https://giscus.app/client.js"
          data-repo="devonfw/java"
          data-repo-id="R_kgDOISza8Q"
          data-category="Feedback"
          data-category-id="DIC_kwDOISza8c4CSzPy"
          data-mapping="og:title"
          data-strict="0"
          data-reactions-enabled="1"
          data-emit-metadata="0"
          data-input-position="bottom"
          data-theme="light"
          data-lang="en"
          crossorigin="anonymous"
          async>
  </script>
<div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <div class="bottom-footer">
    <ul>
      <li><a href="https://devonfw.com/website/pages/docs/devonfw-guide_ide.wiki_LICENSE.asciidoc.html">Terms of use</a></li>
    </ul>
  </div>
</footer>
<script src="https://cginternal.devonfw.com/communitycontent/main.js"></script>
<script src="../../../../_/js/site.js"></script>
<script async src="../../../../_/js/vendor/highlight.js"></script>
<script src="../../../../_/js/vendor/lunr.js"></script>
<script src="../../../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../../../.." data-snippet-length="100" data-stylesheet="../../../../_/css/search.css"></script>
<script async src="../../../../search-index.js"></script>
  </body>
</html>
