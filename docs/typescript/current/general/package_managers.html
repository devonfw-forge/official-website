<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Package Managers :: devonfw</title>
    <link rel="canonical" href="https://devonfw.com/docs/typescript/current/general/package_managers.html">
    <meta name="generator" content="Antora 3.0.2">
    <link rel="stylesheet" href="../../../_/css/site.css">
<meta property="og:title" content="1/general/package_managers.adoc" />    <script>var uiRootPath = '../../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://devonfw.com/">devonfw</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
    <div class="navbar-end">
        <a class="navbar-item" href="https://devonfw.com/docs/java/current/">Java</a>
        <a class="navbar-item" href="https://devonfw.com/docs/typescript/current/">TypeScript</a>
        <a class="navbar-item" href="https://github.com/devonfw/ide">IDE</a>
        <a class="navbar-item" href="https://github.com/devonfw/hangar">CI/CD</a>
        <a class="navbar-item" href="https://devonfw.com/website/pages/learning/">Tutorials</a>
        <a class="navbar-item" href="https://devonfw.com/website/pages/docs/master.html">Legacy Docs</a>
          <div class="navbar-item search hide-for-print">
            <div id="search-field" class="field">
              <input id="search-input" type="text" placeholder="Search the docs">
            </div>
          </div>
        <a class="navbar-github navbar-item" href="https://github.com/devonfw/"></a>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="typescript" data-version="1">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">Typescript</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="general.html">General</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="node_version_manager.html">nvm : Node Version Manager</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="package_managers.html">Package Managers</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="package_manager_workflow.html">Package Managers Workflow</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="yarn_2.html">Yarn 2</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../angular/angular-home.html">Angular</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../angular/architecture-home.html">Architecture</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../angular/ngrx-home.html">NgRx</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../angular/guide-home.html">Guides</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../angular/nx-home.html">Nx</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Resources</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../angular/guide-angular-libraries.html">Angular Libraries</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../ionic/ionic_home.html">Ionic</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../ionic/ionic_getting_started.html">Ionic Getting Started</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../ionic/ionic_to_android.html">Ionic to Android</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../ionic/ionic_pwa.html">Ionic Progress Web Apps</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../nestjs/nestjs-home.html">NodeJS </a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Layers</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../nestjs/layer-controller.html">Controller</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../nestjs/layer-service.html">Service</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../nestjs/layer-dataaccess.html">Data Access</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../nestjs/guide-nestjs-home.html">Guides</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">devon4node applications</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../nestjs/samples.html">devon4node Samples</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../nestjs/samples-step-by-step.html">devon4node Sample Step by Step</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Resources</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../nestjs/guide-nestjs-libraries.html">NestJS Libraries</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Typescript</span>
    <span class="version">1</span>
  </div>
  <ul class="components">
    <li class="component">
      <a class="title" href="../../../java/current/index.html">Java</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../java/current/index.html">1</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <a class="title" href="../index.html">Typescript</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">1</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Typescript</a></li>
    <li><a href="general.html">General</a></li>
    <li><a href="package_managers.html">Package Managers</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/devonfw/typescript/edit/main/modules/ROOT/pages/general/package_managers.adoc">Contribute to this page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<div id="contribution-overlay" class="contribution-overlay"></div>
<div id="contribution-div" class="contribution">
  <button id="contribution-btn" class="contribution-btn"><span class="close">&times</span></button>
  <div class="contribution-container">
      <div class="contribution-img"> </div>
      <h2> Contribute to help us improve!</h2> 
      <p> Are there edge cases or problems that we didn't consider? Is there a technical pitfall that we should add? Did we miss a comma in a sentence? </p>
      <p> If you have any input for us, we would love to hear from you and appreciate every contribution. Our goal is to learn from projects for projects such that nobody has to reinvent the wheel. </p>
      <p> Let's collect our experiences together to make room to explore the novel! </p> 
      <p> To contribute click on <span class="devonfw-primary-color">Contribute to this page</span> on the toolbar.</p>
  </div>
</div><h1 class="page">Package Managers</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>There are two major package managers currently used for JavaScript / TypeScript projects which leverage NodeJS as a build platform.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="https://www.npmjs.com/">npm</a></p>
</li>
<li>
<p><a href="https://yarnpkg.com">yarn</a></p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Our recommendation is to use yarn but both package managers are fine.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
When using npm it is important to use a version greater 5.0 as npm 3 has major drawbacks compared to yarn.
The following guide assumes that you are using npm &gt;= 5 or yarn.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Before you start reading further, please take a look at the docs:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://yarnpkg.com/en/docs/getting-started">yarn getting started</a></p>
</li>
<li>
<p><a href="https://docs.npmjs.com/getting-started/what-is-npm">npm getting started</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following guide will describe best practices for working with yarn / npm.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_semantic_versioning"><a class="anchor" href="#_semantic_versioning"></a>Semantic Versioning</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When working with package managers it is very important to understand the concept of <a href="https://semver.org/">semantic versioning</a>.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Version example 1.2.3</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-right valign-top">Version</th>
<th class="tableblock halign-center valign-top">1.</th>
<th class="tableblock halign-center valign-top">2.</th>
<th class="tableblock halign-center valign-top">3</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">Version name when incrementing</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Major (2.0.0)</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Minor (1.3.0)</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Patch (1.2.4)</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">Has breaking changes</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">no</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">Has features</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">no</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">Has bug fixes</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">yes</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The table gives an overview of the most important parts of semantic versioning.
In the header version 1.2.3 is displayed.
The first row shows the name and the resulting version when incrementing a part of the version.
The next rows show specifics of the resulting version - e.g. a major version can have breaking changes, features and bug fixes.</p>
</div>
<div class="paragraph">
<p>Packages from npm and yarn leverage semantic versioning and instead of selecting a fixed version one can specify a selector.
The most common selectors are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>^1.2.3</strong>
At least 1.2.3 - 1.2.4 or 1.3.0 can be used, 2.0.0 can not be used</p>
</li>
<li>
<p><strong>~1.2.3</strong>
At lease 1.2.3 - 1.2.4 can be used, 2.0.0 and 1.3.0 can not be used</p>
</li>
<li>
<p><strong>&gt;=1.2.3</strong>
At least 1.2.3 - every version greater can also be used</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This achieves a lower number of duplicates.
To give an example:</p>
</div>
<div class="paragraph">
<p>If package A needs version 1.3.0 of package C and package B needs version 1.4.0 of package C one would end up with 4 packages.</p>
</div>
<div class="paragraph">
<p>If package A needs version ^1.3.0 of package C and package B needs version 1.4.0 of package C one would end up with 3 packages.
A would use the same version of C as B - 1.4.0.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_do_not_modify_package_json_and_lock_files_by_hand"><a class="anchor" href="#_do_not_modify_package_json_and_lock_files_by_hand"></a>Do not modify package.json and lock files by hand</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Dependencies are always added using a yarn or npm command.
Altering the package.json, package-json.lock or yarn.lock file by hand is not recommended.</p>
</div>
<div class="paragraph">
<p>Always use a yarn or npm command to add a new dependency.</p>
</div>
<div class="paragraph">
<p>Adding the package <code>express</code> with yarn to dependencies.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">yarn add express</code></pre>
</div>
</div>
<div class="paragraph">
<p>Adding the package <code>express</code> with npm to dependencies.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">npm install express</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_what_does_the_lock_file_do"><a class="anchor" href="#_what_does_the_lock_file_do"></a>What does the lock file do</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The purpose of files <code>yarn.lock</code> and <code>package-json.lock</code> is to freeze versions for a short time.</p>
</div>
<div class="paragraph">
<p>The following problem is solved:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Developer A upgrades the dependency <code>express</code> to fixed version <code>4.16.3</code>.</p>
</li>
<li>
<p><code>express</code> has sub-dependency <code>accepts</code> with version selector <code>~1.3.5</code></p>
</li>
<li>
<p>His local <code>node_modules</code> folder receives <code>accepts</code> in version <code>1.3.5</code></p>
</li>
<li>
<p>On his machine everything is working fine</p>
</li>
<li>
<p>Afterward version <code>1.3.6</code> of <code>accepts</code> is published - it contains a major bug</p>
</li>
<li>
<p>Developer B now clones the repo and loads the dependencies.</p>
</li>
<li>
<p>He receives version <code>1.3.6</code> of <code>accepts</code> and blames developer A for upgrading to a broken version.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Both <code>yarn.lock</code> and <code>package-json.lock</code> freeze all the dependencies.
For example in yarn lock you will find.</p>
</div>
<div class="listingblock">
<div class="title">yarn.lock example (excerp)</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">accepts@~1.3.5:
  version "1.3.5"
  resolved "[...URL to registry]"
  dependencies:
    mime-types "~2.1.18"
    negotiator "0.6.1"

mime-db@~1.33.0:
  version "1.33.0"
  resolved "[...URL to registry]"

mime-types@~2.1.18:
  version "2.1.18"
  resolved "[...URL to registry]"
  dependencies:
    mime-db "~1.33.0"

negotiator@0.6.1:
  version "0.6.1"
  resolved "[...URL to registry]"</code></pre>
</div>
</div>
<div class="paragraph">
<p>The described problem is solved by the example yarn.lock file.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>accepts</code> is frozen at version <code>~1.3.5</code></p>
</li>
<li>
<p>All of its sub-dependencies are also frozen.
It needs <code>mime-types</code> at version <code>~2.1.18</code> which is frozen at <code>2.1.18</code>.
<code>mime-types</code> needs <code>mime-db</code> at <code>~1.33.0</code> which is frozen at <code>1.33.0</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Every developer will receive the same versions of every dependency.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
You have to make sure all your developers are using the same npm/yarn version - this includes the CI build.
</td>
</tr>
</table>
</div>
</div>
</div>
<hr>
<div id="giscus-div">
  <script src="https://giscus.app/client.js"
          data-repo="devonfw/typescript"
          data-repo-id="R_kgDOISza8Q"
          data-category="Feedback"
          data-category-id="DIC_kwDOISza8c4CSzPy"
          data-mapping="og:title"
          data-strict="0"
          data-reactions-enabled="1"
          data-emit-metadata="0"
          data-input-position="bottom"
          data-theme="light"
          data-lang="en"
          crossorigin="anonymous"
          async>
  </script>
<div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <div class="bottom-footer">
    <ul>
      <li><a href="https://devonfw.com/website/pages/docs/devonfw-guide_ide.wiki_LICENSE.asciidoc.html">Terms of use</a></li>
    </ul>
  </div>
</footer>
<script src="https://cginternal.devonfw.com/communitycontent/main.js"></script>
<script src="../../../_/js/site.js"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
<script src="../../../_/js/vendor/lunr.js"></script>
<script src="../../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../../.." data-snippet-length="100" data-stylesheet="../../../_/css/search.css"></script>
<script async src="../../../search-index.js"></script>
  </body>
</html>
