<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Code Generation :: devonfw</title>
    <link rel="canonical" href="https://devonfw.com/docs/typescript/current/nestjs/guides-code-generation.html">
    <meta name="generator" content="Antora 3.0.2">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <script>var uiRootPath = '../../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://devonfw.com/">devonfw</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
    <div class="navbar-end">
        <a class="navbar-item" href="https://devonfw.com/docs/java/current/">Java</a>
        <a class="navbar-item" href="https://devonfw.com/docs/typescript/current/">TypeScript</a>
        <a class="navbar-item" href="https://github.com/devonfw/ide">IDE</a>
        <a class="navbar-item" href="https://github.com/devonfw/hangar">CI/CD</a>
        <a class="navbar-item" href="https://devonfw.com/website/pages/learning/">Tutorials</a>
        <a class="navbar-item" href="https://devonfw.com/website/pages/docs/master.html">Legacy Docs</a>
          <div class="navbar-item search hide-for-print">
            <div id="search-field" class="field">
              <input id="search-input" type="text" placeholder="Search the docs">
            </div>
          </div>
        <a class="navbar-github navbar-item" href="https://github.com/devonfw/"></a>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="typescript" data-version="1">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">Typescript</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../general/general.html">General</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../general/node_version_manager.html">nvm : Node Version Manager</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../general/package_managers.html">Package Managers</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../general/package_manager_workflow.html">Package Managers Workflow</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../general/yarn_2.html">Yarn 2</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../angular/angular-home.html">Angular</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../angular/architecture-home.html">Architecture</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../angular/ngrx-home.html">NgRx</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../angular/guide-home.html">Guides</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../angular/nx-home.html">Nx</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Resources</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../angular/guide-angular-libraries.html">Angular Libraries</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../ionic/ionic_home.html">Ionic</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../ionic/ionic_getting_started.html">Ionic Getting Started</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../ionic/ionic_to_android.html">Ionic to Android</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../ionic/ionic_pwa.html">Ionic Progress Web Apps</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="nestjs-home.html">NodeJS </a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Layers</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="layer-controller.html">Controller</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="layer-service.html">Service</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="layer-dataaccess.html">Data Access</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="guide-nestjs-home.html">Guides</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">devon4node applications</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="samples.html">devon4node Samples</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="samples-step-by-step.html">devon4node Sample Step by Step</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Resources</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="guide-nestjs-libraries.html">NestJS Libraries</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Typescript</span>
    <span class="version">1</span>
  </div>
  <ul class="components">
    <li class="component">
      <a class="title" href="../../../java/current/index.html">Java</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../java/current/index.html">1</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <a class="title" href="../index.html">Typescript</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">1</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Typescript</a></li>
    <li><a href="guides-code-generation.html">Code Generation</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/devonfw/typescript/edit/main/modules/ROOT/pages/nestjs/guides-code-generation.adoc">Contribute to this page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<div id="contribution-overlay" class="contribution-overlay"></div>
<div id="contribution-div" class="contribution">
  <button id="contribution-btn" class="contribution-btn"><span class="close">&times</span></button>
  <div class="contribution-container">
      <div class="contribution-img"> </div>
      <h2> Contribute to help us improve!</h2> 
      <p> Are there edge cases or problems that we didn't consider? Is there a technical pitfall that we should add? Did we miss a comma in a sentence? </p>
      <p> If you have any input for us, we would love to hear from you and appreciate every contribution. Our goal is to learn from projects for projects such that nobody has to reinvent the wheel. </p>
      <p> Let's collect our experiences together to make room to explore the novel! </p> 
      <p> To contribute click on <span class="devonfw-primary-color">Contribute to this page</span> on the toolbar.</p>
  </div>
</div><h1 class="page">Code Generation</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>As we mention in the page <a href="guides-key-principles">key principles</a>, one of our key principles is Productivity. In order to provide that productivity, we have some tools to generate code. These tools will help you generate the common parts of the application so that you can focus only on the specific functionality.</p>
</div>
<div class="paragraph">
<p>Those tools are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://www.npmjs.com/package/@devon4node/schematics">devon4node schematics through Nest CLI</a></p>
</li>
<li>
<p><a href="https://github.com/devonfw/cobigen">CobiGen</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_nest_cli_and_devon4node_schematics"><a class="anchor" href="#_nest_cli_and_devon4node_schematics"></a>Nest CLI and Devon4node schematics</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We are going to use the Nest CLI to generate code of our application, you can know more about NodeJs CLI in the official <a href="https://docs.nestjs.com/cli/overview:">documentation</a>.</p>
</div>
<div class="sect2">
<h3 id="_install_devon4node_schematics"><a class="anchor" href="#_install_devon4node_schematics"></a>Install devon4node schematics</h3>
<div class="paragraph">
<p>First of all, you need to install Nest CLI</p>
</div>
<div class="paragraph">
<p>Execute the command <code>yarn global add @nestjs/cli</code>.
You can also use npm: <code>npm install -g @nestjs/cli</code></p>
</div>
<div class="paragraph">
<p>And then Devon4node schematics globally with the following command:</p>
</div>
<div class="paragraph">
<p><code>yarn global add @devon4node/schematics</code> or <code>npm install -g @devon4node/schematics</code></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If you get an error trying execute any devon4node schematic related to collection not found, try to reinstall devon4node/schematics on the project folder or be sure that schematics folder is inside @devon4node in node_modules.
<code>yarn add @devon4node/schematics</code></p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_generate_new_devon4node_application"><a class="anchor" href="#_generate_new_devon4node_application"></a>Generate new devon4node application</h3>
<div class="paragraph">
<p>To start creating a devon4node application, execute the command:</p>
</div>
<div class="paragraph">
<p><code>nest g -c @devon4node/schematics application [application-name]</code></p>
</div>
<div class="paragraph">
<p>If you do not put a name, the command line will ask you for one.</p>
</div>
</div>
<div class="sect2">
<h3 id="_generate_code_for_typeorm"><a class="anchor" href="#_generate_code_for_typeorm"></a>Generate code for TypeORM</h3>
<div class="paragraph">
<p>Initialize TypeORM into your current project in a correct way.</p>
</div>
<div class="paragraph">
<p><code>nest g -c @devon4node/schematics typeorm</code></p>
</div>
<div class="paragraph">
<p>Then, you will be asked about which DB you want to use.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../_images/typeorm-schematic.PNG" alt="typeorm schematic"></span></p>
</div>
</div>
<div class="sect2">
<h3 id="_generate_crud"><a class="anchor" href="#_generate_crud"></a>Generate CRUD</h3>
<div class="paragraph">
<p>Generate CRUD methods for a entity. Requires TypeORM installed in the project.</p>
</div>
<div class="paragraph">
<p>It will add the @nestjsx/crud module as a project dependency. Then, generates an entity, a CRUD controller and a CRUD service. It also register the entity, controller and service in the module.</p>
</div>
<div class="paragraph">
<p>Execute <code>nest g -c @devon4node/schematics crud</code> and then you will need to write a name for the crud.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/crud-schematic.PNG" alt="crud schematic">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_generate_typeorm_entity"><a class="anchor" href="#_generate_typeorm_entity"></a>Generate TypeORM entity</h3>
<div class="paragraph">
<p>Add a TypeORM entity to your project. Requires TypeORM installed in the project.</p>
</div>
<div class="paragraph">
<p>Execute <code>nest g -c @devon4node/schematics entity</code> and you will be asked for an entity name.</p>
</div>
</div>
<div class="sect2">
<h3 id="_add_config_module"><a class="anchor" href="#_add_config_module"></a>Add config-module</h3>
<div class="paragraph">
<p>Add the config module to the project.</p>
</div>
<div class="paragraph">
<p>It will add the @devon4node/common module as a project dependency. Then, it will generate the configuration module into your project and add it in the core module. Also, it generates the config files for the most common environments.</p>
</div>
<div class="paragraph">
<p>The command to execute will be <code>nest g -c @devon4node/schematics config-module</code></p>
</div>
</div>
<div class="sect2">
<h3 id="_add_mailer_module"><a class="anchor" href="#_add_mailer_module"></a>Add mailer module</h3>
<div class="paragraph">
<p>Add @devon4node/mailer module to project.</p>
</div>
<div class="paragraph">
<p>It will add the @devon4node/mailer module as a project dependency. Also, it will add it to the core module and it will generate some email template examples.</p>
</div>
<div class="paragraph">
<p>Write the command <code>nest g -c @devon4node/schematics mailer</code></p>
</div>
</div>
<div class="sect2">
<h3 id="_add_swagger_module"><a class="anchor" href="#_add_swagger_module"></a>Add swagger module</h3>
<div class="paragraph">
<p>Add swagger module to project.</p>
</div>
<div class="paragraph">
<p>It will add the @nestjs/swagger module as a project dependency. Also, it will update the main.ts file in order to expose the endpoint for swagger. The default endpoint is: /v1/api</p>
</div>
<div class="paragraph">
<p>Execute the command <code>nest g -c @devon4node/schematics swagger</code></p>
</div>
</div>
<div class="sect2">
<h3 id="_add_auth_jwt_module"><a class="anchor" href="#_add_auth_jwt_module"></a>Add auth-jwt module</h3>
<div class="paragraph">
<p>Add the auth JWT module to the project.</p>
</div>
<div class="paragraph">
<p>It will add to your project the auth-jwt and user module. Also, it will import those modules into the core module.</p>
</div>
<div class="paragraph">
<p>Execute <code>nest g -c @devon4node/schematics auth-jwt</code></p>
</div>
</div>
<div class="sect2">
<h3 id="_add_security"><a class="anchor" href="#_add_security"></a>Add security</h3>
<div class="paragraph">
<p>Add cors and helmet to your project.</p>
</div>
<div class="paragraph">
<p>It will add helmet package as project dependency and update the main.ts file in order to enable the cors and helmet in your application.</p>
</div>
<div class="paragraph">
<p>Execute <code>nest g -c @devon4node/schematics security</code></p>
</div>
</div>
<div class="sect2">
<h3 id="_generate_database_migrations"><a class="anchor" href="#_generate_database_migrations"></a>Generate database migrations</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Generate database migrations</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>In order to create migration scripts with TypeORM, you need to install ts-node: <code>yarn global add ts-node</code> or <code>npm i -g ts-node</code></p>
</li>
<li>
<p>Generate the tables creation migration: <code>yarn run typeorm migration:generate -n CreateTables</code></p>
<div class="imageblock">
<div class="content">
<img src="../_images/insert-data.PNG" alt="insert data">
</div>
</div>
<div class="paragraph">
<p>It will connect to the database, read all entities and then it will generate a migration file with all sql queries need to transform the current status of the database to the status defined by the entities. If the database is empty, it will generate all sql queries need to create all tables defined in the entities. You can find a example in the todo example</p>
</div>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>As TypeORM is the tool used for DB. You can check official documentation for more information.
See <a href="https://typeorm.io/#/using-cli">TypeORM CLI documentation</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_cobigen"><a class="anchor" href="#_cobigen"></a>CobiGen</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Currently, we do not have templates to generate devon4node code (we have planned to do that in the future). Instead, we have templates that read the code of a devon4node application and generate a devon4ng application. Visit the <a href="https://github.com/devonfw/cobigen">CobiGen</a> page for more information.</p>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <div class="bottom-footer">
    <ul>
      <li><a href="https://devonfw.com/website/pages/docs/devonfw-guide_ide.wiki_LICENSE.asciidoc.html">Terms of use</a></li>
    </ul>
  </div>
</footer>
<script src="https://cginternal.devonfw.com/communitycontent/main.js"></script>
<script src="../../../_/js/site.js"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
<script src="../../../_/js/vendor/lunr.js"></script>
<script src="../../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../../.." data-snippet-length="100" data-stylesheet="../../../_/css/search.css"></script>
<script async src="../../../search-index.js"></script>
  </body>
</html>
